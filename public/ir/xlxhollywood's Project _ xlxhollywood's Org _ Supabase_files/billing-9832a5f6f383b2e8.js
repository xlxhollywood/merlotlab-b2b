!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="5fd7ce23-b42e-43ea-9347-415db438b125",e._sentryDebugIdIdentifier="sentry-dbid-5fd7ce23-b42e-43ea-9347-415db438b125")}catch(e){}}(),(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9522],{2356:(e,t,a)=>{"use strict";a.d(t,{F:()=>m});var n=a(80263),s=a(53239),r=a(70800),l=a(55071),i=a(41699),o=a(70758),d=a(54753),c=a(25643);let u={danger:(0,n.jsx)(l.A,{strokeWidth:1.5,size:18}),success:(0,n.jsx)(i.A,{strokeWidth:1.5,size:18}),warning:(0,n.jsx)(o.A,{strokeWidth:1.5,size:18}),info:(0,n.jsx)(d.A,{strokeWidth:1.5,size:18}),neutral:(0,n.jsx)(n.Fragment,{})};function m(e){let{variant:t="neutral",className:a,title:l,withIcon:i,closable:o,children:d,icon:m,actions:p}=e,x=(0,r.A)("alert"),[h,g]=(0,s.useState)(!0),f=[x.base];f.push(x.variant[t].base),a&&f.push(a);let y=[x.description,x.variant[t].description],v=[x.close];return(0,n.jsx)(n.Fragment,{children:h&&(0,n.jsxs)("div",{className:f.join(" "),children:[i?(0,n.jsx)("div",{className:x.variant[t].icon,children:i&&u[t]}):null,m&&m,(0,n.jsxs)("div",{className:"flex flex-1 items-center justify-between",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{className:[x.variant[t].header,x.header].join(" "),children:l}),(0,n.jsx)("div",{className:y.join(" "),children:d})]}),p]}),o&&(0,n.jsx)("button",{"aria-label":"Close alert",onClick:()=>g(!1),className:v.join(" "),children:(0,n.jsx)(c.A,{strokeWidth:2,size:16})})]})})}},6878:e=>{var t=Date.now;e.exports=function(e){var a=0,n=0;return function(){var s=t(),r=16-(s-n);if(n=s,r>0){if(++a>=800)return arguments[0]}else a=0;return e.apply(void 0,arguments)}}},7078:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});let n=(0,a(15740).A)("CirclePause",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"10",x2:"10",y1:"15",y2:"9",key:"c1nkhi"}],["line",{x1:"14",x2:"14",y1:"15",y2:"9",key:"h65svq"}]])},10001:(e,t,a)=>{"use strict";a.d(t,{Z:()=>n});let n={integrationsListWithOrg:e=>["organizations",e,"integrations"],integrationsList:()=>["organizations","integrations"],vercelProjectList:e=>["organizations",e,"vercel-projects"],vercelConnectionsList:e=>["organizations",e,"vercel-connections"],githubBranch:(e,t,a,n)=>["organizations",e,"branches",t,a,n],githubAuthorization:()=>["github-authorization"],githubRepositoriesList:()=>["github-repositories"],githubBranchesList:e=>["github-branches",e],githubConnectionsList:e=>["organizations",e,"github-connections"],vercelRedirect:e=>["vercel-redirect",e]}},14091:(e,t,a)=>{"use strict";a.d(t,{A:()=>x});var n=a(80263),s=a(23445),r=a(64082),l=a(11216),i=a(77472),o=a(23385),d=a(52361),c=a(51500),u=a(1012),m=a(40022);let p=e=>{let{children:t}=e,a=(0,o.a)(),{data:d,isSuccess:p}=(0,i.X)({installationId:null==a?void 0:a.partner_id});return(0,n.jsxs)("div",{className:(0,c.cn)("w-full flex flex-col overflow-hidden"),"data-sentry-component":"OrganizationLayoutContent","data-sentry-source-file":"OrganizationLayout.tsx",children:[a&&(null==a?void 0:a.managed_by)!=="supabase"&&(0,n.jsxs)(u.Fc,{variant:"default",className:"flex items-center gap-4 border-t-0 border-x-0 rounded-none",children:[(0,n.jsx)(r.A,{organization:a,showTooltip:!1,size:"medium"}),(0,n.jsxs)(u.XL,{className:"flex-1",children:["This organization is managed by ",l.N[a.managed_by],"."]}),(0,n.jsx)(m.$,{asChild:!0,type:"default",iconRight:(0,n.jsx)(s.A,{}),disabled:!p,children:(0,n.jsx)("a",{href:null==d?void 0:d.url,target:"_blank",rel:"noopener noreferrer",children:"Manage"})})]}),(0,n.jsx)("main",{className:"h-full w-full overflow-y-auto",children:t})]})},x=(0,d.r)(e=>{let{children:t}=e;return(0,n.jsx)(p,{"data-sentry-element":"OrganizationLayoutContent","data-sentry-component":"OrganizationLayout","data-sentry-source-file":"OrganizationLayout.tsx",children:t})})},17667:(e,t,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/org/[slug]/billing",function(){return a(46583)}])},22442:(e,t,a)=>{var n=a(19773),s=a(33312),r=a(22363);e.exports=function(e){return"string"==typeof e||!s(e)&&r(e)&&"[object String]"==n(e)}},22704:(e,t,a)=>{var n=a(74723);e.exports=a(6878)(n)},24332:(e,t,a)=>{"use strict";a.d(t,{Ay:()=>d});var n=a(80263),s=a(39383);a(53239);var r=a(40022),l=a(78721),i=a(70800);let o=e=>{let{id:t,disabled:a,className:o,children:d,header:c,visible:u,open:m,size:p="medium",loading:x,align:h="right",hideFooter:g=!1,customFooter:f,onConfirm:y,onCancel:v,confirmText:j="Confirm",cancelText:b="Cancel",triggerElement:N,defaultOpen:w,tooltip:C,...S}=e,_=(0,i.A)("sidepanel"),A=f||(0,n.jsxs)("div",{className:_.footer,children:[(0,n.jsx)("div",{children:(0,n.jsx)(r.$,{disabled:x,type:"default",onClick:()=>v?v():null,children:b})}),void 0!==y&&(0,n.jsxs)(l.m_,{children:[(0,n.jsx)(l.k$,{asChild:!0,children:(0,n.jsx)("span",{className:"inline-block",children:(0,n.jsx)(r.$,{htmlType:"submit",disabled:a||x,loading:x,onClick:()=>y?y():null,children:j})})}),void 0!==C&&(0,n.jsx)(l.ZI,{side:"bottom",children:C})]})]});return m=m||u,(0,n.jsxs)(s.bL,{open:m,onOpenChange:function(e){void 0!==u&&!e&&v&&v()},defaultOpen:w,"data-sentry-element":"unknown","data-sentry-component":"SidePanel","data-sentry-source-file":"SidePanel.tsx",children:[N&&(0,n.jsx)(s.l9,{asChild:!0,className:_.trigger,children:N}),(0,n.jsxs)(s.ZL,{"data-sentry-element":"unknown","data-sentry-source-file":"SidePanel.tsx",children:[(0,n.jsx)(s.hJ,{className:_.overlay,"data-sentry-element":"unknown","data-sentry-source-file":"SidePanel.tsx"}),(0,n.jsxs)(s.UC,{className:[_.base,_.size[p],_.align[h],o&&o].join(" "),onOpenAutoFocus:S.onOpenAutoFocus,onCloseAutoFocus:S.onCloseAutoFocus,onEscapeKeyDown:S.onEscapeKeyDown,onPointerDownOutside:S.onPointerDownOutside,onInteractOutside:e=>{var t;(null==(t=e.target)?void 0:t.closest("#toast"))&&e.preventDefault(),S.onInteractOutside&&S.onInteractOutside(e)},"data-sentry-element":"unknown","data-sentry-source-file":"SidePanel.tsx",children:[c&&(0,n.jsx)("header",{className:_.header,children:c}),(0,n.jsx)("div",{className:_.contents,children:d}),!g&&A]})]})]})};o.Content=function(e){let{children:t,className:a}=e,s=(0,i.A)("sidepanel");return(0,n.jsx)("div",{className:[s.content,a].join(" ").trim(),"data-sentry-component":"Content","data-sentry-source-file":"SidePanel.tsx",children:t})},o.Separator=function(){let e=(0,i.A)("sidepanel");return(0,n.jsx)("div",{className:e.separator,"data-sentry-component":"Separator","data-sentry-source-file":"SidePanel.tsx"})};let d=o},31695:(e,t,a)=>{"use strict";a.d(t,{YX:()=>d,_4:()=>c,gI:()=>o,ge:()=>i,lB:()=>l});var n=a(80263),s=a(53239),r=a(51500);let l=e=>{let{children:t,header:a,footer:s}=e;return(0,n.jsxs)(i,{"data-sentry-element":"FormPanelContainer","data-sentry-component":"FormPanel","data-sentry-source-file":"FormPanel.tsx",children:[a&&(0,n.jsx)(o,{children:a}),(0,n.jsx)(d,{className:"divide-y","data-sentry-element":"FormPanelContent","data-sentry-source-file":"FormPanel.tsx",children:t}),s&&(0,n.jsx)(c,{children:s})]})},i=(0,s.forwardRef)((e,t)=>{let{children:a,...s}=e;return(0,n.jsx)("div",{ref:t,...s,className:(0,r.cn)("bg-surface-100 border overflow-hidden rounded-md shadow max-w-full",s.className),children:a})});i.displayName=i.displayName;let o=(0,s.forwardRef)((e,t)=>{let{children:a,...s}=e;return(0,n.jsx)("div",{ref:t,...s,className:(0,r.cn)("border-default border-b px-8 py-4",s.className),children:a})});o.displayName=o.displayName;let d=(0,s.forwardRef)((e,t)=>{let{children:a,...s}=e;return(0,n.jsx)("div",{ref:t,...s,className:(0,r.cn)("divide-border flex flex-col gap-0",s.className),children:a})});d.displayName=d.displayName;let c=(0,s.forwardRef)((e,t)=>{let{children:a,...s}=e;return(0,n.jsx)("div",{ref:t,...s,className:(0,r.cn)("border-t",s.className),children:a})});c.displayName=c.displayName},33548:(e,t,a)=>{var n=a(91272),s=Math.max;e.exports=function(e,t,a){return t=s(void 0===t?e.length-1:t,0),function(){for(var r=arguments,l=-1,i=s(r.length-t,0),o=Array(i);++l<i;)o[l]=r[t+l];l=-1;for(var d=Array(t+1);++l<t;)d[l]=r[l];return d[t]=a(o),n(e,this,d)}}},33999:e=>{e.exports=function(e){return function(){return e}}},34512:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});let n=(0,a(15740).A)("CircleMinus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}]])},37253:(e,t,a)=>{var n=a(48550),s=a(92479),r=a(50084);e.exports=s(function(e,t){return r(e)?n(e,t):[]})},38230:(e,t,a)=>{var n=a(92855);e.exports=function(){try{var e=n(Object,"defineProperty");return e({},"",{}),e}catch(e){}}()},39358:(e,t,a)=>{"use strict";a.d(t,{O:()=>i,h:()=>l});var n=a(80263),s=a(53239),r=a(51500);let l=(0,s.forwardRef)((e,t)=>(0,n.jsx)("nav",{ref:t,dir:"ltr",...e,className:(0,r.cn)("border-b",e.className),children:(0,n.jsx)("ul",{role:"menu",className:"flex gap-5",children:e.children})})),i=(0,s.forwardRef)((e,t)=>{let{children:a,className:s,active:l,...i}=e;return(0,n.jsx)("li",{ref:t,"aria-selected":l?"true":"false","data-state":l?"active":"inactive",className:(0,r.cn)("inline-flex items-center justify-center whitespace-nowrap text-sm ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:text-foreground text-foreground-lighter hover:text-foreground data-[state=active]:border-foreground border-b-2 border-transparent *:py-1.5",s),...i,children:a})})},39412:(e,t,a)=>{"use strict";a.d(t,{xf:()=>g,sD:()=>j,Oe:()=>N,DG:()=>b,hw:()=>f});var n=a(80263),s=a(25643),r=a(96572),l=a(80903),i=a(53239),o=a(79279),d=a(32682),c=a(51500),u=a(2119),m=a(61965);let p=i.createContext(null),x=(0,c.cn)("relative text-foreground-lighter text-left px-2 py-1.5 rounded","hover:text-foreground hover:!bg-overlay-hover w-full flex items-center space-x-2","peer-data-[value=true]:bg-overlay-hover peer-data-[value=true]:text-strong");function h(){let e=i.useContext(p);if(!e)throw Error("useMultiSelect must be used within a MultiSelectProvider");return e}function g(e){var t;let{values:a=[],onValuesChange:s,disabled:r,dir:l,size:o,className:d,children:u,...x}=e,h=i.useRef(null),[g,f]=i.useState(!1),[y,v]=i.useState(""),[j,b]=i.useState(-1),N=i.useCallback(e=>{a.includes(e)?s(a.filter(t=>t!==e)||[]):s([...a,e])},[a]);t=()=>{g&&f(!g)},(0,i.useEffect)(()=>{let e=e=>{!h.current||h.current.contains(e.target)||t(e)};return document.addEventListener("mousedown",e),document.addEventListener("touchstart",e),()=>{document.removeEventListener("mousedown",e),document.removeEventListener("touchstart",e)}},[h,t]);let w=i.useCallback(e=>{switch(e.key){case"Backspace":case"Delete":a.length>0&&0===y.length&&(-1!==j&&j<a.length?(s(a.filter(e=>e!==a[j])),b(j-1<0?0:j-1)):s(a.filter(e=>e!==a[a.length-1])));break;case"Escape":if(-1!==j?b(-1):f(!1),h.current){let e=h.current.querySelector('button[role="combobox"]');e&&e.focus()}break;case"Enter":f(!0)}},[a,y,j]);return(0,n.jsx)(p.Provider,{value:{values:a,toggleValue:N,onValuesChange:s,open:g,setOpen:f,inputValue:y,setInputValue:v,activeIndex:j,setActiveIndex:b,size:o||"small",disabled:r},"data-sentry-element":"unknown","data-sentry-component":"MultiSelector","data-sentry-source-file":"multi-select.tsx",children:(0,n.jsx)(m.uB,{ref:h,onKeyDown:w,className:(0,c.cn)("relative w-auto overflow-visible bg-transparent flex flex-col",d),dir:l,...x,"data-sentry-element":"Command","data-sentry-source-file":"multi-select.tsx",children:u})})}(0,o.F)("",{variants:{size:{...d.vs}},defaultVariants:{size:d.FE}});let f=i.forwardRef((e,t)=>{let{label:a,persistLabel:l=!1,className:o,deletableBadge:d=!0,badgeLimit:m=9999,showIcon:p=!0,mode:x="combobox",children:g,...f}=e,{activeIndex:y,values:j,setInputValue:b,toggleValue:N,disabled:w,setOpen:C}=h(),S=i.useRef(null);i.useImperativeHandle(t,()=>S.current);let _=i.useRef(null),A=i.useRef(null),[M,k]=i.useState([]),[I,P]=i.useState(0),[E,F]=i.useState(!1),L="wrap"===m,T="number"==typeof m,z="inline-combobox"===x;i.useEffect(()=>{(null==S?void 0:S.current)&&A.current&&(L?(k(j),P(0)):(k(j.slice(0,m)),P(Math.max(0,j.length-m))))},[j,m]);let D="rounded shrink-0 px-1.5",B=i.useCallback(e=>{C(!0),b(""),z&&(e.stopPropagation(),e.preventDefault(),setTimeout(()=>{var e;null==(e=_.current)||e.focus()},100))},[]);return(0,n.jsxs)("button",{ref:S,onClick:e=>!E&&B(e),disabled:w,type:"button",role:"combobox",className:(0,c.cn)("flex w-full min-w-[200px] min-h-[40px] items-center justify-between rounded-md border","border-alternative bg-foreground/[.026] px-3 py-2 text-sm","ring-offset-background placeholder:text-muted-foreground","focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2","disabled:cursor-not-allowed disabled:opacity-50","hover:border-primary transition-colors duration-200",o),...f,children:[(0,n.jsxs)("div",{ref:A,className:(0,c.cn)("flex gap-1 -ml-1 overflow-hidden flex-1",L&&"flex-wrap",!L&&"overflow-x-auto scrollbar-thin scrollbar-track-transparent transition-colors scrollbar-thumb-muted-foreground dark:scrollbar-thumb-muted scrollbar-thumb-rounded-lg"),children:[M.map(e=>(0,n.jsxs)(u.E,{className:D,children:[e,d&&(0,n.jsx)("div",{onMouseEnter:()=>F(!0),onMouseLeave:()=>F(!1),onClick:t=>{t.stopPropagation(),N(e),F(!1)},className:"ml-1 text-foreground-lighter hover:text-foreground-light transition-colors pointer-events-auto",children:(0,n.jsx)(s.A,{size:12})})]},e)),I>0&&(0,n.jsx)(u.E,{className:D,children:T&&m<1?"".concat(I," item").concat(I>1?"s":""," selected"):"+".concat(I)}),(0,n.jsx)("span",{className:(0,c.cn)("text-foreground-muted whitespace-nowrap leading-[1.375rem] ml-1 opacity-0 transition-opacity hidden",!z&&(l||0===j.length)&&"opacity-100 visible inline"),children:a}),z&&(0,n.jsx)(v,{ref:_,showSearchIcon:!1,onValueChange:-1===y?b:void 0,placeholder:a,autoFocus:!1,wrapperClassName:(0,c.cn)("px-0 flex-1 border-none truncate",L&&"min-w-[85px]"),className:"py-0 px-1 truncate"})]}),p&&(0,n.jsx)(r.A,{size:16,strokeWidth:2,className:"text-foreground-lighter shrink-0 ml-1.5"})]})});f.displayName="MultiSelectorTrigger",g.Trigger=f;let y=(0,o.F)("bg-control border",{variants:{size:{...d.vs}},defaultVariants:{size:d.FE}}),v=i.forwardRef((e,t)=>{let{className:a,wrapperClassName:s,showResetIcon:r,showSearchIcon:l,...o}=e,{open:d,setOpen:u,inputValue:p,setInputValue:x,activeIndex:g,setActiveIndex:f,size:v,disabled:j}=h(),b=i.useRef(null);i.useImperativeHandle(t,()=>b.current);let N=()=>{setTimeout(()=>{(null==b?void 0:b.current)&&d&&b.current.focus()},100)};return(0,i.useEffect)(()=>{if(N(),!d){var e;null==(e=b.current)||e.blur()}},[d]),(0,n.jsx)(m.G7,{ref:b,value:p,onValueChange:-1===g?x:void 0,onFocus:()=>u(!0),onClick:()=>f(-1),tabIndex:d?0:-1,disabled:j,showSearchIcon:l,showResetIcon:r,handleReset:()=>{x(""),N()},wrapperClassName:s,className:(0,c.cn)(y({size:v}),"text-sm bg-transparent h-full flex-grow border-none outline-none placeholder:text-foreground-muted flex-1",-1!==g&&"caret-transparent",a),...o})});v.displayName="MultiSelectorInput",g.Input=v;let j=i.forwardRef((e,t)=>{let{className:a,children:s}=e,{open:r}=h();return(0,n.jsx)("div",{ref:t,className:(0,c.cn)("absolute w-full bg-overlay shadow-md z-10 border border-overlay top-[calc(100%+0.25rem)] rounded-md transition-all -translate-y-3",r?"opacity-100 translate-y-0 visible duration-150 ease-[.76,0,.23,1]":"opacity-0 -translate-y-3 invisible duration-0",a),children:r&&s})});j.displayName="MultiSelectorContent",g.Content=j;let b=i.forwardRef((e,t)=>{let{className:a,children:s,creatable:r=!1}=e,{open:l,inputValue:i,setInputValue:o,toggleValue:d}=h(),u=s?Array.isArray(s)?s:"object"==typeof s&&"props"in s?s.props.children:[]:[],p=u.filter(e=>!!e.props.value).map(e=>e.props.value.toLowerCase()).some(e=>e===i.toLowerCase());return(0,n.jsxs)(m.oI,{ref:t,className:(0,c.cn)("p-2 flex flex-col gap-2 scrollbar-thin scrollbar-track-transparent transition-colors","scrollbar-thumb-muted-foreground dark:scrollbar-thumb-muted","scrollbar-thumb-rounded-lg w-full max-h-[300px] overflow-y-auto",a),children:[s,r&&i.length>0&&!p?(0,n.jsxs)(m.h_,{role:"option",onSelect:()=>{l&&d(i),o("")},className:x,children:['Create "',i,'"']}):r&&0===u.length?(0,n.jsx)("div",{className:"p-2 py-1.5 text-xs text-foreground-lighter font-italic",children:"Type to add a value"}):(0,n.jsx)(m.xL,{children:(0,n.jsx)("span",{className:"text-foreground-muted",children:"No results found"})})]})});b.displayName="MultiSelectorList",g.List=b;let N=i.forwardRef((e,t)=>{let{className:a,value:s,children:r,...i}=e,{values:o,setInputValue:d,toggleValue:u,open:p}=h(),g=o.includes(s);return(0,n.jsxs)(m.h_,{ref:t,tabIndex:p?0:-1,role:"option",onSelect:()=>{p&&u(s),d("")},className:(0,c.cn)(x,a),...i,children:[(0,n.jsx)("div",{className:(0,c.cn)("flex items-center justify-center","peer h-4 w-4 shrink-0 rounded border border-control bg-control/25 ring-offset-background","transition-colors duration-150 ease-in-out","hover:border-strong","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2","disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-foreground data-[state=checked]:text-background",g?"bg-foreground text-background":"[&_svg]:invisible"),children:(0,n.jsx)(l.A,{className:"h-3 w-3",strokeWidth:4})}),(0,n.jsx)("div",{className:"text-xs flex-grow leading-none pointer-events-none cursor-pointer peer-disabled:cursor-not-allowed peer-disabled:pointer-events-none peer-disabled:opacity-50",children:r})]})});N.displayName="MultiSelectorItem",g.Item=N},40293:(e,t,a)=>{var n=a(3733),s=a(64190);e.exports=function e(t,a,r,l,i){var o=-1,d=t.length;for(r||(r=s),i||(i=[]);++o<d;){var c=t[o];a>0&&r(c)?a>1?e(c,a-1,r,l,i):n(i,c):l||(i[i.length]=c)}return i}},41699:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});let n=(0,a(15740).A)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},45412:(e,t,a)=>{"use strict";a.d(t,{I:()=>r});var n=a(80263),s=a(40022);let r=e=>{let{form:t,hasChanges:a,handleReset:r,helper:l,disabled:i=!1,isSubmitting:o,submitText:d="Save"}=e,c=o||i||!a&&void 0!==a;return(0,n.jsxs)("div",{className:["flex w-full items-center gap-2",l?"justify-between":"justify-end"].join(" "),"data-sentry-component":"FormActions","data-sentry-source-file":"FormActions.tsx",children:[l&&(0,n.jsx)("span",{className:"text-sm text-foreground-lighter",children:l}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(s.$,{disabled:c,type:"default",htmlType:"reset",onClick:()=>r(),"data-sentry-element":"Button","data-sentry-source-file":"FormActions.tsx",children:"Cancel"}),(0,n.jsx)(s.$,{form:t,type:"primary",htmlType:"submit",disabled:c,loading:o,"data-sentry-element":"Button","data-sentry-source-file":"FormActions.tsx",children:d})]})]})}},46583:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>ax});var n=a(80263),s=a(53239),r=a(90478),l=a(92882),i=a(33233),o=a(97600),d=a(23385),c=a(51500),u=a(60045),m=a(98969),p=a(75019),x=a(22955);let h=()=>{let{isSuccess:e,can:t}=(0,p.hl)(u.aG.BILLING_READ,"stripe.subscriptions");return(0,n.jsxs)(l.gu,{"data-sentry-element":"ScaffoldSection","data-sentry-component":"InvoicesSection","data-sentry-source-file":"InvoicesSection.tsx",children:[(0,n.jsx)(l.xp,{"data-sentry-element":"ScaffoldSectionDetail","data-sentry-source-file":"InvoicesSection.tsx",children:(0,n.jsxs)("div",{className:"sticky space-y-2 top-12 pr-6",children:[(0,n.jsx)("p",{className:"text-foreground text-base m-0",children:"Past Invoices"}),(0,n.jsx)("p",{className:"prose text-sm",children:"You get an invoice every time you change your plan or when your monthly billing cycle resets."})]})}),(0,n.jsx)(l.Rf,{"data-sentry-element":"ScaffoldSectionContent","data-sentry-source-file":"InvoicesSection.tsx",children:e&&!t?(0,n.jsx)(m.A,{resourceText:"view this organization's upcoming invoice"}):(0,n.jsx)(x.A,{})})]})};var g=a(53434),f=a.n(g),y=a(15601),v=a.n(y),j=a(20313),b=a(90437),N=a(95359),w=a(56947),C=a(65172),S=a(44192);async function _(e,t){let{orgSlug:a}=e;if(!a)throw Error("orgSlug is required");let{data:n,error:s}=await (0,C.Jt)("/platform/organizations/{slug}/billing/invoices/upcoming",{params:{path:{slug:a}},headers:{Version:"2"},signal:t});return s&&(0,C.H4)(s),n}let A=function(e){let{orgSlug:t}=e,{enabled:a=!0,...n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,w.I)(S.x.orgUpcomingPreview(t),e=>{let{signal:a}=e;return _({orgSlug:t},a)},{enabled:a&&void 0!==t,...n})};var M=a(34531),k=a(3434),I=a(15380),P=a(92978),E=a(35639);let F={[E.Lb.MONTHLY_ACTIVE_USERS]:"/docs/guides/platform/manage-your-usage/monthly-active-users",[E.Lb.MONTHLY_ACTIVE_SSO_USERS]:"/docs/guides/platform/manage-your-usage/monthly-active-users-sso",[E.Lb.MONTHLY_ACTIVE_THIRD_PARTY_USERS]:"/docs/guides/platform/manage-your-usage/monthly-active-users-third-party",[E.Lb.AUTH_MFA_PHONE]:"/docs/guides/platform/manage-your-usage/advanced-mfa-phone",[E.Lb.EGRESS]:"/docs/guides/platform/manage-your-usage/egress",[E.Lb.FUNCTION_INVOCATIONS]:"/docs/guides/platform/manage-your-usage/edge-function-invocations",[E.Lb.STORAGE_SIZE]:"/docs/guides/platform/manage-your-usage/storage-size",[E.Lb.STORAGE_IMAGES_TRANSFORMED]:"/docs/guides/platform/manage-your-usage/storage-image-transformations",[E.Lb.REALTIME_MESSAGE_COUNT]:"/docs/guides/platform/manage-your-usage/realtime-messages",[E.Lb.REALTIME_PEAK_CONNECTIONS]:"/docs/guides/platform/manage-your-usage/realtime-peak-connections",[E.Lb.CUSTOM_DOMAIN]:"/docs/guides/platform/manage-your-usage/custom-domains",[E.Lb.IPV4]:"/docs/guides/platform/manage-your-usage/ipv4",[E.Lb.PITR_7]:"/docs/guides/platform/manage-your-usage/point-in-time-recovery",[E.Lb.PITR_14]:"/docs/guides/platform/manage-your-usage/point-in-time-recovery",[E.Lb.PITR_28]:"/docs/guides/platform/manage-your-usage/point-in-time-recovery",[E.Lb.DISK_SIZE_GB_HOURS_GP3]:"/docs/guides/platform/manage-your-usage/disk-size",[E.Lb.DISK_SIZE_GB_HOURS_IO2]:"/docs/guides/platform/manage-your-usage/disk-size",[E.Lb.DISK_IOPS_GP3]:"/docs/guides/platform/manage-your-usage/disk-iops",[E.Lb.DISK_IOPS_IO2]:"/docs/guides/platform/manage-your-usage/disk-iops",[E.Lb.DISK_THROUGHPUT_GP3]:"/docs/guides/platform/manage-your-usage/disk-throughput",[E.Lb.LOG_DRAIN]:"/docs/guides/platform/manage-your-usage/log-drains"};function L(e){let{amountBeforeDiscount:t,amount:a}=e;return t&&a<t?(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{className:"text-foreground-light line-through mr-2",translate:"no",children:(0,M.vv)(t)}),(0,n.jsx)("span",{translate:"no",children:(0,M.vv)(a)})]}):(0,n.jsx)("span",{translate:"no",children:(0,M.vv)(a)})}function T(e){var t;let{computeItems:a,tooltip:s,title:r,computeCredits:l}=e,i=a.flatMap(e=>e.breakdown.map(t=>({...t,computeType:e.description,computeCosts:t.amount}))).sort((e,t)=>t.computeCosts-e.computeCosts),o=Math.max(0,a.reduce((e,t)=>e+t.amount_before_discount,0)),d=Math.max(0,a.reduce((e,t)=>{var a;return e+(null!=(a=t.amount)?a:0)},0)+(null!=(t=null==l?void 0:l.amount)?t:0));return a.length?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(k.Hj,{"data-sentry-element":"TableRow","data-sentry-source-file":"UpcomingInvoice.tsx",children:[(0,n.jsxs)(k.nA,{className:"!py-2 px-0 flex items-center gap-1","data-sentry-element":"TableCell","data-sentry-source-file":"UpcomingInvoice.tsx",children:[(0,n.jsx)("span",{children:r}),(0,n.jsx)(P.I,{className:"max-w-sm","data-sentry-element":"InfoTooltip","data-sentry-source-file":"UpcomingInvoice.tsx",children:s})]}),(0,n.jsx)(k.nA,{className:"text-right py-2 px-0","data-sentry-element":"TableCell","data-sentry-source-file":"UpcomingInvoice.tsx",children:(0,n.jsx)(L,{amount:d,amountBeforeDiscount:o,"data-sentry-element":"InvoiceLineItemAmount","data-sentry-source-file":"UpcomingInvoice.tsx"})})]}),i.map(e=>(0,n.jsxs)(k.Hj,{className:"text-foreground-light text-xs",children:[(0,n.jsxs)(k.nA,{className:"!py-2 px-0 pl-6",children:[e.project_name," (",e.computeType," - ",e.usage," Hours)"]}),(0,n.jsx)(k.nA,{className:"!py-2 px-0 text-right",translate:"no",children:(0,M.vv)(e.computeCosts)})]},e.project_ref)),l&&(0,n.jsxs)(k.Hj,{className:"text-foreground-light text-xs",children:[(0,n.jsx)(k.nA,{className:"!py-2 px-0 pl-6",children:"Compute Credits"}),(0,n.jsx)(k.nA,{className:"!py-2 px-0 text-right",translate:"no",children:(0,M.vv)(l.amount)})]})]}):null}let z=e=>{var t,a,s,r,l,i,o;let{slug:d}=e,{data:c,error:u,isLoading:m,isError:p,isSuccess:x}=A({orgSlug:d}),h=(null==c||null==(t=c.lines)?void 0:t.filter(e=>{var t,a;return(null==(t=e.description)?void 0:t.toLowerCase().includes("compute"))&&e.breakdown&&(null==(a=e.breakdown)?void 0:a.length)>0}))||[],g=null!=(l=null==c||null==(a=c.lines)?void 0:a.find(e=>e.description.startsWith("Compute Credits")))?l:null,f=null==c||null==(s=c.lines)?void 0:s.find(e=>{var t;return null==(t=e.description)?void 0:t.toLowerCase().includes("plan")}),y=h.filter(e=>{var t,a;return!(null==(t=e.metadata)?void 0:t.is_branch)&&!(null==(a=e.metadata)?void 0:a.is_read_replica)}),N=h.filter(e=>{var t;return null==(t=e.metadata)?void 0:t.is_branch}),w=h.filter(e=>{var t;return null==(t=e.metadata)?void 0:t.is_read_replica}),C=(null==c||null==(r=c.lines)?void 0:r.filter(e=>{var t,a;return!(null==(t=e.description)?void 0:t.toLowerCase().includes("compute"))&&!(null==(a=e.description)?void 0:a.toLowerCase().includes("plan"))}))||[];return(0,n.jsxs)(n.Fragment,{children:[m&&(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(b.A,{}),(0,n.jsx)(b.A,{className:"w-3/4"}),(0,n.jsx)(b.A,{className:"w-1/2"})]}),p&&(0,n.jsx)(j.A,{subject:"Failed to retrieve upcoming invoice",error:u}),x&&(0,n.jsx)("div",{children:(0,n.jsx)("div",{children:(0,n.jsxs)(k.XI,{className:"w-full text-sm",children:[(0,n.jsxs)(k.BF,{children:[(0,n.jsxs)(k.Hj,{children:[(0,n.jsx)(k.nA,{className:"!py-2 px-0",children:null==f?void 0:f.description}),(0,n.jsx)(k.nA,{className:"text-right py-2 px-0",children:null==f?"-":(0,n.jsx)(L,{amount:f.amount,amountBeforeDiscount:f.amount_before_discount})})]}),(0,n.jsx)(T,{computeItems:y,title:"Compute",computeCredits:g,tooltip:(0,n.jsxs)("p",{className:"prose text-xs",children:["The first project is covered by Compute Credits. Additional projects incur compute costs starting at ",(0,n.jsx)("span",{translate:"no",children:"$10"}),"/month, independent of activity. See"," ",(0,n.jsx)(v(),{href:"/docs/guides/platform/manage-your-usage/compute",target:"_blank",children:"docs"}),"."]})}),(0,n.jsx)(T,{title:"Replica Compute",computeItems:w,tooltip:(0,n.jsxs)("p",{className:"prose text-xs",children:["Each Read Replica is a dedicated database. You are charged for its resources: Compute, Disk Size, provisioned Disk IOPS, provisioned Disk Throughput, and IPv4. See"," ",(0,n.jsx)(v(),{href:"/docs/guides/platform/manage-your-usage/read-replicas",target:"_blank",children:"docs"}),"."]})}),N.length>0&&(0,n.jsxs)(k.Hj,{children:[(0,n.jsx)(k.nA,{className:"py-2 px-0",children:(0,n.jsxs)("div",{className:"flex items-center gap-1",children:[(0,n.jsx)("span",{children:"Branching"}),(0,n.jsxs)(P.I,{className:"max-w-sm",children:[(0,n.jsx)("ul",{className:"ml-6 list-disc",children:N.flatMap(e=>e.breakdown).map(e=>(0,n.jsxs)("li",{children:[e.project_name," (",e.usage," Hours)"]},"branching-breakdown-".concat(e.project_ref)))}),(0,n.jsxs)("p",{className:"mt-2",children:["See"," ",(0,n.jsx)(v(),{className:"underline",href:"https://supabase.com/docs/guides/platform/manage-your-usage/branching",target:"_blank",children:"docs"})," ","on how billing for Branching works."]})]})]})}),(0,n.jsx)(k.nA,{className:"text-right py-2 px-0",children:(0,n.jsx)(L,{amount:N.reduce((e,t)=>e+t.amount,0),amountBeforeDiscount:N.reduce((e,t)=>{var a;return e+(null!=(a=t.amount_before_discount)?a:0)},0)})})]}),C.map(e=>{var t;return(0,n.jsxs)(k.Hj,{children:[(0,n.jsx)(k.nA,{className:"py-2 px-0",children:(0,n.jsxs)("div",{className:"gap-1 flex items-center",children:[(0,n.jsx)("span",{children:null!=(t=e.description)?t:"Unknown"}),(e.breakdown&&e.breakdown.length>0||null!=e.usage_metric)&&(0,n.jsxs)(P.I,{className:"max-w-sm",children:[e.unit_price_desc&&(0,n.jsxs)("p",{className:"mb-2",translate:"no",children:["Pricing: ",e.unit_price_desc]}),e.breakdown&&e.breakdown.length>0&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("p",{children:["Projects using ",e.description,":"]}),(0,n.jsx)("ul",{className:"ml-6 list-disc",children:e.breakdown.map(t=>(0,n.jsxs)("li",{children:[(0,n.jsx)(v(),{className:"underline",href:"/project/".concat(t.project_ref),target:"_blank",children:t.project_name})," ",e.usage_metric&&(0,n.jsxs)("span",{children:["(",(0,I.pK)(e.usage_metric,t)," ",(0,I.mX)(e.usage_metric),")"]})]},"".concat(e.description,"-breakdown-").concat(t.project_ref)))})]}),e.usage_metric&&null!=F[e.usage_metric]&&(0,n.jsxs)("p",{className:"mt-2",children:["See"," ",(0,n.jsx)(v(),{className:"underline",href:F[e.usage_metric],target:"_blank",children:"docs"})," ","on how billing for ",e.description," works and"," ",(0,n.jsx)(v(),{className:"underline",href:"/organization/".concat(d,"/usage"),children:"usage page"})," ","for a detailed breakdown."]})]})]})}),(0,n.jsx)(k.nA,{className:"text-right py-2 px-0",children:(0,n.jsx)(L,{amount:e.amount,amountBeforeDiscount:e.amount_before_discount})})]},e.description)})]}),(0,n.jsxs)(k.Gg,{children:[(0,n.jsxs)(k.Hj,{children:[(0,n.jsxs)(k.nA,{className:"font-medium py-2 px-0 flex items-center",children:[(0,n.jsx)("span",{className:"mr-2",children:"Current Costs"}),(0,n.jsx)(P.I,{children:"Costs accumulated from the beginning of the billing cycle up to now."})]}),(0,n.jsx)(k.nA,{className:"text-right font-medium py-2 px-0",translate:"no",children:null!=(i=(0,M.vv)(null==c?void 0:c.amount_total))?i:"-"})]}),(0,n.jsxs)(k.Hj,{children:[(0,n.jsxs)(k.nA,{className:"font-medium py-2 px-0 flex items-center",children:[(0,n.jsx)("span",{className:"mr-2",children:"Projected Costs"}),(0,n.jsx)(P.I,{className:"max-w-xs",children:"Projected costs at the end of the billing cycle. Includes predictable costs for Compute Hours, IPv4, Custom Domain and Point-In-Time-Recovery, but no costs for metrics like MAU, storage or function invocations. Final amounts may vary depending on your usage."})]}),(0,n.jsx)(k.nA,{className:"text-right font-medium py-2 px-0",translate:"no",children:null!=(o=(0,M.vv)(null==c?void 0:c.amount_projected))?o:"-"})]})]})]})})})]})},D=()=>{var e,t;let{slug:a}=(0,r.g)(),{isSuccess:s,can:d}=(0,p.hl)(u.aG.BILLING_READ,"stripe.subscriptions"),{data:c,error:x,isLoading:h,isError:g}=(0,i.j5)({orgSlug:a},{enabled:d}),y=(0,o.x)("billing:invoices"),w=f().unix(null!=(e=null==c?void 0:c.current_period_start)?e:0).utc(),C=f().unix(null!=(t=null==c?void 0:c.current_period_end)?t:0).utc(),S=C.diff(f()(),"days"),_=C.diff(w,"days");return(0,n.jsxs)(l.gu,{"data-sentry-element":"ScaffoldSection","data-sentry-component":"BillingBreakdown","data-sentry-source-file":"BillingBreakdown.tsx",children:[(0,n.jsx)(l.xp,{"data-sentry-element":"ScaffoldSectionDetail","data-sentry-source-file":"BillingBreakdown.tsx",children:(0,n.jsxs)("div",{className:"sticky space-y-2 top-12 pr-6",children:[(0,n.jsx)("p",{className:"text-foreground text-base m-0",children:"Upcoming Invoice"}),(0,n.jsx)("div",{className:"py-2",children:(0,n.jsx)(N.A,{type:"horizontal",value:_-S,max:_,barClass:"bg-foreground",labelBottom:"".concat(w.format("MMMM DD")," - ").concat(C.format("MMMM DD")),bgClass:"bg-surface-300",labelBottomClass:"!text-foreground-light p-1 m-0",labelTop:c?"".concat(S," ").concat(1===S?"day":"days"," left"):"",labelTopClass:"p-1 m-0","data-sentry-element":"SparkBar","data-sentry-source-file":"BillingBreakdown.tsx"})}),(0,n.jsxs)("p",{className:"prose text-sm",children:["Your upcoming invoice (excluding credits) will continue to update until the end of your billing cycle on ",C.format("MMMM DD"),". For a more detailed breakdown, visit the ",(0,n.jsx)(v(),{href:"/org/".concat(a,"/usage"),"data-sentry-element":"Link","data-sentry-source-file":"BillingBreakdown.tsx",children:"usage page."})]}),(0,n.jsx)("br",{}),(0,n.jsx)("p",{className:"text-sm text-foreground-light mt-4",children:"Add-on changes or new projects may take up to an hour to appear."})]})}),(0,n.jsx)(l.Rf,{"data-sentry-element":"ScaffoldSectionContent","data-sentry-source-file":"BillingBreakdown.tsx",children:s&&!d?(0,n.jsx)(m.A,{resourceText:"view this organization's upcoming invoice"}):(0,n.jsxs)(n.Fragment,{children:[h&&(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(b.A,{}),(0,n.jsx)(b.A,{className:"w-3/4"}),(0,n.jsx)(b.A,{className:"w-1/2"})]}),g&&(0,n.jsx)(j.A,{subject:"Failed to retrieve subscription",error:x}),y&&(0,n.jsx)(z,{slug:a})]})})]})};var B=a(73969),R=a(11216),U=a(36366);async function O(e,t){let{slug:a}=e;if(!a)throw Error("slug is required");let{data:n,error:s}=await (0,C.Jt)("/platform/organizations/{slug}/customer",{params:{path:{slug:a}},signal:t});return s&&(0,C.H4)(s),n}let G=function(e){let{slug:t}=e,{enabled:a=!0,...n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=(0,p.SE)(u.aG.BILLING_READ,"stripe.customer");return(0,w.I)(U.O.customerProfile(t),e=>{let{signal:a}=e;return O({slug:t},a)},{enabled:a&&s&&void 0!==t,...n})};var H=a(32144),V=a(80251);async function q(e){let{slug:t,address:a,billing_name:n}=e;if(!t)return console.error("Slug is required");let{data:s,error:r}=await (0,C.yJ)("/platform/organizations/{slug}/customer",{params:{path:{slug:t}},body:{address:null!=a?a:void 0,billing_name:n}});if(r)throw(0,C.H4)(r);return s}let W=function(){let{onSuccess:e,onError:t,...a}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=(0,H.jE)();return(0,V.n)(e=>q(e),{async onSuccess(t,a,s){let{address:r,slug:l,billing_name:i}=a;n.setQueriesData(U.O.customerProfile(l),e=>e?{...e,billing_name:i,address:r}:e),await (null==e?void 0:e(t,a,s))},async onError(e,a,n){void 0===t?B.oR.error("Failed to update customer profile: ".concat(e.message)):t(e,a,n)},...a})};async function K(e,t){let{slug:a}=e;if(!a)throw Error("slug is required");let{data:n,error:s}=await (0,C.Jt)("/platform/organizations/{slug}/tax-ids",{params:{path:{slug:a}},signal:t});if(s)throw(0,C.H4)(s);return n.tax_id}let Y=function(e){let{slug:t}=e,{enabled:a=!0,...n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=(0,p.SE)(u.aG.BILLING_READ,"stripe.tax_ids");return(0,w.I)(U.O.taxId(t),e=>{let{signal:a}=e;return K({slug:t},a)},{enabled:a&&void 0!==t&&s,...n})};async function $(e){let{slug:t,taxId:a}=e;if(!t)throw Error("Slug is required");if(null!=a){let{data:e,error:n}=await (0,C.yJ)("/platform/organizations/{slug}/tax-ids",{params:{path:{slug:t}},body:{type:a.type,value:a.value,country:a.country}});return n&&(0,C.H4)(n),e}{let{data:e,error:a}=await (0,C.yH)("/platform/organizations/{slug}/tax-ids",{params:{path:{slug:t}},headers:{Version:"2"}});return a&&(0,C.H4)(a),e}}let J=function(){let{onSuccess:e,onError:t,...a}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=(0,H.jE)();return(0,V.n)(e=>$(e),{async onSuccess(t,a,s){let{slug:r}=a;n.setQueryData(U.O.taxId(r),t.tax_id),await (null==e?void 0:e(t,a,s))},async onError(e,a,n){void 0===t?B.oR.error("Failed to update tax id: ".concat(e.message)):t(e,a,n)},...a})};var Z=a(82228),Q=a(47452),X=a(40022),ee=a(96572),et=a(80903),ea=a(25643),en=a(39353),es=a(93210),er=a(9681),el=a(61965),ei=a(61395);let eo=[{code:"AF",name:"Afghanistan"},{code:"AL",name:"Albania"},{code:"DZ",name:"Algeria"},{code:"AS",name:"American Samoa"},{code:"AD",name:"Andorra"},{code:"AO",name:"Angola"},{code:"AI",name:"Anguilla"},{code:"AQ",name:"Antarctica"},{code:"AG",name:"Antigua and Barbuda"},{code:"AR",name:"Argentina"},{code:"AM",name:"Armenia"},{code:"AW",name:"Aruba"},{code:"AU",name:"Australia"},{code:"AT",name:"Austria"},{code:"AZ",name:"Azerbaijan"},{code:"BS",name:"Bahamas"},{code:"BH",name:"Bahrain"},{code:"BD",name:"Bangladesh"},{code:"BB",name:"Barbados"},{code:"BY",name:"Belarus"},{code:"BE",name:"Belgium"},{code:"BZ",name:"Belize"},{code:"BJ",name:"Benin"},{code:"BM",name:"Bermuda"},{code:"BT",name:"Bhutan"},{code:"BO",name:"Bolivia"},{code:"BA",name:"Bosnia and Herzegovina"},{code:"BW",name:"Botswana"},{code:"BV",name:"Bouvet Island"},{code:"BR",name:"Brazil"},{code:"IO",name:"British Indian Ocean Territory"},{code:"VG",name:"British Virgin Islands"},{code:"BN",name:"Brunei Darussalam"},{code:"BG",name:"Bulgaria"},{code:"BF",name:"Burkina Faso"},{code:"BI",name:"Burundi"},{code:"KH",name:"Cambodia"},{code:"CM",name:"Cameroon"},{code:"CA",name:"Canada"},{code:"CV",name:"Cape Verde"},{code:"KY",name:"Cayman Islands"},{code:"CF",name:"Central African Republic"},{code:"TD",name:"Chad"},{code:"CL",name:"Chile"},{code:"CN",name:"China"},{code:"CX",name:"Christmas Island"},{code:"CC",name:"Cocos (Keeling) Islands"},{code:"CO",name:"Colombia"},{code:"KM",name:"Comoros"},{code:"CG",name:"Congo"},{code:"CK",name:"Cook Islands"},{code:"CR",name:"Costa Rica"},{code:"HR",name:"Croatia"},{code:"CU",name:"Cuba"},{code:"CW",name:"Cura\xe7ao"},{code:"CY",name:"Cyprus"},{code:"CZ",name:"Czech Republic"},{code:"CI",name:"C\xf4te d'Ivoire"},{code:"DK",name:"Denmark"},{code:"DJ",name:"Djibouti"},{code:"DM",name:"Dominica"},{code:"DO",name:"Dominican Republic"},{code:"EC",name:"Ecuador"},{code:"EG",name:"Egypt"},{code:"SV",name:"El Salvador"},{code:"GQ",name:"Equatorial Guinea"},{code:"ER",name:"Eritrea"},{code:"EE",name:"Estonia"},{code:"SZ",name:"Eswatini"},{code:"ET",name:"Ethiopia"},{code:"FK",name:"Falkland Islands"},{code:"FO",name:"Faroe Islands"},{code:"FJ",name:"Fiji"},{code:"FI",name:"Finland"},{code:"FR",name:"France"},{code:"GF",name:"French Guiana"},{code:"PF",name:"French Polynesia"},{code:"TF",name:"French Southern Territories"},{code:"GA",name:"Gabon"},{code:"GM",name:"Gambia"},{code:"GE",name:"Georgia"},{code:"DE",name:"Germany"},{code:"GH",name:"Ghana"},{code:"GI",name:"Gibraltar"},{code:"GR",name:"Greece"},{code:"GL",name:"Greenland"},{code:"GD",name:"Grenada"},{code:"GP",name:"Guadeloupe"},{code:"GU",name:"Guam"},{code:"GT",name:"Guatemala"},{code:"GG",name:"Guernsey"},{code:"GN",name:"Guinea"},{code:"GW",name:"Guinea-Bissau"},{code:"GY",name:"Guyana"},{code:"HT",name:"Haiti"},{code:"HM",name:"Heard & McDonald Islands"},{code:"HN",name:"Honduras"},{code:"HK",name:"Hong Kong"},{code:"HU",name:"Hungary"},{code:"IS",name:"Iceland"},{code:"IN",name:"India"},{code:"ID",name:"Indonesia"},{code:"IR",name:"Iran"},{code:"IQ",name:"Iraq"},{code:"IE",name:"Ireland"},{code:"IM",name:"Isle of Man"},{code:"IL",name:"Israel"},{code:"IT",name:"Italy"},{code:"JM",name:"Jamaica"},{code:"JP",name:"Japan"},{code:"JE",name:"Jersey"},{code:"JO",name:"Jordan"},{code:"KZ",name:"Kazakhstan"},{code:"KE",name:"Kenya"},{code:"KI",name:"Kiribati"},{code:"KW",name:"Kuwait"},{code:"KG",name:"Kyrgyzstan"},{code:"LA",name:"Laos"},{code:"LV",name:"Latvia"},{code:"LB",name:"Lebanon"},{code:"LS",name:"Lesotho"},{code:"LR",name:"Liberia"},{code:"LY",name:"Libya"},{code:"LI",name:"Liechtenstein"},{code:"LT",name:"Lithuania"},{code:"LU",name:"Luxembourg"},{code:"MO",name:"Macao"},{code:"MG",name:"Madagascar"},{code:"MW",name:"Malawi"},{code:"MY",name:"Malaysia"},{code:"MV",name:"Maldives"},{code:"ML",name:"Mali"},{code:"MT",name:"Malta"},{code:"MH",name:"Marshall Islands"},{code:"MQ",name:"Martinique"},{code:"MR",name:"Mauritania"},{code:"MU",name:"Mauritius"},{code:"YT",name:"Mayotte"},{code:"MX",name:"Mexico"},{code:"FM",name:"Micronesia"},{code:"MD",name:"Moldova"},{code:"MC",name:"Monaco"},{code:"MN",name:"Mongolia"},{code:"ME",name:"Montenegro"},{code:"MS",name:"Montserrat"},{code:"MA",name:"Morocco"},{code:"MZ",name:"Mozambique"},{code:"MM",name:"Myanmar"},{code:"NA",name:"Namibia"},{code:"NR",name:"Nauru"},{code:"NP",name:"Nepal"},{code:"NL",name:"Netherlands"},{code:"NC",name:"New Caledonia"},{code:"NZ",name:"New Zealand"},{code:"NI",name:"Nicaragua"},{code:"NE",name:"Niger"},{code:"NG",name:"Nigeria"},{code:"NU",name:"Niue"},{code:"NF",name:"Norfolk Island"},{code:"KP",name:"North Korea"},{code:"MK",name:"North Macedonia"},{code:"MP",name:"Northern Mariana Islands"},{code:"NO",name:"Norway"},{code:"OM",name:"Oman"},{code:"PK",name:"Pakistan"},{code:"PW",name:"Palau"},{code:"PS",name:"Palestinian Territories"},{code:"PA",name:"Panama"},{code:"PG",name:"Papua New Guinea"},{code:"PY",name:"Paraguay"},{code:"PE",name:"Peru"},{code:"PH",name:"Philippines"},{code:"PN",name:"Pitcairn Islands"},{code:"PL",name:"Poland"},{code:"PT",name:"Portugal"},{code:"PR",name:"Puerto Rico"},{code:"QA",name:"Qatar"},{code:"RO",name:"Romania"},{code:"RU",name:"Russia"},{code:"RW",name:"Rwanda"},{code:"RE",name:"R\xe9union"},{code:"BL",name:"Saint Barth\xe9lemy"},{code:"WS",name:"Samoa"},{code:"SM",name:"San Marino"},{code:"ST",name:"Sao Tome and Principe"},{code:"SA",name:"Saudi Arabia"},{code:"SN",name:"Senegal"},{code:"RS",name:"Serbia"},{code:"SC",name:"Seychelles"},{code:"SL",name:"Sierra Leone"},{code:"SG",name:"Singapore"},{code:"SX",name:"Sint Maarten"},{code:"SK",name:"Slovakia"},{code:"SI",name:"Slovenia"},{code:"SB",name:"Solomon Islands"},{code:"SO",name:"Somalia"},{code:"ZA",name:"South Africa"},{code:"GS",name:"South Georgia and the South Sandwich Islands"},{code:"KR",name:"South Korea"},{code:"SS",name:"South Sudan"},{code:"ES",name:"Spain"},{code:"LK",name:"Sri Lanka"},{code:"SH",name:"St Helena"},{code:"KN",name:"St Kitts and Nevis"},{code:"LC",name:"St Lucia"},{code:"MF",name:"St Martin"},{code:"PM",name:"St Pierre and Miquelon"},{code:"VC",name:"St Vincent and the Grenadines"},{code:"SD",name:"Sudan"},{code:"SR",name:"Suriname"},{code:"SJ",name:"Svalbard & Jan Mayen"},{code:"SE",name:"Sweden"},{code:"CH",name:"Switzerland"},{code:"SY",name:"Syria"},{code:"TW",name:"Taiwan"},{code:"TJ",name:"Tajikistan"},{code:"TZ",name:"Tanzania"},{code:"TH",name:"Thailand"},{code:"TL",name:"Timor-Leste"},{code:"TG",name:"Togo"},{code:"TK",name:"Tokelau"},{code:"TO",name:"Tonga"},{code:"TT",name:"Trinidad & Tobago"},{code:"TN",name:"Tunisia"},{code:"TR",name:"Turkey"},{code:"TM",name:"Turkmenistan"},{code:"TC",name:"Turks & Caicos Islands"},{code:"TV",name:"Tuvalu"},{code:"VI",name:"US Virgin Islands"},{code:"UG",name:"Uganda"},{code:"UA",name:"Ukraine"},{code:"AE",name:"United Arab Emirates"},{code:"GB",name:"United Kingdom"},{code:"US",name:"United States of America"},{code:"UY",name:"Uruguay"},{code:"UZ",name:"Uzbekistan"},{code:"VU",name:"Vanuatu"},{code:"VA",name:"Vatican City"},{code:"VE",name:"Venezuela"},{code:"VN",name:"Vietnam"},{code:"WF",name:"Wallis & Futuna"},{code:"EH",name:"Western Sahara"},{code:"YE",name:"Yemen"},{code:"ZM",name:"Zambia"},{code:"ZW",name:"Zimbabwe"},{code:"AX",name:"\xc5land Islands"}];var ed=a(68162);let ec=en.z.object({billing_name:en.z.string().min(3,"Name must be at least 3 letters long"),line1:en.z.string().optional(),line2:en.z.string().optional(),city:en.z.string().optional(),state:en.z.string().optional(),postal_code:en.z.string().optional(),country:en.z.string().optional(),tax_id_type:en.z.string(),tax_id_value:en.z.string(),tax_id_name:en.z.string()}).refine(e=>!(e.line1||e.line2||e.city||e.state||e.postal_code)||!!e.country&&!!e.line1,{message:"Country and Address line 1 are required if any other field is provided.",path:["line1"]}).refine(e=>!(e.line1&&!e.country),{message:"Please select a country",path:["country"]}).refine(e=>!(e.country&&!e.line1),{message:"Please provide an address line 1",path:["line1"]}),eu=e=>{let{form:t,disabled:a=!1,className:r}=e,[l,i]=(0,s.useState)(!1),[o,d]=(0,s.useState)(!1),u=e=>{let a=ed.X.find(t=>t.name===e);a&&(t.setValue("tax_id_type",a.type),t.setValue("tax_id_value",""),t.setValue("tax_id_name",e))},m=()=>{t.setValue("tax_id_name","",{shouldDirty:!0}),t.setValue("tax_id_type","",{shouldDirty:!0}),t.setValue("tax_id_value","",{shouldDirty:!0})},{tax_id_name:p,country:x}=t.watch(),h=ed.X.find(e=>e.name===p),g=(0,s.useMemo)(()=>ed.X.filter(e=>!x||e.countryIso2===x).sort((e,t)=>e.country.localeCompare(t.country)),[x]);return(0,n.jsxs)("div",{className:(0,c.cn)("flex flex-col space-y-4",r),"data-sentry-component":"BillingCustomerDataForm","data-sentry-source-file":"BillingCustomerDataForm.tsx",children:[(0,n.jsx)(Q.zB,{control:t.control,name:"billing_name",render:e=>{let{field:t}=e;return(0,n.jsxs)(ei.M,{hideMessage:!0,label:"Name",children:[(0,n.jsx)(Q.MJ,{children:(0,n.jsx)(es.p,{...t,disabled:a})}),(0,n.jsx)(Q.C5,{})]})},"data-sentry-element":"FormField","data-sentry-source-file":"BillingCustomerDataForm.tsx"}),(0,n.jsx)(Q.zB,{control:t.control,name:"line1",render:e=>{let{field:t}=e;return(0,n.jsxs)(ei.M,{hideMessage:!0,label:"Address line 1",children:[(0,n.jsx)(Q.MJ,{children:(0,n.jsx)(es.p,{...t,placeholder:"123 Main Street",disabled:a})}),(0,n.jsx)(Q.C5,{})]})},"data-sentry-element":"FormField","data-sentry-source-file":"BillingCustomerDataForm.tsx"}),(0,n.jsx)(Q.zB,{control:t.control,name:"line2",render:e=>{let{field:t}=e;return(0,n.jsxs)(ei.M,{hideMessage:!0,label:"Address line 2 (optional)",children:[(0,n.jsx)(Q.MJ,{children:(0,n.jsx)(es.p,{...t,placeholder:"Apartment, suite, unit, building, floor, etc.",disabled:a})}),(0,n.jsx)(Q.C5,{})]})},"data-sentry-element":"FormField","data-sentry-source-file":"BillingCustomerDataForm.tsx"}),(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,n.jsx)(Q.zB,{control:t.control,name:"country",render:e=>{var s;let{field:r}=e;return(0,n.jsxs)(ei.M,{hideMessage:!0,label:"Country",children:[(0,n.jsxs)(er.AM,{open:l,onOpenChange:i,children:[(0,n.jsx)(er.Wv,{asChild:!0,children:(0,n.jsx)(Q.MJ,{children:(0,n.jsx)(X.$,{type:"default",role:"combobox",size:"medium",disabled:a,className:(0,c.cn)("w-full justify-between h-[34px]",!r.value&&"text-muted"),iconRight:(0,n.jsx)(ee.A,{className:"ml-2 h-4 w-4 shrink-0 opacity-50",strokeWidth:1.5}),children:r.value&&(null==(s=eo.find(e=>e.code===r.value))?void 0:s.name)||"Select country"})})}),(0,n.jsx)(er.hl,{sameWidthAsTrigger:!0,className:"p-0",align:"start",children:(0,n.jsxs)(el.uB,{children:[(0,n.jsx)(el.G7,{placeholder:"Search country..."}),(0,n.jsxs)(el.oI,{children:[(0,n.jsx)(el.xL,{children:"No country found."}),(0,n.jsx)(el.L$,{children:eo.map(e=>(0,n.jsxs)(el.h_,{value:e.name,onSelect:()=>{t.setValue("country",e.code,{shouldDirty:!0,shouldTouch:!0,shouldValidate:!0}),i(!1)},children:[(0,n.jsx)(et.A,{className:(0,c.cn)("mr-2 h-4 w-4",r.value===e.code?"opacity-100":"opacity-0")}),e.name]},e.code))})]})]})})]}),(0,n.jsx)(Q.C5,{})]})},"data-sentry-element":"FormField","data-sentry-source-file":"BillingCustomerDataForm.tsx"}),(0,n.jsx)(Q.zB,{control:t.control,name:"postal_code",render:e=>{let{field:t}=e;return(0,n.jsxs)(ei.M,{hideMessage:!0,label:"Postal code",children:[(0,n.jsx)(Q.MJ,{children:(0,n.jsx)(es.p,{...t,placeholder:"12345",disabled:a})}),(0,n.jsx)(Q.C5,{})]})},"data-sentry-element":"FormField","data-sentry-source-file":"BillingCustomerDataForm.tsx"})]}),(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,n.jsx)(Q.zB,{control:t.control,name:"city",render:e=>{let{field:t}=e;return(0,n.jsxs)(ei.M,{hideMessage:!0,label:"City",children:[(0,n.jsx)(Q.MJ,{children:(0,n.jsx)(es.p,{...t,disabled:a})}),(0,n.jsx)(Q.C5,{})]})},"data-sentry-element":"FormField","data-sentry-source-file":"BillingCustomerDataForm.tsx"}),(0,n.jsx)(Q.zB,{control:t.control,name:"state",render:e=>{let{field:t}=e;return(0,n.jsxs)(ei.M,{hideMessage:!0,label:"State / Province",children:[(0,n.jsx)(Q.MJ,{children:(0,n.jsx)(es.p,{...t,disabled:a})}),(0,n.jsx)(Q.C5,{})]})},"data-sentry-element":"FormField","data-sentry-source-file":"BillingCustomerDataForm.tsx"})]}),(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-x-2 w-full items-end",children:[(0,n.jsx)(Q.zB,{name:"tax_id_name",control:t.control,render:e=>{let{field:t}=e;return(0,n.jsxs)(ei.M,{hideMessage:!0,layout:"vertical",label:"Tax ID",children:[(0,n.jsxs)(er.AM,{open:o,onOpenChange:d,children:[(0,n.jsx)(er.Wv,{asChild:!0,children:(0,n.jsx)(Q.MJ,{children:(0,n.jsx)(X.$,{type:"default",role:"combobox",size:"medium",disabled:a,className:(0,c.cn)("w-full justify-between h-[34px]",!h&&"text-muted"),iconRight:(0,n.jsx)(ee.A,{className:"ml-2 h-4 w-4 shrink-0 opacity-50",strokeWidth:1.5}),children:h?"".concat(h.country," - ").concat(h.name):"Select tax ID"})})}),(0,n.jsx)(er.hl,{sameWidthAsTrigger:!0,className:"p-0",align:"start",children:(0,n.jsxs)(el.uB,{children:[(0,n.jsx)(el.G7,{placeholder:"Search tax ID..."}),(0,n.jsxs)(el.oI,{children:[(0,n.jsx)(el.xL,{children:"No tax ID found."}),(0,n.jsx)(el.L$,{children:g.map(e=>(0,n.jsxs)(el.h_,{value:"".concat(e.country," - ").concat(e.name),onSelect:()=>{u(e.name),d(!1)},children:[(0,n.jsx)(et.A,{className:(0,c.cn)("mr-2 h-4 w-4",(null==h?void 0:h.name)===e.name?"opacity-100":"opacity-0")}),e.country," - ",e.name]},e.name))})]})]})})]}),(0,n.jsx)(Q.C5,{})]})},"data-sentry-element":"FormField","data-sentry-source-file":"BillingCustomerDataForm.tsx"}),h&&(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)(Q.zB,{name:"tax_id_value",control:t.control,render:e=>{let{field:t}=e;return(0,n.jsx)(ei.M,{hideMessage:!0,className:"w-full",children:(0,n.jsx)(Q.MJ,{children:(0,n.jsx)(es.p,{...t,placeholder:null==h?void 0:h.placeholder,disabled:a})})})}}),(0,n.jsx)(X.$,{type:"text",className:"px-1",icon:(0,n.jsx)(ea.A,{}),onClick:()=>m()})]})]})]})};var em=a(32981),ep=a(87494);let ex=e=>{let t=ed.X.find(t=>t.name===e.name),a=null==t?void 0:t.vatPrefix;return a&&!e.value.startsWith(a)?"".concat(a).concat(e.value):e.value},eh=()=>{let{slug:e}=(0,r.g)(),{data:t}=(0,d.s)(),{isSuccess:a,can:i}=(0,p.hl)(u.aG.BILLING_READ,"stripe.customer"),o=(0,p.SE)(u.aG.BILLING_WRITE,"stripe.customer"),{data:c,error:x,isLoading:h,isSuccess:g}=G({slug:e},{enabled:i}),{data:f,error:y,isLoading:v,isSuccess:N}=Y({slug:e}),w=(0,s.useMemo)(()=>{var e,t,a,n,s,r,l,i,o;return{city:null!=(l=null==c||null==(e=c.address)?void 0:e.city)?l:void 0,country:null==c||null==(t=c.address)?void 0:t.country,line1:null==c||null==(a=c.address)?void 0:a.line1,line2:null!=(i=null==c||null==(n=c.address)?void 0:n.line2)?i:void 0,postal_code:null!=(o=null==c||null==(s=c.address)?void 0:s.postal_code)?o:void 0,billing_name:null==c?void 0:c.billing_name,tax_id_type:null==f?void 0:f.type,tax_id_value:null==f?void 0:f.value,tax_id_name:f&&(null==(r=ed.X.find(e=>e.type===f.type&&e.countryIso2===f.country))?void 0:r.name)||""}},[c,f]),{mutateAsync:C}=W(),{mutateAsync:S}=J(),[_,A]=(0,s.useState)(!1),{form:M,handleSubmit:k,handleReset:I,isDirty:P}=function(e){let{initialCustomerData:t,onCustomerDataChange:a}=e,n=(0,ep.mN)({resolver:(0,em.u)(ec),defaultValues:{billing_name:(null==t?void 0:t.billing_name)||"",line1:(null==t?void 0:t.line1)||"",line2:(null==t?void 0:t.line2)||"",city:(null==t?void 0:t.city)||"",state:(null==t?void 0:t.state)||"",postal_code:(null==t?void 0:t.postal_code)||"",country:(null==t?void 0:t.country)||"",tax_id_type:(null==t?void 0:t.tax_id_type)||"",tax_id_value:(null==t?void 0:t.tax_id_value)||"",tax_id_name:(null==t?void 0:t.tax_id_name)||""}});(0,s.useEffect)(()=>{t&&n.reset({billing_name:t.billing_name||"",line1:t.line1||"",line2:t.line2||"",city:t.city||"",state:t.state||"",postal_code:t.postal_code||"",country:t.country||"",tax_id_type:(null==t?void 0:t.tax_id_type)||"",tax_id_value:(null==t?void 0:t.tax_id_value)||"",tax_id_name:(null==t?void 0:t.tax_id_name)||""})},[t]);let r=async e=>{var t,s;let r=Object.entries(e).reduce((e,t)=>{let[a,n]=t;return e[a]="string"==typeof n?n.trim():n,e},{}),l=r.line1?r:null,i=ed.X.find(t=>t.name===e.tax_id_name);a({address:l?{line1:r.line1,line2:r.line2,city:r.city,state:r.state,postal_code:r.postal_code,country:r.country}:void 0,billing_name:r.billing_name,tax_id:i&&(null==(t=e.tax_id_type)?void 0:t.length)&&(null==(s=e.tax_id_value)?void 0:s.length)?{type:e.tax_id_type,value:ex({value:e.tax_id_value,name:n.getValues().tax_id_name}),country:null==i?void 0:i.countryIso2}:null})};return{form:n,handleSubmit:r,handleReset:()=>{t?n.reset({billing_name:t.billing_name||"",line1:t.line1||"",line2:t.line2||"",city:t.city||"",state:t.state||"",postal_code:t.postal_code||"",country:t.country||"",tax_id_type:(null==t?void 0:t.tax_id_type)||"",tax_id_value:(null==t?void 0:t.tax_id_value)||"",tax_id_name:(null==t?void 0:t.tax_id_name)||""}):n.reset({line1:"",line2:"",city:"",state:"",postal_code:"",country:"",tax_id_type:"",tax_id_value:"",tax_id_name:""})},isDirty:n.formState.isDirty}}({initialCustomerData:w,onCustomerDataChange:async t=>{A(!0);try{await C({slug:e,address:t.address,billing_name:t.billing_name}),await S({slug:e,taxId:t.tax_id}),B.oR.success("Successfully updated billing data"),A(!1)}catch(e){B.oR.error("Failed updating billing data: ".concat(e.message)),A(!1)}}}),E=!P||!o||_;return(0,n.jsxs)(l.gu,{"data-sentry-element":"ScaffoldSection","data-sentry-component":"BillingCustomerData","data-sentry-source-file":"BillingCustomerData.tsx",children:[(0,n.jsx)(l.xp,{"data-sentry-element":"ScaffoldSectionDetail","data-sentry-source-file":"BillingCustomerData.tsx",children:(0,n.jsxs)("div",{className:"sticky space-y-2 top-12 pr-3",children:[(0,n.jsx)("p",{className:"text-foreground text-base m-0",children:"Billing Address & Tax ID"}),(0,n.jsx)("p",{className:"text-sm text-foreground-light m-0",children:"This will be reflected in every upcoming invoice, past invoices are not affected"})]})}),(0,n.jsx)(l.Rf,{"data-sentry-element":"ScaffoldSectionContent","data-sentry-source-file":"BillingCustomerData.tsx",children:(null==t?void 0:t.managed_by)!==void 0&&(null==t?void 0:t.managed_by)!=="supabase"?(0,n.jsx)(R.A,{partner:null==t?void 0:t.managed_by,resource:"Billing Addresses",cta:{installationId:null==t?void 0:t.partner_id}}):a&&!i?(0,n.jsx)(m.A,{resourceText:"view this organization's billing address"}):(0,n.jsxs)(n.Fragment,{children:[(h||v)&&(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(b.A,{}),(0,n.jsx)(b.A,{className:"w-3/4"}),(0,n.jsx)(b.A,{className:"w-1/2"})]}),(x||y)&&(0,n.jsx)(j.A,{subject:"Failed to retrieve organization customer profile",error:x||y}),g&&N&&(0,n.jsx)(Z.Zp,{children:(0,n.jsx)(Q.lV,{...M,children:(0,n.jsxs)("form",{onSubmit:M.handleSubmit(k),children:[(0,n.jsx)(eu,{className:"p-8",form:M,disabled:!o}),(0,n.jsxs)(Z.wL,{className:"border-t justify-end px-8",children:[!o&&(0,n.jsx)("span",{className:"text-sm text-foreground-lighter mr-auto",children:"You need additional permissions to manage this organization's billing address"}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(X.$,{type:"default",onClick:I,disabled:E,children:"Cancel"}),(0,n.jsx)(X.$,{type:"primary",htmlType:"submit",disabled:E,loading:_,children:"Save"})]})]})]})})})]})})]})};var eg=a(45412),ef=a(31695),ey=a(8756),ev=a(74567),ej=a(39412);let eb="org-billing-email",eN=en.z.object({billingEmail:en.z.string().email("Please provide a valid email address").optional(),additionalBillingEmails:en.z.string().email({message:"invalid_email"}).array().default([])}),ew=()=>{var e,t;let{slug:a}=(0,r.g)(),i=(0,d.a)(),{name:o,billing_email:c}=null!=i?i:{},x=(0,p.SE)(u.aG.UPDATE,"organizations"),{isSuccess:h,can:g}=(0,p.hl)(u.aG.BILLING_READ,"stripe.subscriptions"),{data:f,isLoading:y}=G({slug:a},{enabled:g}),v=(0,ep.mN)({resolver:(0,em.u)(eN),defaultValues:{billingEmail:null!=c?c:"",additionalBillingEmails:null!=(e=null==f?void 0:f.additional_emails)?e:[]}}),{additionalBillingEmails:j}=v.watch(),{errors:b}=v.formState,N=null!=(t=b.additionalBillingEmails)?t:[],{mutate:w,isLoading:C}=(0,ev.N)(),S=async e=>x?a?o?void w({slug:a,name:o,billing_email:e.billingEmail,additional_billing_emails:e.additionalBillingEmails},{onSuccess:()=>{B.oR.success("Successfully saved settings"),v.reset(e)}}):console.error("Organization name is required"):console.error("Slug is required"):B.oR.error("You do not have the required permissions to update this organization");return(0,s.useEffect)(()=>{if(f){var e;v.reset({billingEmail:null!=c?c:"",additionalBillingEmails:null!=(e=f.additional_emails)?e:[]})}},[f]),(0,n.jsxs)(l.gu,{"data-sentry-element":"ScaffoldSection","data-sentry-component":"BillingEmail","data-sentry-source-file":"BillingEmail.tsx",children:[(0,n.jsx)(l.xp,{"data-sentry-element":"ScaffoldSectionDetail","data-sentry-source-file":"BillingEmail.tsx",children:(0,n.jsxs)("div",{className:"sticky space-y-2 top-12",children:[(0,n.jsx)("p",{className:"text-foreground text-base m-0",children:"Email Recipient"}),(0,n.jsx)("p",{className:"text-sm text-foreground-light m-0",children:"All billing correspondence will go to this email"})]})}),(0,n.jsx)(l.Rf,{"data-sentry-element":"ScaffoldSectionContent","data-sentry-source-file":"BillingEmail.tsx",children:h&&!g?(0,n.jsx)(m.A,{resourceText:"view this organization's email recipients"}):(0,n.jsx)(Q.lV,{...v,children:(0,n.jsx)("form",{id:eb,onSubmit:v.handleSubmit(S),children:(0,n.jsx)(ef.lB,{footer:(0,n.jsx)("div",{className:"flex py-4 px-8",children:(0,n.jsx)(eg.I,{form:eb,isSubmitting:C,hasChanges:v.formState.isDirty,handleReset:v.reset,disabled:!x,helper:x?void 0:"You need additional permissions to update billing emails"})}),children:(0,n.jsx)(ey.y9,{children:(0,n.jsxs)(ey.DE,{fullWidth:!0,loading:y,children:[(0,n.jsx)(Q.zB,{control:v.control,name:"billingEmail",render:e=>{let{field:t}=e;return(0,n.jsxs)(ei.M,{label:"Email address",children:[(0,n.jsx)(Q.MJ,{children:(0,n.jsx)(es.p,{type:"email",...t,placeholder:"Email",disabled:!x})}),(0,n.jsx)(Q.C5,{})]})}}),(0,n.jsx)(Q.zB,{control:v.control,name:"additionalBillingEmails",render:e=>{let{field:t}=e;return(0,n.jsxs)(ei.M,{hideMessage:!0,label:(0,n.jsxs)("div",{className:"flex items-center gap-x-1",children:[(0,n.jsx)("span",{children:"Additional emails"}),(0,n.jsx)(P.I,{side:"bottom",children:"These email addresses will be CC'd in automated invoice or payment failure emails. Payment receipts will still only go to the primary billing address."})]}),children:[(0,n.jsx)(Q.MJ,{children:(0,n.jsxs)(ej.xf,{values:t.value,onValuesChange:t.onChange,children:[(0,n.jsx)(ej.hw,{deletableBadge:!0,showIcon:!1,mode:"inline-combobox",label:"Add additional recipients",badgeLimit:"wrap"}),(0,n.jsx)(ej.sD,{children:(0,n.jsx)(ej.DG,{creatable:!0})})]})}),Array.isArray(N)&&N.length>0&&(0,n.jsx)("div",{className:"flex flex-col gap-y-1 mt-2",children:N.map((e,t)=>(0,n.jsxs)("p",{className:"text-sm text-destructive",children:['"',j[t],'" is not a valid email address']},"email-error-".concat(t)))})]})}})]})})})})})})]})};var eC=a(23445),eS=a(796),e_=a(16426),eA=a.n(e_),eM=a(54660),ek=a(63492),eI=a(56028),eP=a(12532);let eE=(0,eI.BX)({panelKey:void 0,setPanelKey:e=>{eE.panelKey=e}}),eF=e=>(0,eP.s)(eE,e);var eL=a(2356),eT=a(94725),ez=a(87645),eD=a(32735),eB=a(7124);async function eR(e){let{slug:t,tier:a,paymentMethod:n,address:s,tax_id:r,billing_name:l}=e;if(!t)throw Error("slug is required");if(!a)throw Error("tier is required");let i={tier:a};void 0!==n&&(i.payment_method=n);let{error:o,data:d}=await (0,C.yJ)("/platform/organizations/{slug}/billing/subscription",{body:{payment_method:i.payment_method,tier:i.tier,address:null!=s?s:void 0,tax_id:null!=r?r:void 0,billing_name:l},params:{path:{slug:t}}});return o&&(0,C.H4)(o),d}let eU=function(){let{onSuccess:e,onError:t,...a}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=(0,H.jE)();return(0,V.n)(e=>eR(e),{async onSuccess(t,a,s){let{slug:r}=a;!t.pending_payment_intent_secret&&(await new Promise(e=>setTimeout(e,2e3)),await Promise.all([n.invalidateQueries(eB.s.orgSubscription(r)),n.invalidateQueries(eB.s.orgPlans(r)),n.invalidateQueries(eD.E.orgUsage(r)),n.invalidateQueries(S.x.orgUpcomingPreview(r)),n.invalidateQueries(U.O.detail(r)),n.invalidateQueries(U.O.list())]),a.paymentMethod&&n.setQueriesData(U.O.paymentMethods(r),e=>e?{...e,defaultPaymentMethodId:a.paymentMethod,data:e.data.map(e=>({...e,is_default:e.id===a.paymentMethod}))}:e)),await (null==e?void 0:e(t,a,s))},async onError(e,a,n){void 0===t?B.oR.error(e.message,{dismissible:!0,duration:1e4}):t(e,a,n)},...a})};var eO=a(28672),eG=a(24332),eH=a(60680),eV=a(95043);let eq=[{name:"Spend cap enabled",value:"on",imageUrl:"".concat(ek.o2,"/img/spend-cap-on.png"),imageUrlLight:"".concat(ek.o2,"/img/spend-cap-on--light.png")},{name:"Spend cap disabled",value:"off",imageUrl:"".concat(ek.o2,"/img/spend-cap-off.png"),imageUrlLight:"".concat(ek.o2,"/img/spend-cap-off--light.png")}],eW=()=>{var e;let{slug:t}=(0,r.g)(),{resolvedTheme:a}=(0,eS.D)(),[l,o]=(0,s.useState)(!1),[d,m]=(0,s.useState)(),x=(0,p.SE)(u.aG.BILLING_WRITE,"stripe.subscriptions"),h=eF(),g="costControl"===h.panelKey,f=()=>h.setPanelKey(void 0),{data:y,isLoading:j}=(0,i.j5)({orgSlug:t}),{mutate:b,isLoading:N}=eU({onSuccess:()=>{B.oR.success("Successfully ".concat(S?"enabled":"disabled"," spend cap")),f()},onError:e=>{B.oR.error("Failed to toggle spend cap: ".concat(e.message))}}),w=(null==y||null==(e=y.plan)?void 0:e.id)==="free",C=!(null==y?void 0:y.usage_billing_enabled),S=!C&&"on"===d,_=d!==(C?"on":"off");(0,s.useEffect)(()=>{g&&void 0!==y&&m(C?"on":"off")},[g,j,y,C]);let A=async()=>{if(!t)return console.error("Org slug is required");b({slug:t,tier:"on"===d?ek.V$.PRO:ek.V$.PAYG})};return(0,n.jsx)(eG.Ay,{size:"large",loading:j||N,disabled:w||j||!_||N||!x,visible:g,onCancel:f,onConfirm:A,header:(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsx)("h4",{children:"Spend cap"}),(0,n.jsx)(X.$,{asChild:!0,type:"default",icon:(0,n.jsx)(eC.A,{strokeWidth:1.5}),children:(0,n.jsx)(v(),{href:"https://supabase.com/docs/guides/platform/cost-control#spend-cap",target:"_blank",rel:"noreferrer",children:"About spend cap"})})]}),tooltip:x?void 0:"You do not have permission to update spend cap","data-sentry-element":"SidePanel","data-sentry-component":"SpendCapSidePanel","data-sentry-source-file":"SpendCapSidePanel.tsx",children:(0,n.jsx)(eG.Ay.Content,{"data-sentry-element":"unknown","data-sentry-source-file":"SpendCapSidePanel.tsx",children:(0,n.jsxs)("div",{className:"py-6 space-y-4",children:[(0,n.jsx)("p",{className:"text-sm",children:"Use the spend cap to manage project usage and costs, and control whether the project can exceed the included quota allowance of any billed line item in a billing cycle"}),(0,n.jsxs)(eH.Ay,{open:l,onOpenChange:o,"data-sentry-element":"Collapsible","data-sentry-source-file":"SpendCapSidePanel.tsx",children:[(0,n.jsx)(eH.Ay.Trigger,{asChild:!0,"data-sentry-element":"unknown","data-sentry-source-file":"SpendCapSidePanel.tsx",children:(0,n.jsxs)("div",{className:"flex items-center space-x-2 cursor-pointer",children:[(0,n.jsx)(eV.A,{strokeWidth:1.5,size:16,className:l?"rotate-90":"","data-sentry-element":"ChevronRight","data-sentry-source-file":"SpendCapSidePanel.tsx"}),(0,n.jsx)("p",{className:"text-sm text-foreground-light",children:"How are each resource charged after exceeding the included quota?"})]})}),(0,n.jsx)(eH.Ay.Content,{asChild:!0,"data-sentry-element":"unknown","data-sentry-source-file":"SpendCapSidePanel.tsx",children:(0,n.jsx)(ez.A,{className:"mt-4",head:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(ez.A.th,{children:(0,n.jsx)("p",{className:"text-xs",children:"Item"})}),(0,n.jsx)(ez.A.th,{children:(0,n.jsx)("p",{className:"text-xs",children:"Rate"})})]}),body:["database","auth","storage","realtime","edge_functions"].map(e=>{let t=eO.z[e],a=t.features.filter(e=>e.usage_based);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(ez.A.tr,{children:[(0,n.jsx)(ez.A.td,{children:(0,n.jsx)("p",{className:"text-xs text-foreground",children:t.title})}),(0,n.jsx)(ez.A.td,{children:null})]},e),a.map(e=>(0,n.jsxs)(ez.A.tr,{children:[(0,n.jsx)(ez.A.td,{children:(0,n.jsx)("p",{className:"text-xs pl-4",children:e.title})}),(0,n.jsx)(ez.A.td,{children:(0,n.jsx)("p",{className:"text-xs pl-4",children:e.plans.pro})})]},e.title))]})}),"data-sentry-element":"Table","data-sentry-source-file":"SpendCapSidePanel.tsx"})})]}),w&&(0,n.jsx)(eL.F,{withIcon:!0,variant:"info",title:"Toggling of the spend cap is only available on the Pro Plan",actions:(0,n.jsx)(X.$,{type:"default",onClick:()=>h.setPanelKey("subscriptionPlan"),children:"View available plans"}),children:"Upgrade your plan to disable the spend cap"}),(0,n.jsx)("div",{className:"!mt-8 pb-4",children:(0,n.jsx)("div",{className:"flex gap-3",children:eq.map(e=>{let t=d===e.value;return(0,n.jsxs)("div",{className:(0,c.cn)("col-span-4 group space-y-1",w&&"opacity-75"),onClick:()=>!w&&m(e.value),children:[(0,n.jsx)(eA(),{alt:"Spend Cap",className:(0,c.cn)("relative rounded-xl transition border bg-no-repeat bg-center bg-cover w-[160px] h-[96px]",t?"border-foreground":"border-foreground-muted opacity-50 group-hover:border-foreground-lighter group-hover:opacity-100",!w&&"cursor-pointer",!w&&!t&&"group-hover:border-foreground-light"),width:160,height:96,src:(null==a?void 0:a.includes("dark"))?e.imageUrl:e.imageUrlLight}),(0,n.jsx)("p",{className:(0,c.cn)("text-sm transition",!w&&"group-hover:text-foreground",t?"text-foreground":"text-foreground-light"),children:e.name})]},e.value)})})}),"on"===d?(0,n.jsx)(eL.F,{withIcon:!0,variant:"warning",title:"Your projects could become unresponsive or enter read only mode",children:"Exceeding the included quota allowance with spend cap enabled can cause your projects to become unresponsive or enter read only mode."}):(0,n.jsx)(eL.F,{withIcon:!0,variant:"info",title:"Charges apply for usage beyond included quota allowance",children:"Your projects will always remain responsive and active, and charges only apply when exceeding the included quota limit."}),_&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("p",{className:"text-sm",children:"on"===d?"Upon clicking confirm, spend cap will be enabled for your organization and you will no longer be charged any extra for usage.":"Upon clicking confirm, spend cap will be disabled for your organization and you will be charged for any usage beyond the included quota."}),(0,n.jsx)("p",{className:"text-sm",children:"Toggling spend cap triggers an invoice and there might be prorated charges for any usage beyond the Pro Plans quota during this billing cycle."})]})]})})})},eK=e=>{var t;let{}=e,{slug:a}=(0,r.g)(),{resolvedTheme:s}=(0,eS.D)(),{isSuccess:o,can:d}=(0,p.hl)(u.aG.BILLING_READ,"stripe.subscriptions"),c=eF(),x=(0,eM._P)("disableProjectCreationAndUpdate"),{data:h,error:g,isLoading:f,isSuccess:y,isError:N}=(0,i.j5)({orgSlug:a},{enabled:d}),w=null==h?void 0:h.plan,C=null!=(t=null==h?void 0:h.usage_billing_enabled)&&t,S=!x&&!["team","enterprise"].includes((null==w?void 0:w.id)||"");return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(l.gu,{"data-sentry-element":"ScaffoldSection","data-sentry-source-file":"CostControl.tsx",children:[(0,n.jsx)(l.xp,{"data-sentry-element":"ScaffoldSectionDetail","data-sentry-source-file":"CostControl.tsx",children:(0,n.jsxs)("div",{className:"sticky space-y-6 top-12",children:[(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)("p",{className:"text-foreground text-base m-0",children:"Cost Control"}),(0,n.jsxs)("p",{className:"text-sm text-foreground-light m-0",children:["Allow scaling beyond your plan's"," ",(0,n.jsx)(v(),{href:"/org/".concat(a,"/usage"),className:"text-green-900 transition hover:text-green-1000","data-sentry-element":"Link","data-sentry-source-file":"CostControl.tsx",children:"included quota"}),"."]})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)("p",{className:"text-sm text-foreground-light m-0",children:"More information"}),(0,n.jsx)("div",{children:(0,n.jsx)(v(),{href:"https://supabase.com/docs/guides/platform/cost-control#spend-cap",target:"_blank",rel:"noreferrer","data-sentry-element":"Link","data-sentry-source-file":"CostControl.tsx",children:(0,n.jsxs)("div",{className:"flex items-center space-x-2 opacity-50 hover:opacity-100 transition",children:[(0,n.jsx)("p",{className:"text-sm m-0",children:"Spend cap"}),(0,n.jsx)(eC.A,{size:16,strokeWidth:1.5,"data-sentry-element":"ExternalLink","data-sentry-source-file":"CostControl.tsx"})]})})})]})]})}),(0,n.jsx)(l.Rf,{"data-sentry-element":"ScaffoldSectionContent","data-sentry-source-file":"CostControl.tsx",children:o&&!d?(0,n.jsx)(m.A,{resourceText:"update this organization's cost control"}):(0,n.jsxs)(n.Fragment,{children:[f&&(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(b.A,{}),(0,n.jsx)(b.A,{className:"w-3/4"}),(0,n.jsx)(b.A,{className:"w-1/2"})]}),N&&(0,n.jsx)(j.A,{subject:"Failed to retrieve subscription",error:g}),y&&(0,n.jsxs)("div",{className:"space-y-6",children:[["team","enterprise"].includes((null==w?void 0:w.id)||"")?(0,n.jsxs)(eL.F,{withIcon:!0,variant:"info",title:"You will be charged for any additional usage on the ".concat((null==w?void 0:w.name)||""," plan"),children:[(null==w?void 0:w.name)||""," plan requires you to have spend cap off at all times. Your projects will never become unresponsive. Only when your"," ",(0,n.jsx)(v(),{href:"/org/".concat(a,"/usage"),className:"text-green-900 transition hover:text-green-1000",children:"included usage"})," ","is exceeded will you be charged for any additional usage."]}):(0,n.jsx)("p",{className:"text-sm text-foreground-light",children:"If you need to go beyond the included quota, simply switch off your spend cap to pay for additional usage."}),(0,n.jsxs)("div",{className:"flex flex-col md:flex-row gap-6",children:[(0,n.jsx)("div",{children:(0,n.jsx)("div",{className:"rounded-md bg-surface-200 w-[160px] h-[96px] shadow",children:(0,n.jsx)(eA(),{alt:"Spend Cap",width:160,height:96,src:C?"".concat(ek.o2,"/img/spend-cap-off").concat((null==s?void 0:s.includes("dark"))?"":"--light",".png?v=3"):"".concat(ek.o2,"/img/spend-cap-on").concat((null==s?void 0:s.includes("dark"))?"":"--light",".png?v=3")})})}),(0,n.jsxs)("div",{children:[(0,n.jsxs)("p",{className:"mb-1",children:["Spend cap is ",C?"disabled":"enabled"]}),(0,n.jsx)("p",{className:"text-sm text-foreground-light",children:C?(0,n.jsx)("span",{children:"You will be charged for usage beyond the included quota."}):(0,n.jsx)("span",{children:"You won't be charged any extra for usage. However, your projects could become unresponsive or enter read only mode if you exceed the included quota."})}),(0,n.jsx)(eT.A,{projectUpdateDisabled:x,children:(0,n.jsx)(X.$,{type:"default",className:"mt-4 pointer-events-auto",disabled:!S,onClick:()=>c.setPanelKey("costControl"),children:"Change spend cap"})})]})]})]})]})})]}),(0,n.jsx)(eW,{"data-sentry-element":"SpendCapSidePanel","data-sentry-source-file":"CostControl.tsx"})]})};var eY=a(36393),e$=a(99265),eJ=a(91419),eZ=a(87610),eQ=a(54753),eX=a(88602);async function e0(e){let{payment_method_id:t,amount:a,slug:n,hcaptchaToken:s,address:r,tax_id:l,billing_name:i}=e;if(!t)throw Error("Payment method id required");if(!s)throw Error("Captcha not submitted");if(!n)throw Error("Slug is required");let{data:o,error:d}=await (0,C.bE)("/platform/organizations/{slug}/billing/credits/top-up",{params:{path:{slug:n}},body:{payment_method_id:t,amount:a,hcaptcha_token:s,address:null!=r?r:void 0,tax_id:null!=l?l:void 0,billing_name:null!=i?i:void 0}});return d&&(0,C.H4)(d),o}let e2=function(){let{onSuccess:e,onError:t,...a}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,V.n)(e=>e0(e),{async onSuccess(t,a,n){await (null==e?void 0:e(t,a,n))},async onError(e,a,n){void 0===t?B.oR.error("Failed to top up credits: ".concat(e.message)):t(e,a,n)},...a})};var e1=a(16838),e4=a(1012);async function e3(e,t){let{slug:a}=e;if(!a)throw Error("slug is required");let{data:n,error:s}=await (0,C.Jt)("/platform/organizations/{slug}/payments",{params:{path:{slug:a}},headers:{Version:"2"},signal:t});return s&&(0,C.H4)(s),n}let e5=function(e){let{slug:t}=e,{enabled:a=!0,...n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=(0,p.SE)(u.aG.BILLING_READ,"stripe.payment_methods");return(0,w.I)(U.O.paymentMethods(t),e=>{let{signal:a}=e;return e3({slug:t},a)},{enabled:a&&void 0!==t&&s,...n})};var e6=a(91194),e8=a(3689),e9=a(26860),e7=a(74245);async function te(e){let{slug:t,hcaptchaToken:a}=e,{data:n,error:s}=await (0,C.bE)("/platform/organizations/{slug}/payments/setup-intent",{params:{path:{slug:t}},body:{hcaptchaToken:a}});return s&&(0,C.H4)(s),n}let tt=function(){let{onSuccess:e,onError:t,...a}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,V.n)(e=>te(e),{async onSuccess(t,a,n){await (null==e?void 0:e(t,a,n))},async onError(e,a,n){void 0===t?B.oR.error("Failed to setup intent: ".concat(e.message)):t(e,a,n)},...a})};var ta=a(70792),tn=a(30172),ts=a(27799);let tr=(0,eJ.c)(ek.WS),tl=(0,s.forwardRef)(function(e,t){var a;let{selectedPaymentMethod:l,onSelectPaymentMethod:i,layout:o="vertical",readOnly:c}=e,{slug:u}=(0,r.g)(),{data:m}=(0,d.s)(),[p,x]=(0,s.useState)(null),[h,g]=(0,s.useState)(null),[f,y]=(0,s.useState)(void 0),[v,j]=(0,s.useState)(!0),{resolvedTheme:b}=(0,eS.D)(),N=(0,s.useRef)(null),[w,C]=(0,s.useState)(null),{data:S,isLoading:_}=G({slug:u}),{data:A,isLoading:M}=Y({slug:u}),k=(0,eM._P)("hidePaymentMethodsWithoutAddress"),{data:I,isLoading:P}=e5({slug:u}),E=(0,s.useMemo)(()=>I?{data:I.data.filter(e=>!k||e.has_address),defaultPaymentMethodId:I.data.some(e=>e.id===I.defaultPaymentMethodId)?I.defaultPaymentMethodId:null}:{data:[],defaultPaymentMethodId:null},[I]),F=(0,s.useCallback)(e=>{g(e)},[]),{mutate:L,isLoading:T}=tt({onSuccess:e=>{y(e)},onError:e=>{B.oR.error("Failed to setup intent: ".concat(e.message))}});(0,s.useEffect)(()=>{(null==E?void 0:E.data)&&0===E.data.length&&null==w&&C(!0)},[E]),(0,s.useEffect)(()=>{let e=async e=>{let t=null==m?void 0:m.slug;return t?e?void(y(void 0),L({slug:t,hcaptchaToken:e})):console.error("HCaptcha token required"):console.error("Slug is required")};(async()=>{if(w&&h){let a=p;try{if(!a){var t;let e=await h.execute({async:!0});a=null!=(t=null==e?void 0:e.response)?t:null}}catch(e){return}await e(null!=a?a:void 0),z()}})()},[h,w]);let z=()=>{x(null),null==h||h.resetCaptcha()},D=(0,s.useMemo)(()=>({clientSecret:f?f.client_secret:"",appearance:(0,ta.D)(b),paymentMethodCreation:"manual"}),[f,b]);(0,s.useEffect)(()=>{if((null==E?void 0:E.data)&&E.data.length>0){let e=E.data.some(e=>e.id===l);if(!l||!e){let e=E.data.find(e=>e.is_default);void 0!==e?i(e.id):i(E.data[0].id)}}},[l,E,i]);let R=async()=>{var e,t;if(!w&&(null==E||!E.data||0!==E.data.length))return{paymentMethod:{id:l},customerName:v?(null==S?void 0:S.billing_name)||"":null,address:v&&null!=(t=null==S?void 0:S.address)?t:null,taxId:v&&null!=A?A:null};{let t=await (null==(e=N.current)?void 0:e.createPaymentMethod());return t?{paymentMethod:t.paymentMethod,customerName:v?t.customerName:null,address:v?t.address:null,taxId:v?t.taxId:null}:t}};return(0,s.useImperativeHandle)(t,()=>({createPaymentMethod:R})),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(eY.A,{ref:F,sitekey:"4ca1fdb9-c9c9-4495-ba50-c85fc0e7ec1f",size:"invisible",onOpen:()=>{void 0!==document&&document.body.classList.add("!pointer-events-auto")},onClose:()=>{y(void 0),void 0!==document&&document.body.classList.remove("!pointer-events-auto")},onVerify:e=>{x(e),void 0!==document&&document.body.classList.remove("!pointer-events-auto")},onExpire:()=>{x(null)}}),(0,n.jsxs)("div",{children:[P?(0,n.jsxs)("div",{className:"flex items-center px-4 py-2 space-x-4 border rounded-md border-strong bg-surface-200",children:[(0,n.jsx)(e6.A,{className:"animate-spin",size:14}),(0,n.jsx)("p",{className:"text-sm text-foreground-light",children:"Retrieving payment methods"})]}):(null==E?void 0:E.data)&&(null==E?void 0:E.data.length)>0&&!w?(0,n.jsxs)(e9.A,{layout:o,label:"Payment method",value:l,onChange:i,className:"flex items-center",children:[null==E?void 0:E.data.map(e=>{let t="•••• •••• •••• ".concat(e.card.last4);return(0,n.jsx)(e9.A.Option,{label:t,value:e.id,addOnBefore:()=>(0,n.jsx)("img",{alt:"Credit Card Brand",src:"".concat(ek.o2,"/img/payment-methods/").concat(e.card.brand.replace(" ","-").toLowerCase(),".png"),width:"32"}),children:(0,n.jsx)("div",{children:t})},e.id)}),(0,n.jsxs)("div",{className:"flex items-center px-3 py-2 space-x-2 transition cursor-pointer group hover:bg-surface-300",onClick:()=>{C(!0)},children:[(0,n.jsx)(e8.A,{size:16}),(0,n.jsx)("p",{className:"transition text-foreground-light group-hover:text-foreground",children:"Add new payment method"})]})]}):null,tr&&f&&S&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(e$.Elements,{stripe:tr,options:D,children:(0,n.jsx)(tn.S,{ref:N,email:null!=(a=null==m?void 0:m.billing_email)?a:void 0,readOnly:c,customerName:null==S?void 0:S.billing_name,currentAddress:null==S?void 0:S.address,currentTaxId:A})}),(null==S?void 0:S.address)!=null&&(0,n.jsxs)("div",{className:"flex items-center space-x-2 mt-4",children:[(0,n.jsx)(e7.S,{id:"defaultBillingAddress",checked:v,onCheckedChange:()=>j(!v)}),(0,n.jsx)("label",{htmlFor:"defaultBillingAddress",className:"text-sm leading-none text-foreground-light",children:"Use address as my org's billing address"})]})]}),(T||_||M)&&(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(ts.A,{className:"h-10"}),(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,n.jsx)(ts.A,{className:"h-10"}),(0,n.jsx)(ts.A,{className:"h-10"})]}),(0,n.jsx)(ts.A,{className:"h-10"})]})]})]})});tl.displayName="PaymentMethodSelection";var ti=a(8427);let to=(0,eJ.c)(ek.WS),td=en.z.object({amount:en.z.coerce.number().gte(100,"Amount must be between $100 - $999.").lte(999,"Amount must be between $100 - $999.").int("Amount must be a whole number."),paymentMethod:en.z.string()}),tc=e=>{let{slug:t}=e,{resolvedTheme:a}=(0,eS.D)(),r=(0,H.jE)(),l=(0,s.useRef)(null),i=(0,p.SE)(u.aG.BILLING_WRITE,"stripe.subscriptions"),o=(0,p.Lh)(),{mutateAsync:d,isLoading:c,error:m}=e2({}),x=(0,ep.mN)({resolver:(0,em.u)(td),defaultValues:{amount:100,paymentMethod:""}}),[h,g]=(0,s.useState)(!1),[f,y]=(0,s.useState)(!1),[j,b]=(0,s.useState)(null),[N,w]=(0,s.useState)(null),C=(0,s.useCallback)(e=>{w(e)},[]),S=()=>{b(null),null==N||N.resetCaptcha()},_=async()=>{if(h&&N){let t=j;try{if(!t){var e;let a=await N.execute({async:!0});t=null!=(e=null==a?void 0:a.response)?e:null,b(t)}}catch(e){}return t}};(0,s.useEffect)(()=>{_()},[h,N]);let[A,M]=(0,s.useState)(""),[k,I]=(0,s.useState)(),P=async e=>{var a,n;let{amount:s,paymentMethod:r}=e;I(void 0);let i=await _(),o=await (null==(a=l.current)?void 0:a.createPaymentMethod());o&&await d({slug:t,amount:s,payment_method_id:o.paymentMethod.id,hcaptchaToken:i,address:o.address,tax_id:null!=(n=o.taxId)?n:void 0,billing_name:o.customerName},{onSuccess:e=>{"succeeded"===e.status?T():M(e.payment_intent_secret||""),S()}})},E=(0,s.useMemo)(()=>({clientSecret:A,appearance:(0,ta.D)(a)}),[A,a]),F=e=>{g(e),e||(w(null),I(void 0),M(""))},L=e=>{var t;M(""),I(e),(null==(t=e.paymentIntent)?void 0:t.status)==="succeeded"&&T()},T=async()=>{F(!1),await r.invalidateQueries(eB.s.orgSubscription(t)),B.oR.success("Successfully topped up balance. It may take a minute to reflect in your account.")};return(0,n.jsx)("div",{className:"flex items-center justify-end py-4 px-8","data-sentry-component":"CreditTopUp","data-sentry-source-file":"CreditTopUp.tsx",children:(0,n.jsxs)(e1.lG,{open:h,onOpenChange:e=>F(e),"data-sentry-element":"Dialog","data-sentry-source-file":"CreditTopUp.tsx",children:[(0,n.jsx)(e1.zM,{asChild:!0,"data-sentry-element":"DialogTrigger","data-sentry-source-file":"CreditTopUp.tsx",children:(0,n.jsx)(eX.G,{type:"default",className:"pointer-events-auto",disabled:!i||!o,tooltip:{content:{side:"bottom",text:o&&!i?"You need additional permissions to top up credits":void 0}},"data-sentry-element":"ButtonTooltip","data-sentry-source-file":"CreditTopUp.tsx",children:"Top Up"})}),(0,n.jsxs)(e1.Cf,{onInteractOutside:e=>e.preventDefault(),"data-sentry-element":"DialogContent","data-sentry-source-file":"CreditTopUp.tsx",children:[(0,n.jsx)(eY.A,{ref:C,sitekey:"4ca1fdb9-c9c9-4495-ba50-c85fc0e7ec1f",size:"invisible",onOpen:()=>{void 0!==document&&document.body.classList.add("!pointer-events-auto")},onClose:()=>{void 0!==document&&document.body.classList.remove("!pointer-events-auto")},onVerify:e=>{b(e),void 0!==document&&document.body.classList.remove("!pointer-events-auto")},onExpire:()=>{b(null)},"data-sentry-element":"HCaptcha","data-sentry-source-file":"CreditTopUp.tsx"}),(0,n.jsxs)(e1.c7,{"data-sentry-element":"DialogHeader","data-sentry-source-file":"CreditTopUp.tsx",children:[(0,n.jsx)(e1.L3,{"data-sentry-element":"DialogTitle","data-sentry-source-file":"CreditTopUp.tsx",children:"Top Up Credits"}),(0,n.jsxs)(e1.rr,{className:"space-y-2","data-sentry-element":"DialogDescription","data-sentry-source-file":"CreditTopUp.tsx",children:[(0,n.jsx)("p",{className:"prose text-sm",children:"On successful payment, an invoice will be issued and you'll be granted credits. Credits will be applied to outstanding and future invoices and are not refundable. The topped up credits do not expire."}),(0,n.jsxs)("p",{className:"prose text-sm",children:["For larger discounted credit packages, please"," ",(0,n.jsx)(v(),{href:"/support/new?slug=".concat(t,"&subject=").concat(encodeURIComponent("I would like to inquire about larger credit packages"),"&category=").concat(u.S.SALES_ENQUIRY),target:"_blank","data-sentry-element":"Link","data-sentry-source-file":"CreditTopUp.tsx",children:"reach out."})]})]})]}),(0,n.jsx)(e1.pf,{"data-sentry-element":"DialogSectionSeparator","data-sentry-source-file":"CreditTopUp.tsx"}),(0,n.jsx)(Q.lV,{...x,"data-sentry-element":"Form_Shadcn_","data-sentry-source-file":"CreditTopUp.tsx",children:(0,n.jsxs)("form",{id:"credit-top-up",onSubmit:x.handleSubmit(P),children:[(0,n.jsxs)(e1.OO,{className:"flex flex-col gap-2","data-sentry-element":"DialogSection","data-sentry-source-file":"CreditTopUp.tsx",children:[(0,n.jsx)(Q.zB,{control:x.control,name:"amount",render:e=>{let{field:t}=e;return(0,n.jsx)(ei.M,{label:"Amount (USD)",className:"gap-1",children:(0,n.jsx)(es.p,{...t,type:"number",placeholder:"100"})})},"data-sentry-element":"FormField_Shadcn_","data-sentry-source-file":"CreditTopUp.tsx"}),(0,n.jsx)(Q.zB,{control:x.control,name:"paymentMethod",render:()=>(0,n.jsx)(tl,{ref:l,onSelectPaymentMethod:e=>x.setValue("paymentMethod",e),selectedPaymentMethod:x.getValues("paymentMethod"),readOnly:c||f}),"data-sentry-element":"FormField_Shadcn_","data-sentry-source-file":"CreditTopUp.tsx"}),k&&k.error&&(0,n.jsxs)(e4.Fc,{variant:"destructive",children:[(0,n.jsx)(eZ.A,{className:"h-4 w-4"}),(0,n.jsx)(e4.XL,{children:"Error confirming payment"}),(0,n.jsx)(e4.TN,{children:k.error.message})]}),(null==k?void 0:k.paymentIntent)&&"processing"===k.paymentIntent.status&&(0,n.jsxs)(e4.Fc,{variant:"default",children:[(0,n.jsx)(eQ.A,{className:"h-4 w-4"}),(0,n.jsx)(e4.XL,{children:"Payment processing"}),(0,n.jsx)(e4.TN,{children:"Your payment is processing and we are waiting for a confirmation from your card issuer. If the payment goes through you'll automatically be credited. Please check back later."})]}),m&&(0,n.jsxs)(e4.Fc,{variant:"destructive",children:[(0,n.jsx)(eZ.A,{className:"h-4 w-4"}),(0,n.jsx)(e4.XL,{children:"Error topping up balance"}),(0,n.jsx)(e4.TN,{children:m.message})]})]}),!(null==k?void 0:k.paymentIntent)&&(0,n.jsx)(e1.Es,{children:(0,n.jsx)(X.$,{htmlType:"submit",type:"primary",loading:c||f,children:"Top Up"})})]})}),to&&A&&(0,n.jsx)(e$.Elements,{stripe:to,options:E,children:(0,n.jsx)(ti.i,{paymentIntentSecret:A,onPaymentIntentConfirm:e=>L(e),onLoadingChange:e=>y(e)})})]})]})})},tu=()=>{var e;let{slug:t}=(0,r.g)(),{isSuccess:a,can:s}=(0,p.hl)(u.aG.BILLING_READ,"stripe.subscriptions"),{data:o,error:d,isLoading:c,isError:x,isSuccess:h}=(0,i.j5)({orgSlug:t},{enabled:s}),g=(null!=(e=null==o?void 0:o.customer_balance)?e:0)/100,f=g<0,y=g>0,v=f&&0!==g?g.toFixed(2).toString().replace("-",""):g.toFixed(2);return(0,n.jsxs)(l.gu,{"data-sentry-element":"ScaffoldSection","data-sentry-component":"CreditBalance","data-sentry-source-file":"CreditBalance.tsx",children:[(0,n.jsx)(l.xp,{"data-sentry-element":"ScaffoldSectionDetail","data-sentry-source-file":"CreditBalance.tsx",children:(0,n.jsxs)("div",{className:"sticky space-y-2 top-12 pr-3",children:[(0,n.jsx)("div",{className:"flex items-center space-x-2",children:(0,n.jsx)("p",{className:"text-foreground text-base m-0",children:"Credit Balance"})}),(0,n.jsx)("p",{className:"text-sm text-foreground-light m-0",children:"Credits will be applied to future invoices, before charging your payment method. If your credit balance runs out, your default payment method will be charged."})]})}),(0,n.jsx)(l.Rf,{"data-sentry-element":"ScaffoldSectionContent","data-sentry-source-file":"CreditBalance.tsx",children:a&&!s?(0,n.jsx)(m.A,{resourceText:"view this organization's credits"}):(0,n.jsx)(ef.lB,{footer:(0,n.jsx)(tc,{slug:t}),children:(0,n.jsx)(ey.y9,{children:(0,n.jsxs)(ey.DE,{fullWidth:!0,loading:c,children:[x&&(0,n.jsx)(j.A,{subject:"Failed to retrieve organization customer profile",error:d}),h&&(0,n.jsxs)("div",{className:"flex w-full justify-between items-center",children:[(0,n.jsx)("span",{children:"Balance"}),(0,n.jsxs)("div",{className:"flex items-center space-x-1",children:[y&&(0,n.jsx)("h4",{className:"opacity-50",children:"-"}),(0,n.jsx)("h4",{className:"opacity-50",children:"$"}),(0,n.jsx)("h2",{className:"text-2xl relative",children:v}),f&&(0,n.jsx)("h4",{className:"opacity-50",children:"/credits"})]})]})]})})})})]})},tm=(0,a(15740).A)("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);var tp=a(67120);async function tx(e){let{slug:t,paymentMethodId:a}=e;if(!t)throw Error("Slug is required");let{data:n,error:s}=await (0,C.yJ)("/platform/organizations/{slug}/payments/default",{body:{payment_method_id:a},params:{path:{slug:t}}});if(s)throw(0,C.H4)(s);return n}let th=function(){let{onSuccess:e,onError:t,...a}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=(0,H.jE)();return(0,V.n)(e=>tx(e),{async onSuccess(t,a,s){let{slug:r,paymentMethodId:l}=a;n.setQueriesData(U.O.paymentMethods(r),e=>e?{...e,defaultPaymentMethodId:l,data:e.data.map(e=>({...e,is_default:e.id===l}))}:e),await (null==e?void 0:e(t,a,s))},async onError(e,a,n){void 0===t?B.oR.error("Failed to mark payment method as default: ".concat(e.message)):t(e,a,n)},...a})};var tg=a(84305),tf=a.n(tg),ty=a(19428);let tv=e=>{let{onCancel:t,onConfirm:a}=e,r=(0,d.a)(),{data:l,isLoading:i}=G({slug:null==r?void 0:r.slug}),[o,c]=(0,s.useState)(!1),[u,m]=(0,s.useState)(!0),[p,x]=(0,s.useState)(!0),h=(0,H.jE)(),{mutateAsync:g}=th(),{mutateAsync:f}=W(),{mutateAsync:y}=J(),{data:v,isLoading:j}=Y({slug:null==r?void 0:r.slug}),b=(0,s.useRef)(null),N=async e=>{var t,n;e.preventDefault(),c(!0),void 0!==document&&document.body.classList.add("!pointer-events-auto");let s=await (null==(t=b.current)?void 0:t.confirmSetup());if(s){if(u&&r&&"string"==typeof(null==(n=s.setupIntent)?void 0:n.payment_method))try{await g({slug:r.slug,paymentMethodId:s.setupIntent.payment_method}),await h.invalidateQueries(U.O.paymentMethods(r.slug)),h.setQueriesData(U.O.paymentMethods(r.slug),e=>e?{...e,defaultPaymentMethodId:s.setupIntent.payment_method,data:e.data.map(e=>({...e,is_default:e.id===s.setupIntent.payment_method}))}:e)}catch(e){B.oR.error("Failed to set payment method as default")}else r&&await h.invalidateQueries(U.O.paymentMethods(r.slug));if(p)try{s.address&&(!tf()(s.address,null==l?void 0:l.address)||(null==l?void 0:l.billing_name)!==s.customerName)&&await f({slug:null==r?void 0:r.slug,billing_name:s.customerName,address:s.address}),s.taxId&&!tf()(s.taxId,v)&&await y({taxId:s.taxId,slug:null==r?void 0:r.slug})}catch(e){B.oR.error("Failed to update billing address")}c(!1),a()}else c(!1);void 0!==document&&document.body.classList.remove("!pointer-events-auto")};return i||j?(0,n.jsx)(tp.A.Content,{children:(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(ts.A,{}),(0,n.jsx)(ts.A,{className:"w-3/4"}),(0,n.jsx)(ts.A,{className:"w-1/2"}),(0,n.jsx)(ts.A,{}),(0,n.jsx)(ts.A,{}),(0,n.jsx)(ts.A,{})]})}):(0,n.jsxs)("div",{"data-sentry-component":"AddPaymentMethodForm","data-sentry-source-file":"AddPaymentMethodForm.tsx",children:[(0,n.jsxs)(tp.A.Content,{className:"transition ".concat(o?"pointer-events-none opacity-75":"opacity-100"),"data-sentry-element":"unknown","data-sentry-source-file":"AddPaymentMethodForm.tsx",children:[(0,n.jsx)(tn.S,{readOnly:o,email:null==r?void 0:r.billing_email,currentAddress:null==l?void 0:l.address,customerName:null==l?void 0:l.billing_name,currentTaxId:v,ref:b,"data-sentry-element":"NewPaymentMethodElement","data-sentry-source-file":"AddPaymentMethodForm.tsx"}),(0,n.jsxs)("div",{className:"flex items-center gap-x-2 mt-4 mb-2",children:[(0,n.jsx)(e7.S,{id:"save-as-default",checked:u,onCheckedChange:e=>{"boolean"==typeof e&&m(e)},"data-sentry-element":"Checkbox_Shadcn_","data-sentry-source-file":"AddPaymentMethodForm.tsx"}),(0,n.jsx)(ty.J,{htmlFor:"save-as-default",className:"text-foreground-light","data-sentry-element":"Label_Shadcn_","data-sentry-source-file":"AddPaymentMethodForm.tsx",children:"Save as default payment method"})]}),(0,n.jsxs)("div",{className:"flex items-center gap-x-2 mt-4 mb-2",children:[(0,n.jsx)(e7.S,{id:"is-primary-billing-address",checked:p,onCheckedChange:e=>{"boolean"==typeof e&&x(e)},"data-sentry-element":"Checkbox_Shadcn_","data-sentry-source-file":"AddPaymentMethodForm.tsx"}),(0,n.jsx)(ty.J,{htmlFor:"is-primary-billing-address",className:"text-foreground-light","data-sentry-element":"Label_Shadcn_","data-sentry-source-file":"AddPaymentMethodForm.tsx",children:"Use the billing address as my organization's primary address"})]})]}),(0,n.jsx)(tp.A.Separator,{"data-sentry-element":"unknown","data-sentry-source-file":"AddPaymentMethodForm.tsx"}),(0,n.jsxs)(tp.A.Content,{className:"flex items-center space-x-2","data-sentry-element":"unknown","data-sentry-source-file":"AddPaymentMethodForm.tsx",children:[(0,n.jsx)(X.$,{htmlType:"button",size:"small",type:"default",onClick:t,block:!0,disabled:o,"data-sentry-element":"Button","data-sentry-source-file":"AddPaymentMethodForm.tsx",children:"Cancel"}),(0,n.jsx)(X.$,{block:!0,htmlType:"button",size:"small",type:"primary",loading:o,disabled:o,onClick:N,"data-sentry-element":"Button","data-sentry-source-file":"AddPaymentMethodForm.tsx",children:"Add payment method"})]})]})},tj=(0,eJ.c)(ek.WS),tb=e=>{let{visible:t,returnUrl:a,onCancel:r,onConfirm:l}=e,{resolvedTheme:i}=(0,eS.D)(),[o,c]=(0,s.useState)(),u=(0,d.a)(),[m,p]=(0,s.useState)(null),[x,h]=(0,s.useState)(null),{mutate:g}=tt({onSuccess:e=>{c(e)},onError:e=>{B.oR.error("Failed to setup intent: ".concat(e.message))}}),f=(0,s.useCallback)(e=>{h(e)},[]);(0,s.useEffect)(()=>{let e=async e=>{let t=null==u?void 0:u.slug;return t?e?void(c(void 0),g({slug:t,hcaptchaToken:e})):console.error("HCaptcha token required"):console.error("Slug is required")};(async()=>{if(t&&x){let t=m;try{if(!t){var a;let e=await x.execute({async:!0});t=null!=(a=null==e?void 0:e.response)?a:null}}catch(e){return}await e(null!=t?t:void 0),y()}})()},[t,x]);let y=()=>{p(null),null==x||x.resetCaptcha()},v={clientSecret:o?o.client_secret:"",appearance:(0,ta.D)(i)},j=()=>(c(void 0),r());return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(eY.A,{ref:f,sitekey:"4ca1fdb9-c9c9-4495-ba50-c85fc0e7ec1f",size:"invisible",onOpen:()=>{void 0!==document&&document.body.classList.add("!pointer-events-auto")},onClose:()=>{j(),void 0!==document&&document.body.classList.remove("!pointer-events-auto")},onVerify:e=>{p(e),void 0!==document&&document.body.classList.remove("!pointer-events-auto")},onExpire:()=>{p(null)},"data-sentry-element":"HCaptcha","data-sentry-source-file":"AddNewPaymentMethodModal.tsx"}),(0,n.jsx)(tp.A,{hideFooter:!0,size:"medium",visible:t&&void 0!==o,header:"Add new payment method",onCancel:j,className:"PAYMENT","data-sentry-element":"Modal","data-sentry-source-file":"AddNewPaymentMethodModal.tsx",children:(0,n.jsx)(e$.Elements,{stripe:tj,options:v,"data-sentry-element":"Elements","data-sentry-source-file":"AddNewPaymentMethodModal.tsx",children:(0,n.jsx)(tv,{returnUrl:a,onCancel:j,onConfirm:()=>(c(void 0),l()),"data-sentry-element":"AddPaymentMethodForm","data-sentry-source-file":"AddNewPaymentMethodModal.tsx"})})})]})},tN=e=>{var t,a;let{selectedPaymentMethod:s,onClose:l}=e,{slug:i}=(0,r.g)(),{mutate:o,isLoading:d}=th({onSuccess:()=>{B.oR.success("Successfully changed payment method to the card ending with ".concat(s.card.last4)),l()},onError:e=>{B.oR.error("Failed to change payment method: ".concat(e.message))}}),c=async()=>i?s?void o({slug:i,paymentMethodId:s.id}):console.error("Card ID is required"):console.error("Slug is required");return(0,n.jsx)(tp.A,{visible:void 0!==s,size:"medium",header:"Confirm to use payment method ending with ".concat(null==s||null==(t=s.card)?void 0:t.last4),onCancel:()=>l(),customFooter:(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(X.$,{type:"default",disabled:d,onClick:()=>l(),children:"Cancel"}),(0,n.jsx)(X.$,{type:"primary",disabled:d,loading:d,onClick:c,children:"Confirm"})]}),"data-sentry-element":"Modal","data-sentry-component":"ChangePaymentMethodModal","data-sentry-source-file":"ChangePaymentMethodModal.tsx",children:(0,n.jsx)(tp.A.Content,{"data-sentry-element":"unknown","data-sentry-source-file":"ChangePaymentMethodModal.tsx",children:(0,n.jsxs)("p",{className:"text-sm",children:["Upon clicking confirm, all future charges will be deducted from the card ending with"," ",null==s||null==(a=s.card)?void 0:a.last4,". There are no immediate charges."]})})})};var tw=a(54925),tC=a(64711),tS=a(2119),t_=a(71139);let tA=e=>{var t,a,s,r;let{paymentMethod:l,canUpdatePaymentMethods:i=!0,paymentMethodType:o,subscriptionPlan:d,paymentMethodCount:c,setSelectedMethodForUse:u,setSelectedMethodToDelete:m}=e,p=l.is_default,x=!l.is_default||"free"===d&&1===c,h=null!=(s=null==(t=l.card)?void 0:t.exp_year)?s:0,g=null!=(r=null==(a=l.card)?void 0:a.exp_month)?r:0,f=new Date().getMonth()+1,y=new Date().getFullYear();return l.card?(0,n.jsxs)("div",{className:"flex items-center justify-between gap-8","data-sentry-component":"CreditCard","data-sentry-source-file":"CreditCard.tsx",children:[(0,n.jsxs)("div",{className:"flex items-center gap-8",children:[(0,n.jsx)("img",{alt:"Credit card brand",src:"".concat(ek.o2,"/img/payment-methods/").concat(l.card.brand.replace(" ","-").toLowerCase(),".png"),width:"32"}),(0,n.jsxs)("p",{className:"prose text-sm font-mono",children:["**** **** **** ",l.card.last4]}),(0,n.jsxs)("p",{className:"text-sm tabular-nums",children:["Expires: ",l.card.exp_month,"/",l.card.exp_year]})]}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[h===y&&g===f&&(0,n.jsx)(tS.E,{variant:"warning",children:"Expiring soon"}),(h<y||h===y&&g<f)&&(0,n.jsx)(tS.E,{variant:"destructive",children:"Expired"}),p&&(0,n.jsx)(tS.E,{variant:"brand",children:"Active"}),i&&(0,n.jsxs)(t_.rI,{children:[(0,n.jsx)(t_.ty,{asChild:!0,children:(0,n.jsx)(X.$,{type:"outline",className:"hover:border-muted px-1",icon:(0,n.jsx)(tw.A,{}),"aria-label":"More options"})}),(0,n.jsxs)(t_.SQ,{align:"end",className:"w-36",children:["card"===o&&!p&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t_._2,{onClick:()=>null==u?void 0:u(l),children:(0,n.jsx)("p",{children:"Use this card"})},"make-default"),(0,n.jsx)(t_.mB,{})]}),(0,n.jsx)(tC.x,{disabled:!x,className:"!pointer-events-auto",onClick:()=>null==m?void 0:m(l),tooltip:{content:{side:"left",text:x?void 0:"Unable to delete a card that is currently active"}},children:(0,n.jsx)("p",{children:"Delete card"})},"delete-method")]})]})]})]},l.id):null};async function tM(e){let{slug:t,cardId:a}=e,{data:n,error:s}=await (0,C.yH)("/platform/organizations/{slug}/payments",{body:{card_id:a},params:{path:{slug:t}}});return s&&(0,C.H4)(s),n}let tk=function(){let{onSuccess:e,onError:t,...a}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=(0,H.jE)();return(0,V.n)(e=>tM(e),{async onSuccess(t,a,s){let{slug:r}=a;await n.invalidateQueries(U.O.paymentMethods(r)),await (null==e?void 0:e(t,a,s))},async onError(e,a,n){void 0===t?B.oR.error("Failed to delete payment method: ".concat(e.message)):t(e,a,n)},...a})};var tI=a(47142);let tP=e=>{var t;let{selectedPaymentMethod:a,onClose:s}=e,{slug:l}=(0,r.g)(),{mutate:i,isLoading:o}=tk({onSuccess:()=>{var e;B.oR.success("Successfully removed payment method ending with ".concat(null==a||null==(e=a.card)?void 0:e.last4)),s()}}),d=async()=>l?a?void i({slug:l,cardId:a.id}):console.error("Card ID is required"):console.error("Slug is required");return(0,n.jsx)(tp.A,{visible:void 0!==a,size:"medium",header:"Confirm to delete payment method ending with ".concat(null==a||null==(t=a.card)?void 0:t.last4),onCancel:()=>s(),customFooter:(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(X.$,{type:"default",disabled:o,onClick:()=>s(),children:"Cancel"}),(0,n.jsx)(X.$,{type:"primary",disabled:o,loading:o,onClick:d,children:"Confirm"})]}),"data-sentry-element":"Modal","data-sentry-component":"DeletePaymentMethodModal","data-sentry-source-file":"DeletePaymentMethodModal.tsx",children:(0,n.jsx)(tp.A.Content,{"data-sentry-element":"unknown","data-sentry-source-file":"DeletePaymentMethodModal.tsx",children:(0,n.jsx)(tI.Z,{type:"default",title:"This will permanently delete your payment method.",description:"You can re-add the payment method any time.","data-sentry-element":"Admonition","data-sentry-source-file":"DeletePaymentMethodModal.tsx"})})})},tE=()=>{var e,t,a;let{slug:o}=(0,r.g)(),c=(0,d.a)(),[x,h]=(0,s.useState)(),[g,f]=(0,s.useState)(),[y,N]=(0,s.useState)(!1),{data:w}=(0,i.j5)({orgSlug:o}),{data:C,error:S,isLoading:_,isError:A,isSuccess:k}=e5({slug:o}),{isSuccess:I,can:P}=(0,p.hl)(u.aG.BILLING_READ,"stripe.payment_methods"),E=(0,p.SE)(u.aG.BILLING_WRITE,"stripe.payment_methods");return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(l.gu,{"data-sentry-element":"ScaffoldSection","data-sentry-source-file":"PaymentMethods.tsx",children:[(0,n.jsx)(l.xp,{"data-sentry-element":"ScaffoldSectionDetail","data-sentry-source-file":"PaymentMethods.tsx",children:(0,n.jsxs)("div",{className:"sticky space-y-2 top-12",children:[(0,n.jsx)("p",{className:"text-foreground text-base m-0",children:"Payment Methods"}),(0,n.jsx)("p",{className:"text-sm text-foreground-light mb-2 pr-4 m-0",children:"Payments for your subscription are made using the default card."})]})}),(0,n.jsx)(l.Rf,{"data-sentry-element":"ScaffoldSectionContent","data-sentry-source-file":"PaymentMethods.tsx",children:(null==c?void 0:c.managed_by)!==void 0&&(null==c?void 0:c.managed_by)!=="supabase"?(0,n.jsx)(R.A,{partner:null==c?void 0:c.managed_by,resource:"Payment Methods",cta:{installationId:null==c?void 0:c.partner_id}}):I&&!P?(0,n.jsx)(m.A,{resourceText:"view this organization's payment methods"}):(0,n.jsxs)(n.Fragment,{children:[_&&(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(b.A,{}),(0,n.jsx)(b.A,{className:"w-3/4"}),(0,n.jsx)(b.A,{className:"w-1/2"})]}),A&&(0,n.jsx)(j.A,{subject:"Failed to retrieve payment methods",error:S}),k&&(0,n.jsxs)(n.Fragment,{children:[(null==w?void 0:w.payment_method_type)==="invoice"&&(0,n.jsx)(eL.F,{withIcon:!0,variant:"info",title:"Payment is currently by invoice",actions:[(0,n.jsx)(X.$,{asChild:!0,type:"default",children:(0,n.jsx)(v(),{href:"/support/new?category=billing&subject=Request%20to%20change%20payment%20method",target:"_blank",rel:"noreferrer",className:"ml-3",children:"Contact support"})},"payment-method-support")],children:"You get a monthly invoice and payment link via email. To change your payment method, please contact us via our support form."}),(0,n.jsx)(ef.lB,{footer:(0,n.jsxs)("div",{className:"flex items-center justify-between py-4 px-8",children:[E?(0,n.jsx)("div",{}):(0,n.jsx)("p",{className:"text-sm text-foreground-light",children:"You need additional permissions to manage payment methods"}),(0,n.jsx)(X.$,{type:"default",icon:(0,n.jsx)(e8.A,{}),disabled:!E,onClick:()=>N(!0),children:"Add new card"})]}),children:(0,n.jsx)(ey.y9,{children:(0,n.jsx)(ey.DE,{fullWidth:!0,loading:!1,children:(null!=(a=null==C||null==(e=C.data)?void 0:e.length)?a:0)===0?(0,n.jsxs)("div",{className:"flex items-center gap-2 opacity-50",children:[(0,n.jsx)(tm,{size:16,strokeWidth:1.5}),(0,n.jsx)("p",{className:"text-sm",children:"No payment methods"})]}):(0,n.jsx)("div",{className:"space-y-3",children:null==C||null==(t=C.data)?void 0:t.map(e=>{var t;return(0,n.jsx)(tA,{paymentMethod:e,canUpdatePaymentMethods:E,paymentMethodType:null==w?void 0:w.payment_method_type,setSelectedMethodForUse:h,setSelectedMethodToDelete:f,paymentMethodCount:null!=(t=null==C?void 0:C.data.length)?t:0,subscriptionPlan:null==w?void 0:w.plan.id},e.id)})})})})})]})]})})]}),(0,n.jsx)(tb,{visible:y,returnUrl:"".concat((0,M.AP)(),"/org/").concat(o,"/billing"),onCancel:()=>N(!1),onConfirm:()=>{N(!1),B.oR.success("Successfully added new payment method")},"data-sentry-element":"AddNewPaymentMethodModal","data-sentry-source-file":"PaymentMethods.tsx"}),(0,n.jsx)(tN,{selectedPaymentMethod:x,onClose:()=>h(void 0),"data-sentry-element":"ChangePaymentMethodModal","data-sentry-source-file":"PaymentMethods.tsx"}),(0,n.jsx)(tP,{selectedPaymentMethod:g,onClose:()=>f(void 0),"data-sentry-element":"DeletePaymentMethodModal","data-sentry-source-file":"PaymentMethods.tsx"})]})};var tF=a(95422),tL=a(33312),tT=a.n(tL),tz=a(24400),tD=a(46312),tB=a(79206);async function tR(e){let{organizationSlug:t,tier:a}=e;if(!t)throw Error("organizationSlug is required");if(!a)throw Error("tier is required");let{data:n,error:s}=await (0,C.bE)("/platform/organizations/{slug}/billing/subscription/preview",{params:{path:{slug:t}},body:{tier:a},headers:{Version:"2"}});return s&&(0,C.H4)(s),n}let tU=function(e){let{organizationSlug:t,tier:a}=e,{enabled:n=!0,...s}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,w.I)(U.O.subscriptionPreview(t,a),()=>tR({organizationSlug:t,tier:a}),{enabled:n&&void 0!==t&&void 0!==a,...s,retry:(e,t)=>("object"!=typeof t||null===t||!("code"in t)||400!==t.code)&&e<3})};async function tO(e,t){var a;let{slug:n}=e;if(!n)throw Error("Organization slug is required");let{data:s,error:r}=await (0,C.Jt)("/platform/organizations/{slug}",{params:{path:{slug:n}},signal:t});return r&&(0,C.H4)(r),{...s,billing_email:null!=(a=s.billing_email)?a:"Unknown",managed_by:s.slug.startsWith("vercel_icfg_")?"vercel-marketplace":"supabase",partner_id:s.slug.startsWith("vercel_")?s.slug.replace("vercel_",""):void 0}}let tG=function(e){let{slug:t}=e,{enabled:a=!0,...n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,w.I)(U.O.detail(t),e=>{let{signal:a}=e;return tO({slug:t},a)},{enabled:a&&void 0!==t,...n,staleTime:18e5})};var tH=a(13929);async function tV(e,t){let{orgSlug:a}=e;if(!a)throw Error("orgSlug is required");let{error:n,data:s}=await (0,C.Jt)("/platform/organizations/{slug}/billing/plans",{params:{path:{slug:a}},signal:t});return n&&(0,C.H4)(n),s}let tq=function(e){let{orgSlug:t}=e,{enabled:a=!0,...n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=(0,p.SE)(u.aG.BILLING_READ,"stripe.subscriptions");return(0,w.I)(eB.s.orgPlans(t),e=>{let{signal:a}=e;return tV({orgSlug:t},a)},{enabled:a&&void 0!==t&&s,...n})};var tW=a(57132),tK=a(90462),tY=a(7078),t$=a(34512);let tJ=e=>{let{projectAddon:t}=e,a=t.addons.find(e=>"compute_instance"===e.type),s=t.addons.filter(e=>!["log_drain","auth_mfa_phone"].includes(e.type)).map(e=>"compute_instance"===e.type?"".concat(e.variant.name," Compute Instance"):e.variant.name);return(0,n.jsxs)("li",{className:"list-disc ml-6","data-sentry-component":"ProjectDowngradeListItem","data-sentry-source-file":"DowngradeModal.tsx",children:[t.name,": ",s.join(", ")," will be removed.",a?(0,n.jsxs)(n.Fragment,{children:[" ","Project will also ",(0,n.jsx)("span",{className:"font-bold",children:"need to be restarted"})," due to change in compute instance"]}):""]})},tZ=e=>{var t;let{visible:a,subscription:r,onClose:l,onConfirm:i,projects:o}=e,d=(0,s.useMemo)(()=>tK.vw.find(e=>"tier_free"===e.id),[]),c=(null==r?void 0:r.project_addons.flatMap(e=>{let t=e.addons.filter(e=>"ci_micro"!==e.variant.identifier);return t.length?{...e,addons:t}:[]}))||[],u=o.some(e=>"micro"===e.infra_compute_size);return(0,n.jsx)(tp.A,{size:"large",alignFooter:"right",variant:"warning",visible:a,onCancel:l,onConfirm:i,header:"Confirm to downgrade to ".concat(null==d?void 0:d.name," plan"),"data-sentry-element":"Modal","data-sentry-component":"DowngradeModal","data-sentry-source-file":"DowngradeModal.tsx",children:(0,n.jsxs)(tp.A.Content,{"data-sentry-element":"unknown","data-sentry-source-file":"DowngradeModal.tsx",children:[(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(tI.Z,{type:"warning",title:"Downgrading to the Free Plan will lead to reductions in your organization's quota",description:"If you're already past the limits of the Free Plan, your projects could become unresponsive or enter read only mode.","data-sentry-element":"Admonition","data-sentry-source-file":"DowngradeModal.tsx"}),((null!=(t=c.length)?t:0)>0||u)&&(0,n.jsx)(tI.Z,{type:"warning",title:"Projects affected by the downgrade",children:(0,n.jsxs)("ul",{className:"space-y-1 max-h-[100px] overflow-y-auto",children:[c.map(e=>(0,n.jsx)(tJ,{projectAddon:e},e.ref)),o.filter(e=>"micro"===e.infra_compute_size).map(e=>(0,n.jsxs)("li",{className:"list-disc ml-6",children:[e.name,": Compute will be downgraded. Project will also"," ",(0,n.jsx)("span",{className:"font-bold",children:"need to be restarted"}),"."]},e.ref))]})})]}),(0,n.jsxs)("ul",{className:"mt-4 space-y-5 text-sm",children:[(0,n.jsxs)("li",{className:"flex items-center gap-3",children:[(0,n.jsx)(tY.A,{size:18,"data-sentry-element":"PauseCircle","data-sentry-source-file":"DowngradeModal.tsx"}),(0,n.jsx)("span",{children:"Projects will be paused after a week of inactivity"})]}),(0,n.jsxs)("li",{className:"flex items-center gap-3 mb-2",children:[(0,n.jsx)(t$.A,{size:18,"data-sentry-element":"MinusCircle","data-sentry-source-file":"DowngradeModal.tsx"}),(0,n.jsx)("span",{children:"Add ons from all projects under this organization will be removed."})]}),(0,n.jsx)("li",{className:"flex gap-3",children:(0,n.jsxs)("div",{children:[(0,n.jsxs)("strong",{children:["Before you downgrade to the ",null==d?void 0:d.name," plan, consider:"]}),(0,n.jsxs)("ul",{className:"space-y-2 mt-2",children:[(0,n.jsx)("li",{className:"list-disc ml-6 text-foreground-light",children:"Your projects no longer require their respective add ons."}),(0,n.jsxs)("li",{className:"list-disc ml-6 text-foreground-light",children:["Your resource consumption are well within the ",null==d?void 0:d.name," plan's quota."]}),(0,n.jsx)("li",{className:"list-disc ml-6 text-foreground-light",children:"Alternatively, you may also transfer projects across organizations."})]})]})})]}),(null==r?void 0:r.billing_via_partner)===!0&&"fly"===r.billing_partner&&(0,n.jsx)("p",{className:"mt-4 text-sm",children:"Your organization will be downgraded at the end of your current billing cycle."})]})})},tQ=e=>{let{plan:t,isCurrentPlan:a,billingPartner:s}=e,{data:r}=(0,d.s)(),l=null==r?void 0:r.slug,i=(0,tK.DW)(t,s),o=null==r?void 0:r.plan.name,{mutate:u}=(0,tW.h)();return(0,n.jsxs)("div",{className:(0,c.cn)("grid grid-cols-1 md:grid-cols-3 border rounded-md bg-studio","py-4 col-span-12 justify-between gap-x-8"),"data-sentry-component":"EnterpriseCard","data-sentry-source-file":"EnterpriseCard.tsx",children:[(0,n.jsxs)("div",{className:"flex flex-col justify-center px-4",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)("p",{className:(0,c.cn)("text-brand text-sm uppercase"),children:t.name}),a?(0,n.jsx)("div",{className:"text-xs bg-surface-300 text-foreground-light rounded px-2 py-0.5",children:"Current plan"}):t.nameBadge?(0,n.jsx)("div",{className:"text-xs bg-surface-200 text-brand rounded px-2 py-0.5",children:t.nameBadge}):null]}),(0,n.jsx)("p",{className:"text-sm mt-2 mb-4",children:t.description}),(0,n.jsx)(X.$,{block:!0,asChild:!0,type:"default",size:"tiny",onClick:()=>u({action:"studio_pricing_plan_cta_clicked",properties:{selectedPlan:"Enterprise",currentPlan:o},groups:{organization:null!=l?l:"Unknown"}}),"data-sentry-element":"Button","data-sentry-source-file":"EnterpriseCard.tsx",children:(0,n.jsx)("a",{href:t.href,className:"hidden md:block",target:"_blank",children:t.cta})})]}),(0,n.jsxs)("div",{className:"flex flex-col justify-center col-span-2 px-4 md:px-0",children:[(0,n.jsx)("ul",{role:"list",className:"text-xs text-foreground-light md:grid md:grid-cols-2 md:gap-x-10",children:i.map(e=>(0,n.jsxs)("li",{className:"flex items-center py-2 first:mt-0",children:[(0,n.jsx)(et.A,{className:"text-brand h-4 w-4","aria-hidden":"true",strokeWidth:3}),(0,n.jsx)("span",{className:"text-foreground mb-0 ml-3 ",children:"string"==typeof e?e:e[0]})]},"string"==typeof e?e:e[0]))}),(0,n.jsx)(X.$,{block:!0,asChild:!0,type:"default",size:"tiny",onClick:()=>u({action:"studio_pricing_plan_cta_clicked",properties:{selectedPlan:"Enterprise",currentPlan:o},groups:{organization:null!=l?l:"Unknown"}}),"data-sentry-element":"Button","data-sentry-source-file":"EnterpriseCard.tsx",children:(0,n.jsx)("a",{href:t.href,className:"visible md:hidden mt-8",target:"_blank",children:t.cta})})]})]},t.id)};var tX=a(29444),t0=a(58971),t2=a(95708);let t1=e=>{let{visible:t,projects:a,onClose:l}=e,{slug:i}=(0,r.g)(),[o,d]=(0,s.useState)(""),[u,m]=(0,s.useState)([]),p=(0,eM._P)("disableProjectCreationAndUpdate"),{mutate:x,isLoading:h}=eU({onError:e=>{B.oR.error("Failed to downgrade project: ".concat(e.message))}}),{mutateAsync:g,isLoading:f}=(0,t0.$)(),y=h||f,v=a.filter(e=>"nano"!==e.infra_compute_size),j=v.length>0,[b]=(0,s.useState)(()=>[...tX.U.sort(()=>Math.random()-.5),{value:"None of the above"}]),N=e=>{m([e])},w=(e=>{let t=tX.U.find(t=>t.value===e);return(null==t?void 0:t.label)||"What can we improve on?"})(u[0]),C=async()=>{if(0===u.length)return B.oR.error("Please select a reason for canceling your subscription");await S()},S=async()=>{if(!i)return console.error("Slug is required");x({slug:i,tier:"tier_free"},{onSuccess:async()=>{try{await g({orgSlug:i,reasons:u.reduce((e,t)=>"".concat(e,"- ").concat(t,"\n"),""),message:o,exitAction:"downgrade"})}catch(e){}finally{B.oR.success(j?"Successfully downgraded organization to the Free Plan. Your projects are currently restarting to update their compute instances.":"Successfully downgraded organization to the Free Plan",{duration:j?8e3:4e3}),l(!0),window.scrollTo({top:0,left:0,behavior:"smooth"})}}})};return(0,n.jsxs)(tp.A,{hideFooter:!0,size:"xlarge",visible:t,onCancel:l,header:"Help us improve","data-sentry-element":"Modal","data-sentry-component":"ExitSurveyModal","data-sentry-source-file":"ExitSurveyModal.tsx",children:[(0,n.jsx)(tp.A.Content,{"data-sentry-element":"unknown","data-sentry-source-file":"ExitSurveyModal.tsx",children:(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsx)("p",{className:"text-sm text-foreground-light",children:"Share with us why you're downgrading your plan."}),(0,n.jsxs)("div",{className:"space-y-8 mt-6",children:[(0,n.jsx)("div",{className:"flex flex-wrap gap-2","data-toggle":"buttons",children:b.map(e=>{let t=u[0]===e.value;return(0,n.jsxs)("label",{className:(0,c.cn)("flex cursor-pointer items-center space-x-2 rounded-md py-1","pl-2 pr-3 text-center text-sm","shadow-sm transition-all duration-100",t?"bg-foreground text-background opacity-100 hover:bg-opacity-75":"bg-border-strong text-foreground opacity-75 hover:opacity-100"),children:[(0,n.jsx)("input",{type:"radio",name:"options",value:e.value,className:"hidden",checked:t,onChange:()=>N(e.value)}),(0,n.jsx)("div",{children:e.value})]},e.value)})}),(0,n.jsxs)("div",{className:"text-area-text-sm flex flex-col gap-y-2",children:[(0,n.jsx)("label",{className:"text-sm whitespace-pre-line break-words",children:w}),(0,n.jsx)(t2.A.TextArea,{id:"message",name:"message",value:o,onChange:e=>d(e.target.value),rows:3,"data-sentry-element":"unknown","data-sentry-source-file":"ExitSurveyModal.tsx"})]})]}),j&&(0,n.jsxs)(eL.F,{withIcon:!0,variant:"warning",title:"".concat(v.length," of your projects will be restarted upon clicking confirm,"),children:["This is due to changes in compute instances from the downgrade. Affected projects include ",v.map(e=>e.name).join(", "),"."]})]})}),(0,n.jsxs)("div",{className:"flex items-center justify-between border-t px-4 py-4",children:[(0,n.jsx)("p",{className:"text-xs text-foreground-lighter",children:"The unused amount for the remaining time of your billing cycle will be refunded as credits"}),(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)(X.$,{type:"default",onClick:()=>l(),"data-sentry-element":"Button","data-sentry-source-file":"ExitSurveyModal.tsx",children:"Cancel"}),(0,n.jsx)(eT.A,{projectUpdateDisabled:p,"data-sentry-element":"ProjectUpdateDisabledTooltip","data-sentry-source-file":"ExitSurveyModal.tsx",children:(0,n.jsx)(X.$,{type:"danger",className:"pointer-events-auto",loading:y,disabled:p||y,onClick:C,"data-sentry-element":"Button","data-sentry-source-file":"ExitSurveyModal.tsx",children:"Confirm downgrade"})})]})]})]})},t4=e=>{let{visible:t,onClose:a}=e,{data:s}=(0,d.s)(),r=null==s?void 0:s.slug,{data:l}=(0,tB.A)({slug:r},{enabled:t});return(0,n.jsxs)(tp.A,{hideFooter:!0,visible:t,size:"medium",header:"Your organization has members who have exceeded their free project limits",onCancel:a,"data-sentry-element":"Modal","data-sentry-component":"MembersExceedLimitModal","data-sentry-source-file":"MembersExceedLimitModal.tsx",children:[(0,n.jsx)(tp.A.Content,{"data-sentry-element":"unknown","data-sentry-source-file":"MembersExceedLimitModal.tsx",children:(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)("p",{className:"text-sm text-foreground-light",children:"The following members have reached their maximum limits for the number of active free plan projects within organizations where they are an administrator or owner:"}),(0,n.jsx)("ul",{className:"pl-5 text-sm list-disc text-foreground-light",children:(l||[]).map((e,t)=>(0,n.jsxs)("li",{children:[e.username||e.primary_email," (Limit: ",e.free_project_limit," free projects)"]},"member-".concat(t)))}),(0,n.jsx)("p",{className:"text-sm text-foreground-light",children:"These members will need to either delete, pause, or upgrade one or more of these projects before you're able to downgrade this project."})]})}),(0,n.jsx)(tp.A.Separator,{"data-sentry-element":"unknown","data-sentry-source-file":"MembersExceedLimitModal.tsx"}),(0,n.jsx)(tp.A.Content,{className:"flex items-center gap-2","data-sentry-element":"unknown","data-sentry-source-file":"MembersExceedLimitModal.tsx",children:(0,n.jsx)(X.$,{htmlType:"button",type:"default",onClick:a,block:!0,"data-sentry-element":"Button","data-sentry-source-file":"MembersExceedLimitModal.tsx",children:"Understood"})})]})};async function t3(e){let{payment_intent_id:t,slug:a}=e;if(!a)throw Error("Organization slug is required to confirm pending subscription change");let{data:n,error:s}=await (0,C.bE)("/platform/organizations/{slug}/billing/subscription/confirm",{params:{path:{slug:a}},body:{payment_intent_id:t}});return s&&(0,C.H4)(s),n}let t5=function(){let{onSuccess:e,onError:t,...a}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=(0,H.jE)();return(0,V.n)(e=>t3(e),{async onSuccess(t,a,s){let{slug:r}=a;await new Promise(e=>setTimeout(e,2e3)),await Promise.all([n.invalidateQueries(eB.s.orgSubscription(r)),n.invalidateQueries(eB.s.orgPlans(r)),n.invalidateQueries(eD.E.orgUsage(r)),n.invalidateQueries(S.x.orgUpcomingPreview(r)),n.invalidateQueries(U.O.detail(r)),n.invalidateQueries(U.O.list()),n.invalidateQueries(U.O.paymentMethods(r))]),await (null==e?void 0:e(t,a,s))},async onError(e,a,n){void 0===t?B.oR.error(e.message,{dismissible:!0,duration:1e4}):t(e,a,n)},...a})},t6=(0,eJ.c)(ek.WS),t8={tier_pro:"the Pro plan to unlock unlimited projects, daily backups, and email support whenever you need it",tier_team:"the Team plan for SOC2, SSO, priority support and greater data and log retention",default:"to a new plan"},t9={tier_free:"the Free plan with limited resources and active projects",tier_pro:"the Pro plan",default:"to a lower plan"},t7=e=>{var t,a,r,l,i,o,c,u,m,p,x,h,g,f;let{selectedTier:y,onClose:N,planMeta:w,subscriptionPreviewError:C,subscriptionPreviewIsLoading:S,subscriptionPreviewInitialized:_,subscriptionPreview:A,subscription:I,currentPlanMeta:E,projects:F}=e,{resolvedTheme:L}=(0,eS.D)(),{data:T}=(0,d.s)(),[z,D]=(0,s.useState)(),[R,U]=(0,s.useState)(null),[O,G]=(0,s.useState)(!1),H=(0,s.useRef)(null),V=(null==I?void 0:I.billing_via_partner)===!0,q=null==I?void 0:I.billing_partner,W=(0,s.useMemo)(()=>({clientSecret:R,appearance:(0,ta.D)(L)}),[R,L]),K=(0,s.useMemo)(()=>{var e;return(0,tD.O8)(null==I||null==(e=I.plan)?void 0:e.id,null==w?void 0:w.id)},[w,I]),Y=(0,s.useMemo)(()=>tK.vw.find(e=>e.id===y),[y]),$=()=>{G(!1),B.oR.success("Successfully ".concat("downgrade"===K?"downgraded":"upgraded"," subscription to ").concat(null==Y?void 0:Y.name,"!")),N(),window.scrollTo({top:0,left:0,behavior:"smooth"})},{mutate:J,isLoading:Z}=eU({onSuccess:e=>{if(e.pending_payment_intent_secret)return void U(e.pending_payment_intent_secret);$()},onError:e=>{G(!1),B.oR.error("Unable to update subscription: ".concat(e.message))}}),{mutate:Q,isLoading:ee}=t5({onSuccess:()=>{$()},onError:e=>{B.oR.error("Unable to update subscription: ".concat(e.message))}}),ea=async e=>{var t;U(""),(null==(t=e.paymentIntent)?void 0:t.status)==="succeeded"?await Q({slug:null==T?void 0:T.slug,payment_intent_id:e.paymentIntent.id}):(G(!1),B.oR.error("Could not confirm payment. Please try again or use a different card."))},en=async()=>{var e,t,a,n,s;if(!(null==T?void 0:T.slug))return console.error("org slug is required");if(!y)return console.error("Selected plan is required");G(!0);let r=await (null==(e=H.current)?void 0:e.createPaymentMethod());if(r?D(r.paymentMethod.id):G(!1),!r&&(null==I?void 0:I.payment_method_type)!=="invoice"&&"upgrade"===K)return;let l=(null==I||null==(t=I.plan)?void 0:t.id)==="team"&&y===ek.V$.PRO?ek.V$.PAYG:y;J({slug:null==T?void 0:T.slug,tier:l,paymentMethod:null==r||null==(a=r.paymentMethod)?void 0:a.id,address:null==r?void 0:r.address,tax_id:null!=(n=null==r?void 0:r.taxId)?n:void 0,billing_name:null!=(s=null==r?void 0:r.customerName)?s:void 0})},es=(null==Y||null==(a=Y.features)||null==(t=a[0])?void 0:t.features)||[],er=(null==E||null==(l=E.features)||null==(r=l[0])?void 0:r.features)||[],el="downgrade"===K?er.filter(e=>{let t="string"==typeof e?e:e[0];return!es.some(e=>("string"==typeof e?e:e[0])===t)}):[],ei=Math.floor(Date.now()/1e3),eo=(null==I?void 0:I.current_period_end)-ei,ed=(null==I?void 0:I.current_period_end)-(null==I?void 0:I.current_period_start),ec=(null!=(m=null==E?void 0:E.price)?m:0)*(eo/ed),eu=null!=(p=Number(null==Y?void 0:Y.priceMonthly))?p:0,em=-((null!=(x=null==I?void 0:I.customer_balance)?x:0)/100*1),ep=Math.max(0,eu-ec-em);return(0,n.jsx)(e1.lG,{open:void 0!==y&&"tier_free"!==y,onOpenChange:e=>{Z||O||ee||e||N()},"data-sentry-element":"Dialog","data-sentry-component":"SubscriptionPlanUpdateDialog","data-sentry-source-file":"SubscriptionPlanUpdateDialog.tsx",children:(0,n.jsxs)(e1.Cf,{onOpenAutoFocus:e=>e.preventDefault(),size:"xlarge",className:"p-0 overflow-y-auto max-h-[1000px]","data-sentry-element":"DialogContent","data-sentry-source-file":"SubscriptionPlanUpdateDialog.tsx",children:[(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-5 h-full items-stretch",children:[(0,n.jsxs)("div",{className:"p-8 pb-8 flex flex-col xl:col-span-3",children:[(0,n.jsxs)("div",{className:"flex-1",children:[(0,n.jsxs)("div",{children:[!V&&null!=A&&"upgrade"===K&&(0,n.jsx)("div",{className:"space-y-2 mb-4",children:(0,n.jsx)(tl,{ref:H,selectedPaymentMethod:z,onSelectPaymentMethod:e=>D(e),readOnly:O||ee||Z})}),V&&(0,n.jsxs)("div",{className:"mb-4",children:[(0,n.jsxs)("p",{className:"text-sm",children:["This organization is billed through our partner"," ",(0,tD.mS)(q),"."," ","aws"===q?(0,n.jsx)(n.Fragment,{children:"The organization's credit balance will be decreased accordingly."}):(0,n.jsx)(n.Fragment,{children:"You will be charged by them directly."})]}),V&&"fly"===q&&(null==A?void 0:A.plan_change_type)==="downgrade"&&(0,n.jsx)("p",{className:"text-sm",children:"Your organization will be downgraded at the end of your current billing cycle."})]})]}),S&&(0,n.jsxs)("div",{className:"space-y-2 mb-4 mt-2",children:[(0,n.jsx)(b.A,{}),(0,n.jsx)(b.A,{className:"w-3/4"}),(0,n.jsx)(b.A,{className:"w-1/2"})]}),_&&(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{className:"mt-2 mb-4 text-foreground-light text-sm",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between gap-2 border-b border-muted text-foreground",children:[(0,n.jsx)("div",{className:"py-2 pl-0",children:"Charge today"}),(0,n.jsxs)("div",{className:"py-2 pr-0 text-right",translate:"no",children:[(0,M.vv)(ep),(null==I||null==(i=I.plan)?void 0:i.id)!=="free"&&(0,n.jsxs)(n.Fragment,{children:[" ",(0,n.jsx)(v(),{href:"/org/".concat(null==T?void 0:T.slug,"/billing#breakdown"),className:"text-sm text-brand hover:text-brand-600 transition",target:"_blank",children:"+ current spend"})]})]})]}),(null==I||null==(o=I.plan)?void 0:o.id)!=="free"&&(0,n.jsxs)("div",{className:"flex items-center justify-between gap-2 border-b border-muted text-xs",children:[(0,n.jsxs)("div",{className:"py-2 pl-0 flex items-center gap-1",children:[(0,n.jsxs)("span",{children:["Unused Time on ",null==I||null==(c=I.plan)?void 0:c.name," Plan"]}),(0,n.jsx)(P.I,{className:"max-w-sm",children:"Your previous plan was charged upfront, so a plan change will prorate any unused time in credits. If the prorated credits exceed the new plan charge, the excessive credits are added to your organization for future use."})]}),(0,n.jsxs)("div",{className:"py-2 pr-0 text-right",translate:"no",children:["-",(0,M.vv)(ec)]})]}),em>0&&(0,n.jsxs)("div",{className:"flex items-center justify-between gap-2 border-b border-muted text-xs",children:[(0,n.jsxs)("div",{className:"py-2 pl-0 flex items-center gap-1",children:[(0,n.jsx)("span",{children:"Credits"}),(0,n.jsx)(P.I,{children:"Credits will be used first before charging your card."})]}),(0,n.jsx)("div",{className:"py-2 pr-0 text-right",translate:"no",children:(0,M.vv)(em)})]}),(0,n.jsxs)("div",{className:"flex items-center justify-between gap-2 text-foreground-lighter text-xs",children:[(0,n.jsxs)("div",{className:"py-2 pl-0 flex items-center gap-1",children:[(0,n.jsx)("span",{children:"Monthly invoice estimate"}),(0,n.jsx)(P.I,{side:"right",children:(0,n.jsxs)("div",{className:"w-[520px] p-6",children:[(0,n.jsx)("h3",{className:"text-base font-medium mb-2",children:"Your new monthly invoice"}),(0,n.jsxs)("p",{className:"prose text-xs mb-2",children:["Paid projects run 24/7 without pausing. First project uses Compute Credits; additional projects start at ",(0,n.jsx)("span",{translate:"no",children:"$10"}),"/month regardless of usage."," ",(0,n.jsx)(v(),{href:"/docs/guides/platform/manage-your-usage/compute",target:"_blank",children:"Learn more"}),"."]}),C&&(0,n.jsx)(j.A,{error:C,subject:"Failed to preview subscription."}),S&&(0,n.jsxs)("div",{className:"space-y-2 p-6",children:[(0,n.jsx)("span",{className:"text-sm",children:"Estimating monthly costs..."}),(0,n.jsx)(b.A,{}),(0,n.jsx)(b.A,{className:"w-3/4"}),(0,n.jsx)(b.A,{className:"w-1/2"})]}),_&&(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(k.XI,{className:"[&_tr:last-child]:border-t font-mono text-xs",children:(0,n.jsxs)(k.BF,{children:[(()=>{var e,t,a,s,r,l;let i=(null==A||null==(e=A.breakdown)?void 0:e.filter(e=>{var t;return(null==(t=e.description)?void 0:t.toLowerCase().includes("compute"))&&e.breakdown&&e.breakdown.length>0}))||[],o=null!=(r=null==A||null==(t=A.breakdown)?void 0:t.find(e=>e.description.startsWith("Compute Credits")))?r:null,d=null==A||null==(a=A.breakdown)?void 0:a.find(e=>{var t;return null==(t=e.description)?void 0:t.toLowerCase().includes("plan")}),c=i.flatMap(e=>(e.breakdown||[]).map(t=>({...t,computeType:e.description,computeCosts:Math.round(e.total_price/e.breakdown.length)}))),u=(null==A||null==(s=A.breakdown)?void 0:s.filter(e=>{var t,a;return!(null==(t=e.description)?void 0:t.toLowerCase().includes("compute"))&&!(null==(a=e.description)?void 0:a.toLowerCase().includes("plan"))}))||[];return(0,n.jsxs)(n.Fragment,{children:[c.length>0&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(k.Hj,{className:"text-foreground-light",children:[(0,n.jsx)(k.nA,{className:"!py-2 px-0",children:null==d?void 0:d.description}),(0,n.jsx)(k.nA,{className:"text-right py-2 px-0",translate:"no",children:(0,M.vv)(null==d?void 0:d.total_price)})]}),(0,n.jsxs)(k.Hj,{className:"text-foreground-light",children:[(0,n.jsx)(k.nA,{className:"!py-2 px-0 flex items-center gap-1",children:(0,n.jsx)("span",{children:"Compute"})}),(0,n.jsx)(k.nA,{className:"text-right py-2 px-0",translate:"no",children:(0,M.vv)(i.reduce((e,t)=>e+t.total_price,0)+(null!=(l=null==o?void 0:o.total_price)?l:0))})]}),c.map(e=>(0,n.jsx)(k.Hj,{className:"text-foreground-light",children:(0,n.jsxs)(k.nA,{className:"!py-2 px-0 pl-6",translate:"no",children:[e.project_name," (",e.computeType,") |"," ",(0,M.vv)(e.computeCosts)]})},e.project_ref)),o&&(0,n.jsx)(k.Hj,{className:"text-foreground-light",children:(0,n.jsxs)(k.nA,{className:"!py-2 px-0 pl-6",translate:"no",children:["Compute Credits |"," ",(0,M.vv)(o.total_price)]})})]}),u.map(e=>{var t;return(0,n.jsxs)(k.Hj,{className:"text-foreground-light",children:[(0,n.jsx)(k.nA,{className:"text-xs py-2 px-0",children:(0,n.jsxs)("div",{className:"flex items-center gap-1",children:[(0,n.jsx)("span",{children:null!=(t=e.description)?t:"Unknown"}),e.breakdown&&e.breakdown.length>0&&(0,n.jsxs)(P.I,{className:"max-w-sm",children:[(0,n.jsxs)("p",{children:["Projects using ",e.description,":"]}),(0,n.jsx)("ul",{className:"ml-6 list-disc",children:e.breakdown.map(t=>(0,n.jsx)("li",{children:t.project_name},"".concat(e.description,"-breakdown-").concat(t.project_ref)))})]})]})}),(0,n.jsx)(k.nA,{className:"text-right text-xs py-2 px-0",translate:"no",children:(0,M.vv)(e.total_price)})]},e.description)})]})})(),(0,n.jsxs)(k.Hj,{children:[(0,n.jsx)(k.nA,{className:"font-medium py-2 px-0",children:"Total per month (excluding other usage)"}),(0,n.jsx)(k.nA,{className:"text-right font-medium py-2 px-0",translate:"no",children:(0,M.vv)(null!=(g=Math.round(null!=(h=null==A||null==(u=A.breakdown)?void 0:u.reduce((e,t)=>e+t.total_price,0))?h:0))?g:0)})]})]})})})]})})]}),(0,n.jsx)("div",{className:"py-2 pr-0 text-right",translate:"no",children:(0,M.vv)(Math.round(null!=(f=null==A?void 0:A.breakdown.reduce((e,t)=>e+t.total_price,0))?f:0))})]})]})})]}),(0,n.jsxs)("div",{className:"pt-4",children:[5===F.filter(e=>e.status===ek.BU.ACTIVE_HEALTHY||e.status===ek.BU.COMING_UP).length&&(null==A?void 0:A.plan_change_type)!=="downgrade"&&(0,n.jsx)("div",{className:"pb-2",children:(0,n.jsx)(tI.Z,{title:"Empty organization",type:"warning",children:"This organization has no active projects. Did you select the correct organization?"})}),1===F.filter(e=>e.status===ek.BU.ACTIVE_HEALTHY||e.status===ek.BU.COMING_UP).length&&(null==Y?void 0:Y.planId)==="pro"&&"upgrade"===K&&(0,n.jsx)("div",{className:"pb-2",children:(0,n.jsxs)(tI.Z,{type:"note",children:[(0,n.jsxs)("div",{className:"text-sm prose",children:["Paid projects run 24/7 without pausing. First project uses Compute Credits; additional projects cost ",(0,n.jsx)("span",{translate:"no",children:"$10+"}),"/month regardless of usage."," "]}),(0,n.jsx)(v(),{href:"/docs/guides/platform/manage-your-usage/compute",target:"_blank",className:"underline",children:"Learn more"})]})}),(0,n.jsx)("div",{className:"flex space-x-2",children:(0,n.jsxs)(X.$,{loading:Z||O||ee,disabled:S,type:"primary",onClick:en,className:"flex-1",size:"small","data-sentry-element":"Button","data-sentry-source-file":"SubscriptionPlanUpdateDialog.tsx",children:["Confirm ","downgrade"===K?"downgrade":"upgrade"]})})]})]}),(0,n.jsxs)("div",{className:"bg-surface-100 p-8 flex flex-col border-l xl:col-span-2",children:[(0,n.jsxs)("h3",{className:"text-base mb-8",children:["downgrade"===K?"Downgrade":"Upgrade"," ",(0,n.jsx)("span",{className:"font-bold",children:null==T?void 0:T.name})," to"," ","downgrade"===K?t9[y||"default"]:t8[y||"default"]]}),"downgrade"===K?el.length>0&&(0,n.jsxs)("div",{className:"mb-4",children:[(0,n.jsx)("h3",{className:"text-sm mb-1",children:"Features you'll lose"}),(0,n.jsx)("p",{className:"text-xs text-foreground-light mb-4",children:"Please review carefully before downgrading."}),(0,n.jsx)("div",{className:"space-y-2 mb-4 text-foreground-light",children:el.map(e=>(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)("div",{className:"w-4",children:(0,n.jsx)(eQ.A,{className:"h-3 w-3 text-amber-900",strokeWidth:3})}),(0,n.jsx)("p",{className:"text-sm",children:"string"==typeof e?e:e[0]})]},"string"==typeof e?e:e[0]))})]}):es.length>0&&(0,n.jsxs)("div",{className:"mb-4",children:[(0,n.jsx)("h3",{className:"text-sm mb-4",children:"Upgrade features"}),(0,n.jsx)("div",{className:"space-y-2 mb-4 text-foreground-light",children:es.map(e=>(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)("div",{className:"w-4",children:(0,n.jsx)(et.A,{className:"h-3 w-3 text-brand",strokeWidth:3})}),(0,n.jsxs)("div",{className:"text-sm",children:[(0,n.jsx)("p",{children:"string"==typeof e?e:e[0]}),Array.isArray(e)&&e.length>1&&(0,n.jsx)("p",{className:"text-foreground-lighter text-xs",children:e[1]})]})]},"string"==typeof e?e:e[0]))})]})]})]}),t6&&R&&(0,n.jsx)(e$.Elements,{stripe:t6,options:W,children:(0,n.jsx)(ti.i,{paymentIntentSecret:R,onPaymentIntentConfirm:e=>ea(e),onLoadingChange:e=>G(e)})})]})})};var ae=a(86926),at=a.n(ae),aa=a(37253),an=a.n(aa);async function as(e){let{orgSlug:t,prevPlan:a,currentPlan:n,reasons:s,message:r}=e,{data:l,error:i}=await (0,C.bE)("/platform/feedback/upgrade",{body:{...void 0!==t&&{orgSlug:t},...void 0!==a&&{prevPlan:a},...void 0!==n&&{currentPlan:n},reasons:s,...void 0!==r&&{additionalFeedback:r}}});return i&&(0,C.H4)(i),l}let ar=function(){let{onError:e,...t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,V.n)(e=>as(e),{async onError(t,a,n){void 0===e?B.oR.error("Failed to submit upgrade survey: ".concat(t.message)):e(t,a,n)},...t})},al=e=>{let{visible:t,originalPlan:a,subscription:l,onClose:i}=e,{slug:o}=(0,r.g)(),[d,c]=(0,s.useState)(""),[u,m]=(0,s.useReducer)(function(e,t){return at()(e,t.target.value)?an()(e,t.target.value):[...e,t.target.value]},[]),p=(0,I.bg)(a,null==l?void 0:l.plan.id),{mutate:x,isLoading:h}=ar({onError:e=>{B.oR.error("Failed to submit survey: ".concat(e.message))},onSuccess:()=>{i(!0),window.scrollTo({top:0,left:0,behavior:"smooth"})}}),g=async()=>{var e;if(0===u.length)return B.oR.error("Please select at least one reason for upgrading your subscription");x({orgSlug:o,prevPlan:a,currentPlan:null==l||null==(e=l.plan)?void 0:e.id,reasons:u,message:d.trim()||void 0})};return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(tp.A,{alignFooter:"right",size:"xlarge",loading:h,visible:t,onCancel:i,onConfirm:g,cancelText:"Skip",header:"We're excited for your upgrade","data-sentry-element":"Modal","data-sentry-source-file":"UpgradeModal.tsx",children:(0,n.jsxs)(tp.A.Content,{className:"space-y-4","data-sentry-element":"unknown","data-sentry-source-file":"UpgradeModal.tsx",children:[(0,n.jsx)("p",{className:"text-sm text-foreground-light",children:"What reasons motivated your decision to upgrade? Your feedback helps us improve Supabase as much as we can."}),(0,n.jsxs)("div",{className:"space-y-8 mt-6",children:[(0,n.jsx)("div",{className:"flex flex-wrap gap-2","data-toggle":"buttons",children:p.map(e=>{let t=u.find(t=>t===e);return(0,n.jsxs)("label",{className:"\n                      flex cursor-pointer items-center space-x-2 rounded-md py-1 \n                      pl-2 pr-3 text-center text-sm\n                      shadow-sm transition-all duration-100\n                      ".concat(t?" bg-foreground text-background opacity-100 hover:bg-opacity-75":" bg-border-strong text-foreground opacity-25 hover:opacity-50","\n                  "),children:[(0,n.jsx)("input",{type:"checkbox",name:"options",value:e,className:"hidden",onClick:m}),(0,n.jsx)("div",{children:e})]},e)})}),(0,n.jsx)("div",{className:"text-area-text-sm",children:(0,n.jsx)(t2.A.TextArea,{id:"message",name:"message",value:d,onChange:e=>c(e.target.value),label:"Anything else that we can improve on?","data-sentry-element":"unknown","data-sentry-source-file":"UpgradeModal.tsx"})})]})]})})})},ai=()=>{var e,t;let a=(0,tz.useRouter)(),{slug:l}=(0,r.g)(),{data:o}=(0,d.s)(),{mutate:m}=(0,tW.h)(),x=(0,s.useRef)(),[h,g]=(0,s.useState)(!1),[f,y]=(0,s.useState)(!1),[v,j]=(0,s.useState)(!1),[N,w]=(0,s.useState)(),C=(0,p.SE)(u.aG.BILLING_WRITE,"stripe.subscriptions"),{data:S}=(0,tH.el)(),_=(S||[]).filter(e=>e.organization_id===(null==o?void 0:o.id)),{data:A}=tG({slug:l}),k=!!(null==A?void 0:A.has_oriole_project),I=eF(),P="subscriptionPlan"===I.panelKey,E=()=>{let{panel:e,...t}=a.query;a.push({pathname:a.pathname,query:t},void 0,{shallow:!0}),I.setPanelKey(void 0)},{data:F,isSuccess:L}=(0,i.j5)({orgSlug:l}),{data:T,isLoading:z}=tq({orgSlug:l}),{data:D}=(0,tB.A)({slug:l}),B=null==F?void 0:F.billing_partner,{data:U,error:O,isLoading:G,isSuccess:H}=tU({tier:N,organizationSlug:l}),V=null!=(t=null==T?void 0:T.plans)?t:[],q=(D||[]).length>0&&_.filter(e=>"INACTIVE"!==e.status&&"GOING_DOWN"!==e.status).length>0;(0,s.useEffect)(()=>{if(P){var e;w(void 0);let t=Array.isArray(a.query.source)?a.query.source[0]:a.query.source,n={currentPlan:null==F||null==(e=F.plan)?void 0:e.name};t&&(n.origin=t),m({action:"studio_pricing_side_panel_opened",properties:n,groups:{organization:null!=l?l:"Unknown"}})}},[P]),(0,s.useEffect)(()=>{P&&L&&(x.current=F.plan.id)},[P,L]);let W=N?V.find(e=>e.id===N.split("tier_")[1]):null;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(eG.Ay,{hideFooter:!0,size:"xxlarge",visible:P,onCancel:()=>E(),header:(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("h4",{children:["Change subscription plan for ",null==o?void 0:o.name]}),(0,n.jsx)(X.$,{asChild:!0,type:"default",icon:(0,n.jsx)(eC.A,{}),children:(0,n.jsx)("a",{href:"https://supabase.com/pricing",target:"_blank",rel:"noreferrer",children:"Pricing"})})]}),"data-sentry-element":"SidePanel","data-sentry-source-file":"PlanUpdateSidePanel.tsx",children:[(null==o?void 0:o.managed_by)==="vercel-marketplace"&&(0,n.jsx)(R.A,{partner:null==o?void 0:o.managed_by,resource:"Organization plans",cta:{installationId:null==o?void 0:o.partner_id,path:"/settings",message:"Change Plan on Vercel Marketplace"}}),(0,n.jsx)(eG.Ay.Content,{"data-sentry-element":"unknown","data-sentry-source-file":"PlanUpdateSidePanel.tsx",children:(0,n.jsx)("div",{className:"py-6 grid grid-cols-12 gap-3",children:tK.vw.map(e=>{var t,a,s,r;let i=V.find(t=>t.id===e.id.split("tier_")[1]),d=null!=(r=null==i?void 0:i.price)?r:0,u="downgrade"===(0,tD.O8)(null==F?void 0:F.plan.id,null==e?void 0:e.planId),p=(null==i?void 0:i.id)===(null==F||null==(t=F.plan)?void 0:t.id),x=(0,tK.DW)(e,B),h=(0,tK.Rr)(e,B);return"tier_enterprise"===e.id?(0,n.jsx)(tQ,{plan:e,isCurrentPlan:p,billingPartner:B},e.id):(0,n.jsxs)("div",{className:(0,c.cn)("px-4 py-4 flex flex-col items-start justify-between","border rounded-md col-span-12 md:col-span-4 bg-surface-200"),children:[(0,n.jsxs)("div",{className:"w-full",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)("p",{className:"text-brand text-sm uppercase",children:e.name}),p?(0,n.jsx)("div",{className:"text-xs bg-surface-300 text-foreground-light rounded px-2 py-0.5",children:"Current plan"}):e.nameBadge?(0,n.jsx)("div",{className:"text-xs bg-brand-400 text-brand-600 rounded px-2 py-0.5",children:e.nameBadge}):null]}),(0,n.jsxs)("div",{className:"mt-4 flex items-center space-x-1 mb-4",children:[(null!=d?d:0)>0&&(0,n.jsx)("p",{className:"text-foreground-light text-sm",children:"From"}),z?(0,n.jsx)("div",{className:"h-[28px] flex items-center justify-center",children:(0,n.jsx)(b.A,{className:"w-[30px] h-[24px]"})}):(0,n.jsx)("p",{className:"text-foreground text-lg",translate:"no",children:(0,M.vv)(d)}),(0,n.jsx)("p",{className:"text-foreground-light text-sm",children:e.costUnit})]}),p?(0,n.jsx)(X.$,{block:!0,disabled:!0,type:"default",children:"Current plan"}):(0,n.jsxs)(eX.G,{block:!0,type:u?"default":"primary",disabled:(null==F||null==(a=F.plan)?void 0:a.id)==="enterprise"||(null==o?void 0:o.managed_by)!=="supabase"&&"tier_free"!==e.id||k||!C,onClick:()=>{var t;w(e.id),m({action:"studio_pricing_plan_cta_clicked",properties:{selectedPlan:e.name,currentPlan:null==F||null==(t=F.plan)?void 0:t.name},groups:{organization:null!=l?l:"Unknown"}})},tooltip:{content:{side:"bottom",className:k?"w-96 text-center":"",text:(null==F||null==(s=F.plan)?void 0:s.id)==="enterprise"?"Reach out to us via support to update your plan from Enterprise":k?"Your organization has projects that are using the OrioleDB extension which is only available on the Free plan. Remove all OrioleDB projects before changing your plan.":C?void 0:"You do not have permission to change the subscription plan"}},children:[u?"Downgrade":"Upgrade"," to ",e.name]}),(0,n.jsx)("div",{className:"border-t my-4"}),(0,n.jsx)("ul",{role:"list",children:x.map(e=>(0,n.jsxs)("li",{className:"flex py-2",children:[(0,n.jsx)("div",{className:"w-[12px]",children:(0,n.jsx)(et.A,{className:"h-3 w-3 text-brand translate-y-[2.5px]","aria-hidden":"true",strokeWidth:3})}),(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"ml-3 text-xs text-foreground-light",children:"string"==typeof e?e:e[0]}),tT()(e)&&(0,n.jsx)("p",{className:"ml-3 text-xs text-foreground-lighter",children:e[1]})]})]},"string"==typeof e?e:e[0]))})]}),h&&(0,n.jsx)("div",{className:"border-t pt-4 mt-4",children:(0,n.jsx)("p",{className:"text-foreground-light text-xs",children:h})})]},e.id)})})})]}),(0,n.jsx)(tZ,{visible:"tier_free"===N,subscription:F,onClose:()=>w(void 0),onConfirm:()=>{w(void 0),q?j(!0):g(!0)},projects:_,"data-sentry-element":"DowngradeModal","data-sentry-source-file":"PlanUpdateSidePanel.tsx"}),(0,n.jsx)(t7,{selectedTier:N,onClose:()=>w(void 0),planMeta:W,subscriptionPreviewError:O,subscriptionPreviewIsLoading:G,subscriptionPreviewInitialized:H,subscriptionPreview:U,subscription:F,projects:_,currentPlanMeta:{...V.find(e=>{var t;return e.id===(null==F||null==(t=F.plan)?void 0:t.id)}),features:(null==(e=tK.vw.find(e=>{var t;return e.id==="tier_".concat(null==F||null==(t=F.plan)?void 0:t.id)}))?void 0:e.features)||[]},"data-sentry-element":"SubscriptionPlanUpdateDialog","data-sentry-source-file":"PlanUpdateSidePanel.tsx"}),(0,n.jsx)(t4,{visible:v,onClose:()=>j(!1),"data-sentry-element":"MembersExceedLimitModal","data-sentry-source-file":"PlanUpdateSidePanel.tsx"}),(0,n.jsx)(t1,{visible:h,projects:_,onClose:e=>{g(!1),e&&E()},"data-sentry-element":"ExitSurveyModal","data-sentry-source-file":"PlanUpdateSidePanel.tsx"}),(0,n.jsx)(al,{visible:f,originalPlan:x.current,subscription:F,onClose:e=>{y(!1),e&&E()},"data-sentry-element":"UpgradeSurveyModal","data-sentry-source-file":"PlanUpdateSidePanel.tsx"})]})},ao=()=>{var e,t,a;let{slug:s}=(0,r.g)(),o=eF(),d=(0,eM._P)("disableProjectCreationAndUpdate"),{isSuccess:c,can:x}=(0,p.hl)(u.aG.BILLING_READ,"stripe.subscriptions"),{data:h,error:g,isLoading:f,isError:y,isSuccess:N}=(0,i.j5)({orgSlug:s},{enabled:x}),w=null==h?void 0:h.plan,C=null!=(e=null==w?void 0:w.name)?e:"Unknown",S=!d&&!["enterprise"].includes(null!=(t=null==w?void 0:w.id)?t:"");return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(l.gu,{"data-sentry-element":"ScaffoldSection","data-sentry-source-file":"Subscription.tsx",children:[(0,n.jsx)("div",{className:"col-span-12 pb-2",children:(0,n.jsx)(tF.R,{"data-sentry-element":"Restriction","data-sentry-source-file":"Subscription.tsx"})}),(0,n.jsx)(l.xp,{"data-sentry-element":"ScaffoldSectionDetail","data-sentry-source-file":"Subscription.tsx",children:(0,n.jsx)("div",{className:"sticky space-y-6 top-12",children:(0,n.jsxs)("div",{className:"space-y-2 mb-4",children:[(0,n.jsx)("p",{className:"text-foreground text-base m-0",children:"Subscription Plan"}),(0,n.jsx)("p",{className:"text-sm text-foreground-light m-0",children:"Each organization has it's own subscription plan, billing cycle, payment methods and usage quotas."})]})})}),(0,n.jsx)(l.Rf,{"data-sentry-element":"ScaffoldSectionContent","data-sentry-source-file":"Subscription.tsx",children:c&&!x?(0,n.jsx)(m.A,{resourceText:"view this organization's subscription"}):(0,n.jsxs)(n.Fragment,{children:[f&&(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(b.A,{}),(0,n.jsx)(b.A,{className:"w-3/4"}),(0,n.jsx)(b.A,{className:"w-1/2"})]}),y&&(0,n.jsx)(j.A,{subject:"Failed to retrieve subscription",error:g}),N&&(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsx)("div",{children:(0,n.jsxs)("p",{className:"text-2xl text-brand",children:[null!=(a=null==w?void 0:w.name)?a:"Unknown"," Plan"]})}),(0,n.jsxs)("div",{children:[(0,n.jsx)(eT.A,{projectUpdateDisabled:d,children:(0,n.jsx)(X.$,{type:"default",className:"pointer-events-auto",disabled:!S,onClick:()=>o.setPanelKey("subscriptionPlan"),children:"Change subscription plan"})}),!S&&(d?(0,n.jsx)(eL.F,{className:"mt-2",withIcon:!0,variant:"info",title:"Unable to update plan from ".concat(C),children:"We have temporarily disabled project and subscription changes - our engineers are working on a fix."}):(0,n.jsx)(eL.F,{withIcon:!0,className:"mt-2",variant:"info",title:"Unable to update plan from ".concat(C),actions:[(0,n.jsx)("div",{children:(0,n.jsx)(X.$,{asChild:!0,type:"default",children:(0,n.jsx)(v(),{href:"/support/new?category=sales&subject=Change%20plan%20away%20from%20".concat(C),children:"Contact support"})})},"contact-support")],children:"Please contact us if you'd like to change your plan."}))]}),!(null==h?void 0:h.usage_billing_enabled)&&(0,n.jsx)(tI.Z,{type:"default",title:"This organization is limited by the included usage",children:(0,n.jsxs)("div",{className:"[&>p]:!leading-normal prose text-sm",children:["Projects may become unresponsive when this organization exceeds its"," ",(0,n.jsx)(v(),{href:"/org/".concat(s,"/usage"),children:"included usage quota"}),". To scale seamlessly,"," ",(null==w?void 0:w.id)==="free"?"upgrade to a paid plan.":"you can disable Spend Cap under the Cost Control settings."]})})]})]})})]}),(0,n.jsx)(ai,{"data-sentry-element":"PlanUpdateSidePanel","data-sentry-source-file":"Subscription.tsx"})]})},ad=()=>{let{billingAccountData:e,billingPaymentMethods:t,billingCredits:a,billingInvoices:s}=(0,o.x)(["billing:account_data","billing:payment_methods","billing:credits","billing:invoices"]),r=(0,d.a)(),{data:u}=(0,i.j5)({orgSlug:null==r?void 0:r.slug}),m=!(null==u?void 0:u.billing_via_partner),p=e&&m,x=t&&m;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(l.Vw,{"data-sentry-element":"ScaffoldContainerLegacy","data-sentry-source-file":"BillingSettings.tsx",children:(0,n.jsx)(l.Dm,{"data-sentry-element":"ScaffoldTitle","data-sentry-source-file":"BillingSettings.tsx",children:"Billing"})}),(0,n.jsx)(l.eh,{id:"subscription",className:(0,c.cn)("[&>div]:!pt-0"),"data-sentry-element":"ScaffoldContainer","data-sentry-source-file":"BillingSettings.tsx",children:(0,n.jsx)(ao,{"data-sentry-element":"Subscription","data-sentry-source-file":"BillingSettings.tsx"})}),(0,n.jsx)(l.cJ,{"data-sentry-element":"ScaffoldDivider","data-sentry-source-file":"BillingSettings.tsx"}),(0,n.jsx)(l.eh,{id:"cost-control","data-sentry-element":"ScaffoldContainer","data-sentry-source-file":"BillingSettings.tsx",children:(0,n.jsx)(eK,{"data-sentry-element":"CostControl","data-sentry-source-file":"BillingSettings.tsx"})}),(0,n.jsx)(l.cJ,{"data-sentry-element":"ScaffoldDivider","data-sentry-source-file":"BillingSettings.tsx"}),(null==r?void 0:r.plan.id)!=="free"&&(0,n.jsx)(l.eh,{id:"breakdown",children:(0,n.jsx)(D,{})}),s&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(l.cJ,{}),(0,n.jsx)(l.eh,{id:"invoices",children:(0,n.jsx)(h,{})})]}),x&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(l.cJ,{}),(0,n.jsx)(l.eh,{id:"payment-methods",children:(0,n.jsx)(tE,{})})]}),a&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(l.cJ,{}),(0,n.jsx)(l.eh,{id:"credits-balance",children:(0,n.jsx)(tu,{})})]}),p&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(l.cJ,{}),(0,n.jsx)(l.eh,{id:"email",children:(0,n.jsx)(ew,{})}),(0,n.jsx)(l.cJ,{}),(0,n.jsx)(l.eh,{id:"address",children:(0,n.jsx)(eh,{})})]})]})};var ac=a(1356),au=a(14091),am=a(49369);let ap=()=>{let{panel:e}=(0,r.g)(),t=eF();return(0,s.useEffect)(()=>{if(e&&"string"==typeof e&&["subscriptionPlan","costControl"].includes(e)){var a;t.setPanelKey(e),null==(a=document.getElementById("billing-page-top"))||a.scrollIntoView({behavior:"smooth"})}},[e]),(0,n.jsx)(ad,{"data-sentry-element":"BillingSettings","data-sentry-component":"OrgBillingSettings","data-sentry-source-file":"billing.tsx"})};ap.getLayout=e=>(0,n.jsx)(ac.A,{children:(0,n.jsx)(au.A,{children:(0,n.jsx)(am.A,{children:e})})});let ax=ap},47452:(e,t,a)=>{"use strict";a.d(t,{C5:()=>j,MJ:()=>y,Rr:()=>v,eI:()=>g,lR:()=>f,lV:()=>u,zB:()=>p});var n=a(80263),s=a(38694),r=a(53239),l=a(87494),i=a(51500),o=a(19428),d=a(88712),c=a(37055);let u=l.Op,m=r.createContext({}),p=e=>{let{...t}=e;return(0,n.jsx)(m.Provider,{value:{name:t.name},"data-sentry-element":"unknown","data-sentry-component":"FormField","data-sentry-source-file":"form.tsx",children:(0,n.jsx)(l.xI,{...t,"data-sentry-element":"Controller","data-sentry-source-file":"form.tsx"})})},x=()=>{let e=r.useContext(m),t=r.useContext(h),{getFieldState:a,formState:n}=(0,l.xW)(),s=a(e.name,n);if(!e)throw Error("useFormField should be used within <FormField>");let{id:i}=t;return{id:i,name:e.name,formItemId:"".concat(i,"-form-item"),formDescriptionId:"".concat(i,"-form-item-description"),formMessageId:"".concat(i,"-form-item-message"),...s}},h=r.createContext({}),g=r.forwardRef((e,t)=>{let{asChild:a,...l}=e,i=r.useId(),o=a?s.DX:"div";return(0,n.jsx)(h.Provider,{value:{id:i},children:(0,n.jsx)(o,{ref:t,...l})})});g.displayName="FormItem";let f=r.forwardRef((e,t)=>{let{className:a,...s}=e,{error:r,formItemId:l}=x();return(0,n.jsx)(o.J,{ref:t,className:(0,i.cn)("text-foreground-light","transition-colors",r&&"!text-destructive",a,"leading-normal"),htmlFor:l,...s})});f.displayName="FormLabel";let y=r.forwardRef((e,t)=>{let{...a}=e,{error:r,formItemId:l,formDescriptionId:i,formMessageId:o}=x();return(0,n.jsx)(s.DX,{ref:t,id:l,"aria-describedby":r?"".concat(i," ").concat(o):"".concat(i),"aria-invalid":!!r,...a})});y.displayName="FormControl";let v=r.forwardRef((e,t)=>{let{className:a,...s}=e,{formDescriptionId:r}=x();return(0,n.jsx)("div",{ref:t,id:r,className:(0,i.cn)("text-sm text-foreground-light",a),...s})});v.displayName="FormDescription";let j=r.forwardRef((e,t)=>{let{className:a,children:s,...r}=e,{error:l,formMessageId:o}=x(),u=l?String(null==l?void 0:l.message):s;return(0,n.jsx)(d.N,{initial:!1,children:u?(0,n.jsx)(c.P.div,{initial:{opacity:0,y:-5,height:0},animate:{opacity:1,y:0,height:"auto"},exit:{opacity:0,y:-5,height:0},transition:{duration:.15,ease:"easeInOut"},children:(0,n.jsx)("p",{ref:t,id:o,className:(0,i.cn)("text-sm text-destructive",a),...r,children:u})},o):null})});j.displayName="FormMessage"},48550:(e,t,a)=>{var n=a(45558),s=a(10116),r=a(59568),l=a(71057),i=a(10876),o=a(99582);e.exports=function(e,t,a,d){var c=-1,u=s,m=!0,p=e.length,x=[],h=t.length;if(!p)return x;a&&(t=l(t,i(a))),d?(u=r,m=!1):t.length>=200&&(u=o,m=!1,t=new n(t));e:for(;++c<p;){var g=e[c],f=null==a?g:a(g);if(g=d||0!==g?g:0,m&&f==f){for(var y=h;y--;)if(t[y]===f)continue e;x.push(g)}else u(t,f,d)||x.push(g)}return x}},49369:(e,t,a)=>{"use strict";a.d(t,{A:()=>u});var n=a(80263),s=a(15601),r=a.n(s),l=a(90478),i=a(24400);let o=()=>{let e=(0,i.useRouter)();return e.isReady?e.asPath.split("?")[0]:""};var d=a(39358),c=a(92882);let u=function(e){let{children:t}=e,{slug:a}=(0,l.g)(),[s]=o().split("#");return s==="/org/".concat(a,"/team")||s==="/org/".concat(a,"/integrations")||s==="/org/".concat(a,"/usage")||s==="/org/".concat(a,"/billing")?t:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(c.Vw,{className:"mb-0","data-sentry-element":"ScaffoldContainerLegacy","data-sentry-source-file":"OrganizationSettingsLayout.tsx",children:[(0,n.jsx)(c.Dm,{"data-sentry-element":"ScaffoldTitle","data-sentry-source-file":"OrganizationSettingsLayout.tsx",children:"Organization Settings"}),(0,n.jsx)(d.h,{className:"overflow-x-auto","aria-label":"Organization menu navigation","data-sentry-element":"NavMenu","data-sentry-source-file":"OrganizationSettingsLayout.tsx",children:[{label:"General",href:"/org/".concat(a,"/general")},{label:"Security",href:"/org/".concat(a,"/security")},{label:"OAuth Apps",href:"/org/".concat(a,"/apps")},{label:"Audit Logs",href:"/org/".concat(a,"/audit")},{label:"Legal Documents",href:"/org/".concat(a,"/documents")}].filter(Boolean).map(e=>(0,n.jsx)(d.O,{active:s===e.href,children:(0,n.jsx)(r(),{href:e.href,children:e.label})},e.label))})]}),(0,n.jsx)("main",{className:"h-full w-full overflow-y-auto",children:t})]})}},50084:(e,t,a)=>{var n=a(89527),s=a(22363);e.exports=function(e){return s(e)&&n(e)}},54753:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});let n=(0,a(15740).A)("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]])},54925:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});let n=(0,a(15740).A)("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]])},55071:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});let n=(0,a(15740).A)("OctagonAlert",[["path",{d:"M12 16h.01",key:"1drbdi"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M15.312 2a2 2 0 0 1 1.414.586l4.688 4.688A2 2 0 0 1 22 8.688v6.624a2 2 0 0 1-.586 1.414l-4.688 4.688a2 2 0 0 1-1.414.586H8.688a2 2 0 0 1-1.414-.586l-4.688-4.688A2 2 0 0 1 2 15.312V8.688a2 2 0 0 1 .586-1.414l4.688-4.688A2 2 0 0 1 8.688 2z",key:"1fd625"}]])},55315:(e,t,a)=>{var n=a(71057);e.exports=function(e,t){return n(t,function(t){return e[t]})}},58971:(e,t,a)=>{"use strict";a.d(t,{$:()=>i});var n=a(80251),s=a(73969),r=a(65172);async function l(e){let{projectRef:t,orgSlug:a,reasons:n,message:s,exitAction:l}=e,{data:i,error:o}=await (0,r.bE)("/platform/feedback/downgrade",{body:{...void 0!==t&&{projectRef:t},...void 0!==a&&{orgSlug:a},reasons:n,additionalFeedback:s,exitAction:l}});return o&&(0,r.H4)(o),i}let i=function(){let{onError:e,...t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.n)(e=>l(e),{async onError(t,a,n){void 0===e?s.oR.error("Failed to submit exit survey: ".concat(t.message)):e(t,a,n)},...t})}},59676:(e,t,a)=>{"use strict";a.d(t,{A:()=>i});var n=a(80263);a(53239);var s=a(70800),r=a(87610);let l={tiny:14,small:16,medium:20,large:24,xlarge:32};function i(e){let{style:t,size:a="medium"}=e,i=(0,s.A)("inputErrorIcon");return(0,n.jsx)("div",{className:i.base,style:t,"data-sentry-component":"InputErrorIcon","data-sentry-source-file":"InputErrorIcon.tsx",children:(0,n.jsx)(r.A,{size:l[a],strokeWidth:2,"data-sentry-element":"AlertCircle","data-sentry-source-file":"InputErrorIcon.tsx"})})}},60680:(e,t,a)=>{"use strict";a.d(t,{Ay:()=>i});var n=a(80263),s=a(90709);a(53239);var r=a(70800);let l=e=>{let{open:t,children:a,className:r,...l}=e;return(0,n.jsx)(s.bL,{asChild:l.asChild,defaultOpen:l.defaultOpen,open:t,onOpenChange:l.onOpenChange,disabled:l.disabled,className:r,"data-sentry-element":"unknown","data-sentry-component":"Collapsible","data-sentry-source-file":"Collapsible.tsx",children:a})};l.Trigger=function(e){let{children:t,asChild:a}=e;return(0,n.jsx)(s.l9,{asChild:a,"data-sentry-element":"unknown","data-sentry-component":"Trigger","data-sentry-source-file":"Collapsible.tsx",children:t})},l.Content=function(e){let{asChild:t,children:a,className:l}=e,i=(0,r.A)("collapsible");return(0,n.jsx)(s.UC,{asChild:t,className:[i.content,l].join(" "),"data-sentry-element":"unknown","data-sentry-component":"Content","data-sentry-source-file":"Collapsible.tsx",children:a})};let i=l},61395:(e,t,a)=>{"use strict";a.d(t,{M:()=>b});var n=a(80263),s=a(53239),r=a(47452),l=a(79279),i=a(37055),o=a(51500),d=a(19428),c=a(32682);let u=(0,l.F)("relative grid gap-10",{variants:{size:{tiny:"text-xs",small:"text-sm leading-4",medium:"text-sm",large:"text-base",xlarge:"text-base"},align:{left:"",right:""},responsive:{true:"",false:""},layout:{horizontal:"flex flex-col gap-2 md:grid md:grid-cols-12",vertical:"flex flex-col gap-2",flex:"flex flex-row gap-3","flex-row-reverse":"flex flex-row gap-6 flex-row-reverse justify-between"},flex:{true:"",false:""}},compoundVariants:[{layout:"flex",align:"right",className:"justify-between"},{layout:"flex-row-reverse",align:"right",className:"justify-between"}],defaultVariants:{}}),m=(0,l.F)("transition-all duration-500 ease-in-out",{variants:{flex:{true:"",false:""},align:{left:"",right:""},layout:{horizontal:"flex flex-col gap-2 col-span-4",vertical:"flex flex-row gap-2 justify-between",flex:"flex flex-col gap-0","flex-row-reverse":"flex flex-col"},labelLayout:{horizontal:"",vertical:"","":""}},compoundVariants:[{flex:!0,align:"left",className:"order-2"},{flex:!0,align:"right",className:"order-1"},{layout:["vertical","flex"],labelLayout:void 0,flex:!1,className:"flex flex-row gap-2 justify-between"},{layout:"horizontal",className:"flex flex-col gap-2"}],defaultVariants:{}}),p=(0,l.F)("transition-all duration-500 ease-in-out",{variants:{flex:{true:"",false:""},align:{left:"order-1",right:"order-2"},layout:{horizontal:"",vertical:"",flex:"","flex-row-reverse":""}},compoundVariants:[{flex:!0,align:"left",className:"order-1"},{flex:!0,align:"right",className:"order-2"},{layout:["vertical","flex"],className:"col-span-12"},{layout:"horizontal",align:"left",className:"col-span-8"},{layout:"horizontal",align:"right",className:"text-right"}],defaultVariants:{}}),x=(0,l.F)("text-foreground-lighter leading-normal",{variants:{size:{...c.SK.text},layout:{vertical:"mt-2",horizontal:"mt-2",flex:"","flex-row-reverse":""}},defaultVariants:{}}),h=(0,l.F)("text-foreground-muted",{variants:{size:{...c.SK.text}},defaultVariants:{}}),g=(0,l.F)("text-foreground-muted",{variants:{size:{...c.SK.text}},defaultVariants:{}}),f=(0,l.F)("text-foreground-muted",{variants:{size:{...c.SK.text}},defaultVariants:{}}),y=(0,l.F)("",{variants:{flex:{true:"",false:""},align:{left:"",right:""},layout:{horizontal:"",vertical:"",flex:"","flex-row-reverse":""}},compoundVariants:[{flex:!0,align:"left",className:""},{flex:!0,align:"right",className:"order-last"},{layout:"flex-row-reverse",className:"flex flex-col justify-center items-end shrink-0"}]}),v=(0,l.F)("",{variants:{nonBoxInput:{true:"",false:""},label:{true:"",false:""},layout:{vertical:"",horizontal:"","flex-row-reverse":""}},compoundVariants:[{nonBoxInput:!0,label:!0,layout:"vertical",className:"my-3"},{nonBoxInput:!0,label:!0,layout:"horizontal",className:"my-3 md:mt-0 mb-3"}],defaultVariants:{}}),j=s.forwardRef((e,t)=>{let{align:a="left",className:s,description:l,id:c,label:j,labelOptional:b,layout:N="vertical",style:w,labelLayout:C,size:S="medium",beforeLabel:_,afterLabel:A,nonBoxInput:M=!j,hideMessage:k=!1,isReactForm:I,...P}=e,E="flex"===N||"flex-row-reverse"===N,F=!!(j||_||A),L=I&&!k&&(0,n.jsx)(i.P.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.3,ease:"easeInOut"},className:(0,o.cn)("flex-row-reverse"===N?"mt-0":"mt-2"),children:(0,n.jsx)(r.C5,{className:(0,o.cn)("mt-2 transition-opacity duration-300 ease-in-out","flex-row-reverse"===N&&"mt-0"),"data-formlayout-id":"message"})}),T=l&&I?(0,n.jsx)(r.Rr,{className:(0,o.cn)(x({size:S,layout:N})),"data-formlayout-id":"description",id:"".concat(c,"-description"),children:l}):l?(0,n.jsx)("p",{className:(0,o.cn)(x({size:S,layout:N}),"text-sm text-foreground-light"),"data-formlayout-id":"description",children:l}):null,z=()=>(0,n.jsxs)(n.Fragment,{children:[_&&(0,n.jsx)("span",{className:(0,o.cn)(h({size:S})),id:c+"-before","data-formlayout-id":"beforeLabel",children:(0,n.jsx)("span",{children:_})}),(0,n.jsx)("span",{children:j}),A&&(0,n.jsx)("span",{className:(0,o.cn)(g({size:S})),id:c+"-after","data-formlayout-id":"afterLabel",children:A})]});return(0,n.jsxs)("div",{ref:t,...P,className:(0,o.cn)(u({size:S,flex:E,align:a,layout:N}),s),children:[E&&(0,n.jsxs)("div",{className:(0,o.cn)(y({flex:E,align:a,layout:N})),children:[P.children,"flex-row-reverse"===N&&L]}),F||b||"horizontal"===N?(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{className:(0,o.cn)(m({align:a,labelLayout:C,flex:E,layout:N})),"data-formlayout-id":"labelContainer",children:[F&&I?(0,n.jsx)(r.lR,{className:"text-foreground flex gap-2 items-center break-all","data-formlayout-id":"formLabel",htmlFor:P.name||c,children:(0,n.jsx)(z,{})}):(0,n.jsx)(d.J,{className:"text-foreground flex gap-2 items-center break-all leading-normal","data-formlayout-id":"label",htmlFor:P.name||c,children:(0,n.jsx)(z,{})}),b&&(0,n.jsx)("span",{className:(0,o.cn)(f({size:S})),id:c+"-optional","data-formlayout-id":"labelOptional",children:b}),E&&(0,n.jsxs)(n.Fragment,{children:[T,"flex-row-reverse"!==N&&L]})]})}):null,!E&&(0,n.jsx)("div",{className:(0,o.cn)(p({align:a,layout:N})),style:w,"data-formlayout-id":"dataContainer",children:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:(0,o.cn)(v({nonBoxInput:M,label:j,layout:N})),"data-formlayout-id":"nonBoxInputContainer",children:P.children}),L,T]})})]})}),b=(0,s.forwardRef)((e,t)=>{let{...a}=e;return(0,n.jsx)(r.eI,{children:(0,n.jsx)(j,{ref:t,isReactForm:!0,...a,children:a.children})})});b.displayName="FormItemLayout"},61741:(e,t,a)=>{var n=a(55315),s=a(24967);e.exports=function(e){return null==e?[]:n(e,s(e))}},64190:(e,t,a)=>{var n=a(77488),s=a(5689),r=a(33312),l=n?n.isConcatSpreadable:void 0;e.exports=function(e){return r(e)||s(e)||!!(l&&e&&e[l])}},64711:(e,t,a)=>{"use strict";a.d(t,{x:()=>o});var n=a(80263),s=a(53239),r=a(78721),l=a(71139),i=a(51500);let o=(0,s.forwardRef)((e,t)=>{let{...a}=e;return(0,n.jsxs)(r.m_,{children:[(0,n.jsx)(r.k$,{asChild:!0,children:(0,n.jsx)(l._2,{ref:t,...a,className:(0,i.cn)(a.className,"!pointer-events-auto"),onClick:e=>{!a.disabled&&a.onClick&&a.onClick(e)},children:a.children})}),a.disabled&&void 0!==a.tooltip.content.text&&(0,n.jsx)(r.ZI,{...a.tooltip.content,children:a.tooltip.content.text})]})});o.displayName="DropdownMenuItemTooltip"},67201:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});let n=(0,a(15740).A)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]])},74723:(e,t,a)=>{var n=a(33999),s=a(38230),r=a(84837);e.exports=s?function(e,t){return s(e,"toString",{configurable:!0,enumerable:!1,value:n(t),writable:!0})}:r},79206:(e,t,a)=>{"use strict";a.d(t,{A:()=>i});var n=a(56947),s=a(65172),r=a(36366);async function l(e,t){let{slug:a}=e;if(!a)throw Error("slug is required");let{data:n,error:r}=await (0,s.Jt)("/platform/organizations/{slug}/members/reached-free-project-limit",{params:{path:{slug:a}},signal:t});return r&&(0,s.H4)(r),n}let i=function(e){let{slug:t}=e,{enabled:a=!0,...s}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,n.I)(r.O.freeProjectLimitCheck(t),e=>{let{signal:a}=e;return l({slug:t},a)},{enabled:a&&void 0!==t,...s})}},82228:(e,t,a)=>{"use strict";a.d(t,{BT:()=>d,Wu:()=>c,ZB:()=>o,Zp:()=>l,aR:()=>i,wL:()=>u});var n=a(80263),s=a(53239),r=a(51500);let l=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,n.jsx)("div",{ref:t,className:(0,r.cn)("rounded-lg border bg-surface-100 text-card-foreground shadow-sm",a),...s})});l.displayName="Card";let i=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,n.jsx)("div",{ref:t,className:(0,r.cn)("flex flex-col space-y-1.5 py-4 px-6 border-b",a),...s})});i.displayName="CardHeader";let o=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,n.jsx)("h3",{ref:t,className:(0,r.cn)("text-xs font-mono uppercase",a),...s})});o.displayName="CardTitle";let d=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,n.jsx)("p",{ref:t,className:(0,r.cn)("text-sm text-foreground-muted",a),...s})});d.displayName="CardDescription";let c=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,n.jsx)("div",{ref:t,className:(0,r.cn)("py-4 px-6 border-b last:border-none",a),...s})});c.displayName="CardContent";let u=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,n.jsx)("div",{ref:t,className:(0,r.cn)(" flex items-center py-4 px-6",a),...s})});u.displayName="CardFooter"},86926:(e,t,a)=>{var n=a(35902),s=a(89527),r=a(22442),l=a(80544),i=a(61741),o=Math.max;e.exports=function(e,t,a,d){e=s(e)?e:i(e),a=a&&!d?l(a):0;var c=e.length;return a<0&&(a=o(c+a,0)),r(e)?a<=c&&e.indexOf(t,a)>-1:!!c&&n(e,t,a)>-1}},87645:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});var n=a(80263);function s(e){let{body:t,head:a,className:s,containerClassName:r,borderless:l,headTrClasses:i,bodyClassName:o,style:d}=e,c=["table-container"];r&&c.push(r),l&&c.push("table-container--borderless");let u=["table"];return s&&u.push(s),(0,n.jsx)("div",{className:c.join(" "),"data-sentry-component":"Table","data-sentry-source-file":"Table.tsx",children:(0,n.jsxs)("table",{className:u.join(" "),style:d,children:[(0,n.jsx)("thead",{children:(0,n.jsx)("tr",{className:i,children:a})}),(0,n.jsx)("tbody",{className:o,children:t})]})})}s.th=e=>{let{children:t,className:a,style:s}=e,r=["p-3 px-4 text-left"];return a&&r.push(a),(0,n.jsx)("th",{className:r.join(" "),style:s,"data-sentry-component":"Th","data-sentry-source-file":"Table.tsx",children:t})},s.td=e=>{let{children:t,colSpan:a,className:s,style:r,...l}=e;return(0,n.jsx)("td",{className:s,colSpan:a,style:r,...l,"data-sentry-component":"Td","data-sentry-source-file":"Table.tsx",children:t})},s.tr=e=>{let{children:t,className:a,onClick:s,style:r,hoverable:l}=e,i=[a];return(s||l)&&i.push("tr--link"),(0,n.jsx)("tr",{className:i.join(" "),onClick:s,style:r,"data-sentry-component":"Tr","data-sentry-source-file":"Table.tsx",children:t})};let r=s},91194:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});let n=(0,a(15740).A)("Loader",[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]])},91272:e=>{e.exports=function(e,t,a){switch(a.length){case 0:return e.call(t);case 1:return e.call(t,a[0]);case 2:return e.call(t,a[0],a[1]);case 3:return e.call(t,a[0],a[1],a[2])}return e.apply(t,a)}},92479:(e,t,a)=>{var n=a(84837),s=a(33548),r=a(22704);e.exports=function(e,t){return r(s(e,t,n),e+"")}},92777:(e,t,a)=>{"use strict";a.d(t,{A:()=>l});var n=a(80263);a(53239);var s=a(70800),r=a(51500);function l(e){let{icon:t,className:a,size:l}=e,i=(0,s.A)("inputIconContainer");return(0,n.jsx)("div",{className:(0,r.cn)(i.base,i.size[l],a),"data-sentry-component":"InputIconContainer","data-sentry-source-file":"InputIconContainer.tsx",children:t})}},92882:(e,t,a)=>{"use strict";a.d(t,{BS:()=>i,Dm:()=>c,HJ:()=>v,Rf:()=>f,Uw:()=>d,Vw:()=>N,Xr:()=>b,aw:()=>h,bV:()=>l,cJ:()=>p,dX:()=>u,eh:()=>o,fh:()=>j,gu:()=>m,sZ:()=>x,tn:()=>y,xp:()=>g});var n=a(80263),s=a(53239),r=a(51500);let l="mx-auto w-full max-w-[1200px]",i="px-4 @lg:px-6 @xl:px-12 @2xl:px-20 @3xl:px-24",o=(0,s.forwardRef)((e,t)=>{let{className:a,bottomPadding:s,size:l="default",...o}=e;return(0,n.jsx)("div",{ref:t,...o,className:(0,r.cn)("mx-auto w-full",{small:"max-w-[768px]",default:"max-w-[1200px]",large:"max-w-[1600px]",full:"max-w-none"}[l],i,s&&"pb-16",a)})}),d=(0,s.forwardRef)((e,t)=>{let{className:a,...s}=e;return(0,n.jsx)("header",{...s,ref:t,className:(0,r.cn)("w-full","flex-col gap-3 py-6",a)})}),c=(0,s.forwardRef)((e,t)=>{let{className:a,...s}=e;return(0,n.jsx)("h1",{ref:t,...s,className:(0,r.cn)("text-2xl",a)})}),u=(0,s.forwardRef)((e,t)=>{let{className:a,...s}=e;return(0,n.jsx)("p",{ref:t,...s,className:(0,r.cn)("text-sm text-foreground-light",a)})}),m=(0,s.forwardRef)((e,t)=>{let{className:a,isFullWidth:s,topPadding:l,...i}=e;return(0,n.jsx)("div",{ref:t,...i,className:(0,r.cn)("flex flex-col first:pt-12 py-6",s?"w-full":"gap-3 lg:grid md:grid-cols-12",a)})}),p=(0,s.forwardRef)((e,t)=>{let{className:a,...s}=e;return(0,n.jsx)("div",{ref:t,...s,className:(0,r.cn)("w-full h-px bg-border",a)})}),x=(0,s.forwardRef)((e,t)=>{let{className:a,...s}=e;return(0,n.jsx)("h3",{ref:t,...s,className:(0,r.cn)("text-foreground text-xl",a)})}),h=(0,s.forwardRef)((e,t)=>{let{className:a,...s}=e;return(0,n.jsx)("p",{ref:t,...s,className:(0,r.cn)("text-sm text-foreground-light",a)})}),g=(0,s.forwardRef)((e,t)=>{let{className:a,children:s,title:l,...i}=e;return(0,n.jsxs)("div",{ref:t,...i,className:(0,r.cn)("col-span-4 xl:col-span-5 prose text-sm",a),children:[l&&(0,n.jsx)("h2",{children:l}),s]})}),f=(0,s.forwardRef)((e,t)=>{let{className:a,...s}=e;return(0,n.jsx)("div",{ref:t,...s,className:(0,r.cn)("col-span-8 xl:col-span-7","flex flex-col gap-6",a)})}),y=(0,s.forwardRef)((e,t)=>{let{className:a,...s}=e;return(0,n.jsx)("div",{ref:t,...s,className:(0,r.cn)("flex flex-col gap-3 items-center",a)})}),v=(0,s.forwardRef)((e,t)=>{let{className:a,...s}=e;return(0,n.jsx)("div",{ref:t,...s,className:(0,r.cn)("flex w-full items-center",a)})}),j=(0,s.forwardRef)((e,t)=>{let{className:a,...s}=e;return(0,n.jsx)("div",{ref:t,...s,className:(0,r.cn)("flex flex-row gap-3",a)})}),b=(0,s.forwardRef)((e,t)=>{let{className:a,...s}=e;return(0,n.jsx)("div",{ref:t,...s,className:(0,r.cn)("flex flex-col gap-3","min-w-[420px]",a)})}),N=(0,s.forwardRef)((e,t)=>{let{className:a,...s}=e;return(0,n.jsx)("div",{ref:t,...s,className:(0,r.cn)(l,i,"my-8 flex flex-col gap-8",a)})});d.displayName="ScaffoldHeader",c.displayName="ScaffoldTitle",u.displayName="ScaffoldDescription",o.displayName="ScaffoldContainer",p.displayName="ScaffoldDivider",m.displayName="ScaffoldSection",b.displayName="ScaffoldColumn",g.displayName="ScaffoldSectionDetail",f.displayName="ScaffoldSectionContent",y.displayName="ScaffoldFilterAndContent",v.displayName="ScaffoldActionsContainer",j.displayName="ScaffoldActionsGroup",N.displayName="ScaffoldContainerLegacy",x.displayName="ScaffoldSectionTitle",h.displayName="ScaffoldSectionDescription"},94725:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});var n=a(80263),s=a(78721);let r=e=>{let{projectUpdateDisabled:t,projectNotActive:a=!1,children:r,tooltip:l}=e;return(0,n.jsxs)(s.m_,{"data-sentry-element":"Tooltip","data-sentry-component":"ProjectUpdateDisabledTooltip","data-sentry-source-file":"ProjectUpdateDisabledTooltip.tsx",children:[(0,n.jsx)(s.k$,{asChild:!0,"data-sentry-element":"TooltipTrigger","data-sentry-source-file":"ProjectUpdateDisabledTooltip.tsx",children:r}),(t||a)&&(0,n.jsx)(s.ZI,{side:"bottom",className:"w-72 text-center",children:t?l||"Subscription changes are currently disabled. Our engineers are working on a fix.":a?"Unable to update subscription as project is currently not active":""})]})}},95708:(e,t,a)=>{"use strict";a.d(t,{A:()=>g});var n=a(80263),s=a(53239),r=a(29012),l=a(1848),i=a(59676),o=a(92777),d=a(32682),c=a(70800),u=a(52647),m=a(51500),p=a(40022),x=a(60115);function h(e){let{autoComplete:t,autoFocus:a,className:h,inputClassName:g,iconContainerClassName:f,copy:y,defaultValue:v,descriptionText:j,disabled:b,error:N,icon:w,id:C="",name:S="",inputRef:_,label:A,afterLabel:M,beforeLabel:k,labelOptional:I,layout:P,onChange:E,onBlur:F,onCopy:L,placeholder:T,type:z="text",value:D,style:B,reveal:R=!1,actions:U,size:O="medium",borderless:G=!1,validation:H,...V}=e,[q,W]=(0,s.useState)("Copy"),[K,Y]=(0,s.useState)(!0),$=(0,c.A)("input"),{formContextOnChange:J,values:Z,errors:Q,handleBlur:X,touched:ee,fieldLevelValidation:et}=(0,x.x)();Z&&!D&&(D=Z[C||S]),N||(Q&&!N&&(N=Q[C||S]),N=ee&&ee[C]?N:void 0),(0,s.useEffect)(()=>{H&&et(C,H(D))},[]);let ea=["peer/input",$.base];return N&&ea.push($.variants.error),N||ea.push($.variants.standard),O&&ea.push($.size[O]),w&&ea.push($.with_icon),b&&ea.push($.disabled),g&&ea.push(g),(0,n.jsx)(l.H,{label:A,afterLabel:M,beforeLabel:k,labelOptional:I,layout:P,id:C,error:N,descriptionText:j,style:B,size:O,className:h,"data-sentry-element":"FormLayout","data-sentry-component":"Input","data-sentry-source-file":"Input.tsx",children:(0,n.jsxs)("div",{className:$.container,children:[(0,n.jsx)("input",{"data-size":O,autoComplete:t,autoFocus:a,defaultValue:v,disabled:b,id:C,name:S,onChange:function(e){E&&E(e),J&&J(e),H&&et(C,H(e.target.value))},onBlur:function(e){X&&setTimeout(()=>{X(e)},100),F&&F(e)},onCopy:L,placeholder:T,ref:_,type:z,value:R&&K?d.ne:D,className:(0,m.cn)(ea),...V}),w&&(0,n.jsx)(o.A,{size:O,icon:w,className:f}),y||N||U?(0,n.jsxs)("div",{className:$.actions_container,children:[N&&(0,n.jsx)(i.A,{size:O}),y&&!(R&&K)?(0,n.jsx)(p.$,{size:"tiny",type:"default",icon:(0,n.jsx)(r.A,{}),onClick:()=>{var e;return e=D,void(0,u.l)(e,()=>{W("Copied"),setTimeout(()=>{W("Copy")},3e3),null==L||L()})},children:q}):null,R&&K?(0,n.jsx)(p.$,{size:"tiny",type:"default",onClick:function(){Y(!1)},children:"Reveal"}):null,U&&U]}):null]})})}h.TextArea=function(e){let{className:t,textAreaClassName:a,descriptionText:o,disabled:d,error:m,icon:h,id:g="",name:f="",label:y,afterLabel:v,beforeLabel:j,labelOptional:b,layout:N,onChange:w,onBlur:C,placeholder:S,value:_,style:A,rows:M=4,limit:k,size:I,borderless:P=!1,validation:E,copy:F=!1,onCopy:L,actions:T,...z}=e,[D,B]=(0,s.useState)(0),[R,U]=(0,s.useState)("Copy"),{formContextOnChange:O,values:G,errors:H,handleBlur:V,touched:q,fieldLevelValidation:W}=(0,x.x)();G&&!_&&(_=G[g||f]),m||(H&&!m&&(m=H[g||f]),m=q&&q[g||f]?m:void 0),(0,s.useEffect)(()=>{E&&W(g,E(_))},[]);let K=(0,c.A)("input"),Y=[K.base];return m&&Y.push(K.variants.error),m||Y.push(K.variants.standard),h&&Y.push(K.with_icon),I&&Y.push(K.size[I]),d&&Y.push(K.disabled),a&&Y.push(a),(0,n.jsx)(l.H,{className:t,label:y,afterLabel:v,beforeLabel:j,labelOptional:b,layout:N,id:g,error:m,descriptionText:o,style:A,size:I,"data-sentry-element":"FormLayout","data-sentry-component":"TextArea","data-sentry-source-file":"Input.tsx",children:(0,n.jsxs)("div",{className:K.container,children:[(0,n.jsx)("textarea",{disabled:d,id:g,name:f,rows:M,cols:100,placeholder:S,onChange:function(e){B(e.target.value.length),w&&w(e),O&&O(e),E&&W(g,E(e.target.value))},onBlur:function(e){V&&setTimeout(()=>{V(e)},100),C&&C(e)},onCopy:L,value:_,className:Y.join(" "),maxLength:k,...z}),F||m||T?(0,n.jsx)("div",{className:K.textarea_actions_container,children:(0,n.jsxs)("div",{className:K.textarea_actions_container_items,children:[m&&(0,n.jsx)(i.A,{size:I}),F&&(0,n.jsx)(p.$,{size:"tiny",type:"default",onClick:()=>{var e;return e=_,void(0,u.l)(e,()=>{U("Copied"),setTimeout(()=>{U("Copy")},3e3),null==L||L()})},icon:(0,n.jsx)(r.A,{}),children:R}),T&&T]})}):null]})})};let g=h},98969:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});var n=a(80263),s=a(87610);let r=e=>{let{resourceText:t,isFullPage:a=!1}=e,r=()=>(0,n.jsx)("div",{className:"block w-full rounded border border-opacity-20 py-4 px-6 border-overlay bg-surface-200","data-sentry-component":"NoPermissionMessage","data-sentry-source-file":"NoPermission.tsx",children:(0,n.jsxs)("div",{className:"flex space-x-3",children:[(0,n.jsx)("div",{className:"mt-1",children:(0,n.jsx)(s.A,{size:20,"data-sentry-element":"AlertCircle","data-sentry-source-file":"NoPermission.tsx"})}),(0,n.jsx)("div",{className:"flex w-full items-center justify-between",children:(0,n.jsxs)("div",{className:"space-y-1",children:[(0,n.jsxs)("p",{className:"text-sm",children:["You need additional permissions to ",t]}),(0,n.jsx)("div",{children:(0,n.jsx)("p",{className:"text-sm text-foreground-light",children:"Contact your organization owner or administrator for assistance."})})]})})]})});return a?(0,n.jsx)("div",{className:"flex h-full items-center justify-center",children:(0,n.jsx)("div",{className:"w-[550px]",children:(0,n.jsx)(r,{})})}):(0,n.jsx)(r,{})}},99846:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});let n=(0,a(15740).A)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])}},e=>{var t=t=>e(e.s=t);e.O(0,[726,4280,3730,2981,6110,386,7661,5599,8445,4024,3019,2310,8274,7803,9146,5549,4185,6393,7686,8821,2690,1356,4496,6593,636,8792],()=>t(17667)),_N_E=e.O()}]);